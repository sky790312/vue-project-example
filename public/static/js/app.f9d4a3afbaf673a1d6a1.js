webpackJsonp([2,0],[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.router=void 0;var r=n(72),i=a(r),o=n(27),s=a(o),u=n(411),l=a(u),c=n(197),d=a(c),f=n(445),h=n(442),p=a(h),m=n(232),g=a(m),v=n(230),b=n(231),A=n(412),y=a(A),_=n(427),P=a(_),w=n(439),x=a(w),C=n(438),I=a(C),S=n(194),E=a(S),k=n(422),R=a(k),T=n(433),O=a(T),L=n(426),M=a(L),B=n(437),j=a(B),N=n(425),U=a(N),F=n(436),D=a(F),q=n(440),V=a(q),z=n(428),H=a(z),G=n(441),W=a(G),K=n(71),Y=a(K),J=n(444),X=a(J);s["default"].use(l["default"]),s["default"].use(d["default"]),s["default"].use(p["default"]),s["default"].use(X["default"]),s["default"].filter("camelCaseToText",b.camelCaseToText),s["default"].filter("urlPathToFileName",b.urlPathToFileName),s["default"].directive("active",v.active),s["default"].directive("active-link",v.activeLink),s["default"].directive("drag",v.drag),s["default"].config.debug=!0,s["default"].config.lang="en",(0,i["default"])(g["default"]).forEach(function(e){s["default"].locale(e,g["default"][e])});var Q=t.router=new d["default"];Q.map({"/":{component:P["default"]},"/forgot-pass":{component:M["default"]},"/reset-pass/:nonce":{component:j["default"]},"/email-verified/:nonce":{component:U["default"]},"/share-codes":{component:x["default"]},"/share-codes/:shareCodeId":{component:I["default"]},"/buildings":{component:E["default"]},"/buildings/:buildingId":{component:R["default"]},"/buildings/:buildingId/panoramas/:panoramaId":{component:O["default"]},"/share-codes/:shareCodeId/buildings/:buildingId":{component:R["default"]},"/share-codes/:shareCodeId/buildings/:buildingId/panoramas/:panoramaId":{component:O["default"]},"/profile":{component:D["default"]},"/signup":{component:V["default"]},"/manage-agents":{component:H["default"]},"/system-maintenance":{component:W["default"]}}),Q.afterEach(function(){window.scrollTo(0,0);var e=document.getElementsByTagName("body")[0];e.className=""}),Q.redirect({"*":"/buildings"}),(0,f.sync)(Y["default"],Q),Q.start(y["default"],"#app")},,function(e,t){"use strict";function n(e){return e.buildings}function a(e){return e.building}function r(e){return e.currentBuildingId}function i(e){return e.shareCodes}function o(e){return e.shareCode}function s(e){return e.codeBuildings}function u(e){return e.panoramas}function l(e){return e.panorama}function c(e){return e.currentPanoramaId}function d(e){return e.activeModal}function f(e){return e.activeLoading}function h(e){return e.sort}function p(e){return e.sortList}function m(e){return e.leanBuildingInfo}function g(e){return e.leanAuthInfo}function v(e){return e.authInfo}function b(e){return e.signupInfo}function A(e){return e.changePasswordInfo}function y(e){return e.user}function _(e){return e.hasFieldChanged}function P(e){return e.firebaseComments}function w(e){return e.firebaseFiles}function x(e){return e.currentCommentId}function C(e){return e.areBuildingsFetched}function I(e){return e.areShareCodesFetched}function S(e){return e.isNewBuilding}function E(e){return e.isNewPanorama}function k(e){return e.isUpdatedPanorama}function R(e){return e.isLineGridToggled}function T(e){return e.cameraRotation}function O(e){return e.profilePhoto}function L(e){return e.agents}function M(e){return e.selectedPanorama}function B(e){return e.currentPanorama}function j(e){return e.targetPanorama}function N(e){return e.selectedMarker}function U(e){return e.editorState}function F(e){return e.isEditorSceneReady}function D(e){return e.hasAddedMarker}function q(e){return e.hasClickedAddMarker}function V(e){return e.cameraContainerEl}function z(e){return e.cameraElRotation}function H(e){return e.cameraElOrigRotation}function G(e){return e.cameraContainerElRotation}function W(e){return e.isLoading}function K(e){return e.alertParams}function Y(e){return e.uploadURLs}function J(e){return e.isImageLoading}function X(e){return e.isUploadingMarker}function Q(e){return e.sceneEventCount}function Z(e){return e.sortedPanoramas}function $(e){return e.hasSortTriggered}Object.defineProperty(t,"__esModule",{value:!0}),t.buildings=n,t.building=a,t.currentBuildingId=r,t.shareCodes=i,t.shareCode=o,t.codeBuildings=s,t.panoramas=u,t.panorama=l,t.currentPanoramaId=c,t.activeModal=d,t.activeLoading=f,t.sort=h,t.sortList=p,t.leanBuildingInfo=m,t.leanAuthInfo=g,t.authInfo=v,t.signupInfo=b,t.changePasswordInfo=A,t.user=y,t.hasFieldChanged=_,t.firebaseComments=P,t.firebaseFiles=w,t.currentCommentId=x,t.areBuildingsFetched=C,t.areShareCodesFetched=I,t.isNewBuilding=S,t.isNewPanorama=E,t.isUpdatedPanorama=k,t.isLineGridToggled=R,t.cameraRotation=T,t.profilePhoto=O,t.agents=L,t.selectedPanorama=M,t.currentPanorama=B,t.targetPanorama=j,t.selectedMarker=N,t.editorState=U,t.isEditorSceneReady=F,t.hasAddedMarker=D,t.hasClickedAddMarker=q,t.cameraContainerEl=V,t.cameraElRotation=z,t.cameraElOrigRotation=H,t.cameraContainerElRotation=G,t.isLoading=W,t.alertParams=K,t.uploadURLs=Y,t.isImageLoading=J,t.isUploadingMarker=X,t.sceneEventCount=Q,t.sortedPanoramas=Z,t.hasSortTriggered=$},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e.toString().replace(/^(.*\/\/[^\/?#]*).*$/,"$1")}Object.defineProperty(t,"__esModule",{value:!0}),t.resetAll=t.assignIndexToPanoramas=t.setHasSortTriggered=t.setSortedPanoramas=t.sortPanoramas=t.setPanoramaImage=t.setTagPhoto=t.setIsUploadingMarker=t.setIsImageLoading=t.setAlertParams=t.setIsLoading=t.resetCamera=t.undoSetRotation=t.getCameraContainerElRotation=t.getCameraElRotation=t.setCameraElOrigRotation=t.setCameraElRotation=t.getCameraContainerEl=t.setIsEditorSceneReady=t.setHasClickedAddMarker=t.setHasAddedMarker=t.setEditorState=t.setSceneEventCount=t.updateAppMarkerNextPano=t.updateAppMarkerRotation=t.updateAppMarker=t.deleteAppMarker=t.addAppMarker=t.setSelectedMarker=t.setTargetPanorama=t.setCurrentPanorama=t.setSelectedPanorama=t.setIsLineGridToggled=t.clearChangePassword=t.setProfilePhoto=t.getCameraRotation=t.setIsUpdatedPanorama=t.setIsNewPanorama=t.setIsNewBuilding=t.updateAllAppMarkers=t.updatePanoramaState=t.setPanoramaPhotoState=t.addPanoramaToState=t.addBuildingToState=t.doImageUpload=t.deleteFirebaseComments=t.fetchFirebaseComments=t.setCurrentCommentId=t.setUserLeanAuth=t.setUserInfo=t.setUserPhoto=t.unsetFieldChanged=t.setFieldChanged=t.setStartSort=t.setSort=t.setRotation=t.setMarkers=t.checkBuildings=t.checkShareCodes=t.clearActiveLoading=t.setActiveLoading=t.clearActiveModal=t.setActiveModal=t.removePanorama=t.setCurrentPanoramaId=t.fetchPanoramasByBuildingId=t.clearPanorama=t.clearPanoramas=t.fetchPanoramaById=t.fetchBuildingsByCodeId=t.fetchShareCodeById=t.setCurrentBuildingId=t.removeBuildingFromState=t.updateBuildingsState=t.clearBuilding=t.fetchBuildingById=t.fetchBuildings=t.fetchShareCodes=void 0;var i=n(73),o=a(i),s=n(27),u=a(s),l=n(5),c=a(l),d=n(90),f=a(d),h=n(215),p=a(h),m=n(1),g=a(m);p["default"].init({appId:"dHMLGStW8tmPj53UI7s8rGGg-9Nh9j0Va",appKey:"8wfbdLBVOQ7CItl868FwVkix"}),f["default"].initializeApp({apiKey:"AIzaSyB9AEeMDFIKXg5TovG-0gsXqHXXpnN7jIg",authDomain:"test01-245e3.firebaseapp.com",databaseURL:"https://test01-245e3.firebaseio.com",storageBucket:"gs://viewercampro-fd868.appspot.com"});t.fetchShareCodes=function(e,t){var n=e.dispatch,a=e.state;""!==a.user.role&&"normal"!==a.user.role&&"agent"!==a.user.role&&"shopifyAgent"!==a.user.role||c["default"].fetchShareCodes().then(function(e){n("SET_SHARECODES",e)}).then(function(){t()}),"admin"===a.user.role&&c["default"].fetchAdminShareCodes().then(function(e){n("SET_SHARECODES",e)}).then(function(){t()})},t.fetchBuildings=function(e,t){var n=e.dispatch,a=e.state;""!==a.user.role&&"normal"!==a.user.role&&"agent"!==a.user.role&&"shopifyAgent"!==a.user.role||c["default"].fetchBuildings().then(function(e){n("SET_BUILDINGS",e)},function(e){return e}).then(function(e){t(e)}),"admin"===a.user.role&&c["default"].fetchAdminBuildings().then(function(e){n("SET_BUILDINGS",e)}).then(function(){t()})},t.fetchBuildingById=function(e,t,n){var a=e.dispatch;e.state;c["default"].fetchBuildingById(t).then(function(e){a("SET_BUILDING_BY_ID",e)},function(e){return e}).then(function(e){n(e)})},t.clearBuilding=function(e){var t=e.dispatch;e.state;t("CLEAR_BUILDING")},t.updateBuildingsState=function(e,t){var n=e.dispatch;e.state;console.log("UPDATE_BUILDING_STATE:",t),n("UPDATE_BUILDINGS_STATE",t)},t.removeBuildingFromState=function(e,t){var n=e.dispatch;n("REMOVE_BUILDING_FROM_STATE",t)},t.setCurrentBuildingId=function(e,t){var n=e.dispatch;n("SET_CURRENT_BUILDING_ID",t)},t.fetchShareCodeById=function(e,t){var n=e.dispatch;n("FETCH_SHARE_CODE_BY_ID",t)},t.fetchBuildingsByCodeId=function(e){var t=e.dispatch,n=e.state;c["default"].fetchBuildingsByCodeId(n.shareCode,function(e){t("FETCH_BUILDINGS_BY_CODE_ID",e)})},t.fetchPanoramaById=function(e,t){var n=e.dispatch;n("FETCH_PANORAMA_BY_ID",t)},t.clearPanoramas=function(e){var t=e.dispatch;t("CLEAR_PANORAMAS")},t.clearPanorama=function(e){var t=e.dispatch;t("CLEAR_PANORAMA")},t.fetchPanoramasByBuildingId=function(e,t){var n=e.dispatch,a=e.state,r=a.building;c["default"].fetchPanoramasByBuildingId(r,t,function(e){n("SET_PANORAMAS",e)})},t.setCurrentPanoramaId=function(e,t){var n=e.dispatch;n("SET_CURRENT_PANORAMA_ID",t)},t.removePanorama=function(e,t){var n=e.dispatch;n("REMOVE_PANORAMA",t)},t.setActiveModal=function(e,t){var n=e.dispatch;n("SET_ACTIVE_MODAL",t)},t.clearActiveModal=function(e){var t=e.dispatch;t("CLEAR_ACTIVE_MODAL")},t.setActiveLoading=function(e,t){var n=e.dispatch;n("SET_ACTIVE_LOADING",t)},t.clearActiveLoading=function(e){var t=e.dispatch;t("CLEAR_ACTIVE_LOADING")},t.checkShareCodes=function(e){var t=e.dispatch;t("CHECK_SHARECODES")},t.checkBuildings=function(e){var t=e.dispatch;t("CHECK_BUILDINGS")},t.setMarkers=function(e,t,n,a){var r=e.dispatch;r("SET_MARKERS",t,n,a)},t.setRotation=function(e,t,n){var a=e.dispatch;a("SET_ROTATION",t,n)},t.setSort=function(e,t,n){var a=e.dispatch;a("SET_SORT",t,n)},t.setStartSort=function(e,t,n){var a=e.dispatch;a("SET_START_SORT",t,n)},t.setFieldChanged=function(e){var t=e.dispatch;t("SET_FIELD_CHANGED")},t.unsetFieldChanged=function(e){var t=e.dispatch;t("UNSET_FIELD_CHANGED")},t.setUserPhoto=function(e,t){var n=e.dispatch;n("SET_USER_PHOTO",t)},t.setUserInfo=function(e,t){var n=e.dispatch;n("SET_USER_INFO",t)},t.setUserLeanAuth=function(e,t){var n=e.dispatch;n("SET_USER_LEAN_AUTH_STATE",t)},t.setCurrentCommentId=function(e,t){var n=e.dispatch;n("SET_CURRENT_COMMENT_ID",t)},t.fetchFirebaseComments=function(e,t){var n=e.dispatch,a=f["default"].database().ref("comments/"+t);a.once("value",function(e){var t=e.val(),a=[];for(var r in t){var i=t[r].date,o={id:r,author:t[r].author,date:(0,g["default"])(i).format("YYYY/MM/DD"),message:t[r].message};a.push(o)}n("FETCH_FIREBASE_COMMENTS",a)})},t.deleteFirebaseComments=function(e,t,n){var a=(e.dispatch,f["default"].database().ref("comments/"+t+"/"+n)),r=f["default"].database().ref("buildings/"+t+"/commentCount");return r.transaction(function(e){return e-1}),a.remove(),o["default"].resolve()},t.doImageUpload=function(e,t,n){var a=e.dispatch;e.state;t.progress=20;var i=new p["default"].File(t.name,t);i.save().then(function(e){var t=[];if(n.length>=1)for(var i in n){var o=r(e.url());console.log(o);var s=e.thumbnailURL(n[i].w,n[i].h).replace(o,c["default"].resizeURL).replace("imageView","imageView2").replace("png","jpg");t.push(s)}else t.push(e.url());a("DO_IMAGE_UPLOAD",t)},function(e){console.log(e)})},t.addBuildingToState=function(e,t){var n=e.dispatch;n("ADD_BUILDING_TO_STATE",t)},t.addPanoramaToState=function(e,t){var n=e.dispatch;n("ADD_PANORAMA_TO_STATE",t)},t.setPanoramaPhotoState=function(e,t,n){var a=e.dispatch;a("SET_PANORAMA_PHOTO_STATE",t,n)},t.updatePanoramaState=function(e,t){var n=e.dispatch;n("UPDATE_PANORAMA_STATE",t)},t.updateAllAppMarkers=function(e,t){var n=e.dispatch;n("UPDATE_ALL_APP_MARKERS",t)},t.setIsNewBuilding=function(e,t){var n=e.dispatch;n("SET_IS_NEW_BUILDING",t)},t.setIsNewPanorama=function(e,t){var n=e.dispatch;n("SET_IS_NEW_PANORAMA",t)},t.setIsUpdatedPanorama=function(e,t){var n=e.dispatch;n("SET_IS_UPDATED_PANORAMA",t)},t.getCameraRotation=function(e,t,n){var a=e.dispatch;a("GET_CAMERA_ROTATION",t,n)},t.setProfilePhoto=function(e){var t=e.dispatch;t("SET_PROFILE_PHOTO")},t.clearChangePassword=function(e){var t=e.dispatch;t("CLEAR_CHANGE_PASSWORD")},t.setIsLineGridToggled=function(e){var t=e.dispatch;t("SET_IS_LINE_GRID_TOGGLED")},t.setSelectedPanorama=function(e,t){var n=e.dispatch;e.state;n("SET_SELECTED_PANORAMA",t)},t.setCurrentPanorama=function(e,t){var n=e.dispatch;e.state;n("SET_CURRENT_PANORAMA",t)},t.setTargetPanorama=function(e,t){var n=e.dispatch;e.state;n("SET_TARGET_PANORAMA",t)},t.setSelectedMarker=function(e,t){var n=e.dispatch;e.state;n("SET_SELECTED_MARKER",t)},t.addAppMarker=function(e,t){var n=e.dispatch;n("ADD_APP_MARKER",t)},t.deleteAppMarker=function(e){var t=e.dispatch;t("DELETE_APP_MARKER")},t.updateAppMarker=function(e,t,n,a,r){var i=e.dispatch;i("UPDATE_APP_MARKER",t,n,a,r)},t.updateAppMarkerRotation=function(e,t,n){var a=e.dispatch;a("UPDATE_APP_MARKER_ROTATION",t,n)},t.updateAppMarkerNextPano=function(e,t,n){var a=e.dispatch;a("UPDATE_APP_MARKER_NEXT_PANO",t,n)},t.setSceneEventCount=function(e,t){var n=e.dispatch;n("SET_SCENE_EVENT_COUNT",t)},t.setEditorState=function(e,t){var n=e.dispatch;n("SET_EDITOR_STATE",t)},t.setHasAddedMarker=function(e,t){var n=e.dispatch;n("SET_HAS_ADDED_MARKER",t)},t.setHasClickedAddMarker=function(e,t){var n=e.dispatch;n("SET_HAS_CLICKED_ADD_MARKER",t)},t.setIsEditorSceneReady=function(e,t){var n=e.dispatch;n("SET_IS_EDITOR_SCENE_READY",t)},t.getCameraContainerEl=function(e,t){var n=e.dispatch;n("GET_CAMERA_CONTAINER_EL",t)},t.setCameraElRotation=function(e,t,n){var a=e.dispatch;a("SET_CAMERA_EL_ROTATION",t,n)},t.setCameraElOrigRotation=function(e){var t=e.dispatch;t("SET_CAMERA_EL_ORIG_ROTATION")},t.getCameraElRotation=function(e,t){var n=e.dispatch;n("GET_CAMERA_EL_ROTATION",t)},t.getCameraContainerElRotation=function(e,t){var n=e.dispatch;n("GET_CAMERA_CONTAINER_EL_ROTATION",t)},t.undoSetRotation=function(e,t){var n=e.dispatch,a=e.state,r="0 "+a.cameraElOrigRotation.y+" 0";u["default"].nextTick(function(){n("SET_IS_EDITOR_SCENE_READY",!0),u["default"].nextTick(function(){n("GET_CAMERA_CONTAINER_EL",t.$parent.$els.cameraContainer),n("SET_CAMERA_EL_ROTATION",a.cameraContainerEl,r)})}),n("SET_SELECTED_PANORAMA",a.currentPanorama)},t.resetCamera=function(e,t,n){var a=e.dispatch,r=e.state;a("SET_IS_EDITOR_SCENE_READY",!r.isEditorSceneReady),u["default"].nextTick(function(){a("SET_IS_EDITOR_SCENE_READY",!0),u["default"].nextTick(function(){a("GET_CAMERA_CONTAINER_EL",t.$parent.$els.cameraContainer),n&&n()})})},t.setIsLoading=function(e,t){var n=e.dispatch;n("SET_EDITOR_LOADING",t)},t.setAlertParams=function(e,t){var n=e.dispatch;n("SET_EDITOR_ALERT",t)},t.setIsImageLoading=function(e,t){var n=e.dispatch;n("SET_IS_IMAGE_LOADING",t)},t.setIsUploadingMarker=function(e,t){var n=e.dispatch;n("SET_IS_UPLOADING_MARKER",t)},t.setTagPhoto=function(e,t){var n=e.dispatch;n("SET_TAG_PHOTO",t)},t.setPanoramaImage=function(e,t){var n=e.dispatch;n("SET_PANORAMA_IMAGE",t)},t.sortPanoramas=function(e,t,n,a){var r=e.dispatch;r("SORT_PANORAMAS",t,n,a)},t.setSortedPanoramas=function(e,t){var n=e.dispatch;n("SET_SORTED_PANORAMAS",t)},t.setHasSortTriggered=function(e,t){var n=e.dispatch;n("SET_HAS_SORT_TRIGGERED",t)},t.assignIndexToPanoramas=function(e,t,n,a){var r=e.dispatch;r("ASSIGN_INDEX_TO_PANORAMAS",t,n,a)},t.resetAll=function(e){var t=e.dispatch;t("RESET_ALL")}},function(e,t,n){var a,r;(function(){function n(e){function t(t,n,a,r,i,o){for(;i>=0&&i<o;i+=e){var s=r?r[i]:i;a=n(a,t[s],s,t)}return a}return function(n,a,r,i){a=w(a,i,4);var o=!R(n)&&P.keys(n),s=(o||n).length,u=e>0?0:s-1;return arguments.length<3&&(r=n[o?o[u]:u],u+=e),t(n,a,r,o,u,s)}}function i(e){return function(t,n,a){n=x(n,a);for(var r=k(t),i=e>0?0:r-1;i>=0&&i<r;i+=e)if(n(t[i],i,t))return i;return-1}}function o(e,t,n){return function(a,r,i){var o=0,s=k(a);if("number"==typeof i)e>0?o=i>=0?i:Math.max(i+s,o):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return i=n(a,r),a[i]===r?i:-1;if(r!==r)return i=t(p.call(a,o,s),P.isNaN),i>=0?i+o:-1;for(i=e>0?o:s-1;i>=0&&i<s;i+=e)if(a[i]===r)return i;return-1}}function s(e,t){var n=B.length,a=e.constructor,r=P.isFunction(a)&&a.prototype||d,i="constructor";for(P.has(e,i)&&!P.contains(t,i)&&t.push(i);n--;)i=B[n],i in e&&e[i]!==r[i]&&!P.contains(t,i)&&t.push(i)}var u=this,l=u._,c=Array.prototype,d=Object.prototype,f=Function.prototype,h=c.push,p=c.slice,m=d.toString,g=d.hasOwnProperty,v=Array.isArray,b=Object.keys,A=f.bind,y=Object.create,_=function(){},P=function(e){return e instanceof P?e:this instanceof P?void(this._wrapped=e):new P(e)};"undefined"!=typeof e&&e.exports&&(t=e.exports=P),t._=P,P.VERSION="1.8.3";var w=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,r){return e.call(t,n,a,r)};case 4:return function(n,a,r,i){return e.call(t,n,a,r,i)}}return function(){return e.apply(t,arguments)}},x=function(e,t,n){return null==e?P.identity:P.isFunction(e)?w(e,t,n):P.isObject(e)?P.matcher(e):P.property(e)};P.iteratee=function(e,t){return x(e,t,1/0)};var C=function(e,t){return function(n){var a=arguments.length;if(a<2||null==n)return n;for(var r=1;r<a;r++)for(var i=arguments[r],o=e(i),s=o.length,u=0;u<s;u++){var l=o[u];t&&void 0!==n[l]||(n[l]=i[l])}return n}},I=function(e){if(!P.isObject(e))return{};if(y)return y(e);_.prototype=e;var t=new _;return _.prototype=null,t},S=function(e){return function(t){return null==t?void 0:t[e]}},E=Math.pow(2,53)-1,k=S("length"),R=function(e){var t=k(e);return"number"==typeof t&&t>=0&&t<=E};P.each=P.forEach=function(e,t,n){t=w(t,n);var a,r;if(R(e))for(a=0,r=e.length;a<r;a++)t(e[a],a,e);else{var i=P.keys(e);for(a=0,r=i.length;a<r;a++)t(e[i[a]],i[a],e)}return e},P.map=P.collect=function(e,t,n){t=x(t,n);for(var a=!R(e)&&P.keys(e),r=(a||e).length,i=Array(r),o=0;o<r;o++){var s=a?a[o]:o;i[o]=t(e[s],s,e)}return i},P.reduce=P.foldl=P.inject=n(1),P.reduceRight=P.foldr=n(-1),P.find=P.detect=function(e,t,n){var a;if(a=R(e)?P.findIndex(e,t,n):P.findKey(e,t,n),void 0!==a&&a!==-1)return e[a]},P.filter=P.select=function(e,t,n){var a=[];return t=x(t,n),P.each(e,function(e,n,r){t(e,n,r)&&a.push(e)}),a},P.reject=function(e,t,n){return P.filter(e,P.negate(x(t)),n)},P.every=P.all=function(e,t,n){t=x(t,n);for(var a=!R(e)&&P.keys(e),r=(a||e).length,i=0;i<r;i++){var o=a?a[i]:i;if(!t(e[o],o,e))return!1}return!0},P.some=P.any=function(e,t,n){t=x(t,n);for(var a=!R(e)&&P.keys(e),r=(a||e).length,i=0;i<r;i++){var o=a?a[i]:i;if(t(e[o],o,e))return!0}return!1},P.contains=P.includes=P.include=function(e,t,n,a){return R(e)||(e=P.values(e)),("number"!=typeof n||a)&&(n=0),P.indexOf(e,t,n)>=0},P.invoke=function(e,t){var n=p.call(arguments,2),a=P.isFunction(t);return P.map(e,function(e){var r=a?t:e[t];return null==r?r:r.apply(e,n)})},P.pluck=function(e,t){return P.map(e,P.property(t))},P.where=function(e,t){return P.filter(e,P.matcher(t))},P.findWhere=function(e,t){return P.find(e,P.matcher(t))},P.max=function(e,t,n){var a,r,i=-(1/0),o=-(1/0);if(null==t&&null!=e){e=R(e)?e:P.values(e);for(var s=0,u=e.length;s<u;s++)a=e[s],a>i&&(i=a)}else t=x(t,n),P.each(e,function(e,n,a){r=t(e,n,a),(r>o||r===-(1/0)&&i===-(1/0))&&(i=e,o=r)});return i},P.min=function(e,t,n){var a,r,i=1/0,o=1/0;if(null==t&&null!=e){e=R(e)?e:P.values(e);for(var s=0,u=e.length;s<u;s++)a=e[s],a<i&&(i=a)}else t=x(t,n),P.each(e,function(e,n,a){r=t(e,n,a),(r<o||r===1/0&&i===1/0)&&(i=e,o=r)});return i},P.shuffle=function(e){for(var t,n=R(e)?e:P.values(e),a=n.length,r=Array(a),i=0;i<a;i++)t=P.random(0,i),t!==i&&(r[i]=r[t]),r[t]=n[i];return r},P.sample=function(e,t,n){return null==t||n?(R(e)||(e=P.values(e)),e[P.random(e.length-1)]):P.shuffle(e).slice(0,Math.max(0,t))},P.sortBy=function(e,t,n){return t=x(t,n),P.pluck(P.map(e,function(e,n,a){return{value:e,index:n,criteria:t(e,n,a)}}).sort(function(e,t){var n=e.criteria,a=t.criteria;if(n!==a){if(n>a||void 0===n)return 1;if(n<a||void 0===a)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,a){var r={};return n=x(n,a),P.each(t,function(a,i){var o=n(a,i,t);e(r,a,o)}),r}};P.groupBy=T(function(e,t,n){P.has(e,n)?e[n].push(t):e[n]=[t]}),P.indexBy=T(function(e,t,n){e[n]=t}),P.countBy=T(function(e,t,n){P.has(e,n)?e[n]++:e[n]=1}),P.toArray=function(e){return e?P.isArray(e)?p.call(e):R(e)?P.map(e,P.identity):P.values(e):[]},P.size=function(e){return null==e?0:R(e)?e.length:P.keys(e).length},P.partition=function(e,t,n){t=x(t,n);var a=[],r=[];return P.each(e,function(e,n,i){(t(e,n,i)?a:r).push(e)}),[a,r]},P.first=P.head=P.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:P.initial(e,e.length-t)},P.initial=function(e,t,n){return p.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},P.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:P.rest(e,Math.max(0,e.length-t))},P.rest=P.tail=P.drop=function(e,t,n){return p.call(e,null==t||n?1:t)},P.compact=function(e){return P.filter(e,P.identity)};var O=function(e,t,n,a){for(var r=[],i=0,o=a||0,s=k(e);o<s;o++){var u=e[o];if(R(u)&&(P.isArray(u)||P.isArguments(u))){t||(u=O(u,t,n));var l=0,c=u.length;for(r.length+=c;l<c;)r[i++]=u[l++]}else n||(r[i++]=u)}return r};P.flatten=function(e,t){return O(e,t,!1)},P.without=function(e){return P.difference(e,p.call(arguments,1))},P.uniq=P.unique=function(e,t,n,a){P.isBoolean(t)||(a=n,n=t,t=!1),null!=n&&(n=x(n,a));for(var r=[],i=[],o=0,s=k(e);o<s;o++){var u=e[o],l=n?n(u,o,e):u;t?(o&&i===l||r.push(u),i=l):n?P.contains(i,l)||(i.push(l),r.push(u)):P.contains(r,u)||r.push(u)}return r},P.union=function(){return P.uniq(O(arguments,!0,!0))},P.intersection=function(e){for(var t=[],n=arguments.length,a=0,r=k(e);a<r;a++){var i=e[a];if(!P.contains(t,i)){for(var o=1;o<n&&P.contains(arguments[o],i);o++);o===n&&t.push(i)}}return t},P.difference=function(e){var t=O(arguments,!0,!0,1);return P.filter(e,function(e){return!P.contains(t,e)})},P.zip=function(){return P.unzip(arguments)},P.unzip=function(e){for(var t=e&&P.max(e,k).length||0,n=Array(t),a=0;a<t;a++)n[a]=P.pluck(e,a);return n},P.object=function(e,t){for(var n={},a=0,r=k(e);a<r;a++)t?n[e[a]]=t[a]:n[e[a][0]]=e[a][1];return n},P.findIndex=i(1),P.findLastIndex=i(-1),P.sortedIndex=function(e,t,n,a){n=x(n,a,1);for(var r=n(t),i=0,o=k(e);i<o;){var s=Math.floor((i+o)/2);n(e[s])<r?i=s+1:o=s}return i},P.indexOf=o(1,P.findIndex,P.sortedIndex),P.lastIndexOf=o(-1,P.findLastIndex),P.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var a=Math.max(Math.ceil((t-e)/n),0),r=Array(a),i=0;i<a;i++,e+=n)r[i]=e;return r};var L=function(e,t,n,a,r){if(!(a instanceof t))return e.apply(n,r);var i=I(e.prototype),o=e.apply(i,r);return P.isObject(o)?o:i};P.bind=function(e,t){if(A&&e.bind===A)return A.apply(e,p.call(arguments,1));if(!P.isFunction(e))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),a=function(){return L(e,a,t,this,n.concat(p.call(arguments)))};return a},P.partial=function(e){var t=p.call(arguments,1),n=function(){for(var a=0,r=t.length,i=Array(r),o=0;o<r;o++)i[o]=t[o]===P?arguments[a++]:t[o];for(;a<arguments.length;)i.push(arguments[a++]);return L(e,n,this,this,i)};return n},P.bindAll=function(e){var t,n,a=arguments.length;if(a<=1)throw new Error("bindAll must be passed function names");for(t=1;t<a;t++)n=arguments[t],e[n]=P.bind(e[n],e);return e},P.memoize=function(e,t){var n=function(a){var r=n.cache,i=""+(t?t.apply(this,arguments):a);return P.has(r,i)||(r[i]=e.apply(this,arguments)),r[i]};return n.cache={},n},P.delay=function(e,t){var n=p.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},P.defer=P.partial(P.delay,P,1),P.throttle=function(e,t,n){var a,r,i,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:P.now(),o=null,i=e.apply(a,r),o||(a=r=null)};return function(){var l=P.now();s||n.leading!==!1||(s=l);var c=t-(l-s);return a=this,r=arguments,c<=0||c>t?(o&&(clearTimeout(o),o=null),s=l,i=e.apply(a,r),o||(a=r=null)):o||n.trailing===!1||(o=setTimeout(u,c)),i}},P.debounce=function(e,t,n){var a,r,i,o,s,u=function(){var l=P.now()-o;l<t&&l>=0?a=setTimeout(u,t-l):(a=null,n||(s=e.apply(i,r),a||(i=r=null)))};return function(){i=this,r=arguments,o=P.now();var l=n&&!a;return a||(a=setTimeout(u,t)),l&&(s=e.apply(i,r),i=r=null),s}},P.wrap=function(e,t){return P.partial(t,e)},P.negate=function(e){return function(){return!e.apply(this,arguments)}},P.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,a=e[t].apply(this,arguments);n--;)a=e[n].call(this,a);return a}},P.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},P.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},P.once=P.partial(P.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];P.keys=function(e){if(!P.isObject(e))return[];if(b)return b(e);var t=[];for(var n in e)P.has(e,n)&&t.push(n);return M&&s(e,t),t},P.allKeys=function(e){if(!P.isObject(e))return[];var t=[];for(var n in e)t.push(n);return M&&s(e,t),t},P.values=function(e){for(var t=P.keys(e),n=t.length,a=Array(n),r=0;r<n;r++)a[r]=e[t[r]];return a},P.mapObject=function(e,t,n){t=x(t,n);for(var a,r=P.keys(e),i=r.length,o={},s=0;s<i;s++)a=r[s],o[a]=t(e[a],a,e);return o},P.pairs=function(e){for(var t=P.keys(e),n=t.length,a=Array(n),r=0;r<n;r++)a[r]=[t[r],e[t[r]]];return a},P.invert=function(e){for(var t={},n=P.keys(e),a=0,r=n.length;a<r;a++)t[e[n[a]]]=n[a];return t},P.functions=P.methods=function(e){var t=[];for(var n in e)P.isFunction(e[n])&&t.push(n);return t.sort()},P.extend=C(P.allKeys),P.extendOwn=P.assign=C(P.keys),P.findKey=function(e,t,n){t=x(t,n);for(var a,r=P.keys(e),i=0,o=r.length;i<o;i++)if(a=r[i],t(e[a],a,e))return a},P.pick=function(e,t,n){var a,r,i={},o=e;if(null==o)return i;P.isFunction(t)?(r=P.allKeys(o),a=w(t,n)):(r=O(arguments,!1,!1,1),a=function(e,t,n){return t in n},o=Object(o));for(var s=0,u=r.length;s<u;s++){var l=r[s],c=o[l];a(c,l,o)&&(i[l]=c)}return i},P.omit=function(e,t,n){if(P.isFunction(t))t=P.negate(t);else{var a=P.map(O(arguments,!1,!1,1),String);t=function(e,t){return!P.contains(a,t)}}return P.pick(e,t,n)},P.defaults=C(P.allKeys,!0),P.create=function(e,t){var n=I(e);return t&&P.extendOwn(n,t),n},P.clone=function(e){return P.isObject(e)?P.isArray(e)?e.slice():P.extend({},e):e},P.tap=function(e,t){return t(e),e},P.isMatch=function(e,t){var n=P.keys(t),a=n.length;if(null==e)return!a;for(var r=Object(e),i=0;i<a;i++){var o=n[i];if(t[o]!==r[o]||!(o in r))return!1}return!0};var j=function(e,t,n,a){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof P&&(e=e._wrapped),t instanceof P&&(t=t._wrapped);var r=m.call(e);if(r!==m.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var i="[object Array]"===r;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(P.isFunction(o)&&o instanceof o&&P.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],a=a||[];for(var u=n.length;u--;)if(n[u]===e)return a[u]===t;if(n.push(e),a.push(t),i){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!j(e[u],t[u],n,a))return!1}else{var l,c=P.keys(e);if(u=c.length,P.keys(t).length!==u)return!1;for(;u--;)if(l=c[u],!P.has(t,l)||!j(e[l],t[l],n,a))return!1}return n.pop(),a.pop(),!0};P.isEqual=function(e,t){return j(e,t)},P.isEmpty=function(e){return null==e||(R(e)&&(P.isArray(e)||P.isString(e)||P.isArguments(e))?0===e.length:0===P.keys(e).length)},P.isElement=function(e){return!(!e||1!==e.nodeType)},P.isArray=v||function(e){return"[object Array]"===m.call(e)},P.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},P.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){P["is"+e]=function(t){return m.call(t)==="[object "+e+"]"}}),P.isArguments(arguments)||(P.isArguments=function(e){return P.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(P.isFunction=function(e){return"function"==typeof e||!1}),P.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},P.isNaN=function(e){return P.isNumber(e)&&e!==+e},P.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===m.call(e)},P.isNull=function(e){return null===e},P.isUndefined=function(e){return void 0===e},P.has=function(e,t){return null!=e&&g.call(e,t)},P.noConflict=function(){return u._=l,this},P.identity=function(e){return e},P.constant=function(e){return function(){return e}},P.noop=function(){},P.property=S,P.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},P.matcher=P.matches=function(e){return e=P.extendOwn({},e),function(t){return P.isMatch(t,e)}},P.times=function(e,t,n){var a=Array(Math.max(0,e));t=w(t,n,1);for(var r=0;r<e;r++)a[r]=t(r);return a},P.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},P.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},U=P.invert(N),F=function(e){var t=function(t){return e[t]},n="(?:"+P.keys(e).join("|")+")",a=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,a.test(e)?e.replace(r,t):e}};P.escape=F(N),P.unescape=F(U),P.result=function(e,t,n){var a=null==e?void 0:e[t];return void 0===a&&(a=n),P.isFunction(a)?a.call(e):a};var D=0;P.uniqueId=function(e){var t=++D+"";return e?e+t:t},P.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,H=function(e){return"\\"+V[e]};P.template=function(e,t,n){!t&&n&&(t=n),t=P.defaults({},t,P.templateSettings);var a=RegExp([(t.escape||q).source,(t.interpolate||q).source,(t.evaluate||q).source].join("|")+"|$","g"),r=0,i="__p+='";e.replace(a,function(t,n,a,o,s){return i+=e.slice(r,s).replace(z,H),r=s+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":a?i+="'+\n((__t=("+a+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(s){throw s.source=i,s}var u=function(e){return o.call(this,e,P)},l=t.variable||"obj";return u.source="function("+l+"){\n"+i+"}",u},P.chain=function(e){var t=P(e);return t._chain=!0,t};var G=function(e,t){return e._chain?P(t).chain():t};P.mixin=function(e){P.each(P.functions(e),function(t){var n=P[t]=e[t];P.prototype[t]=function(){var e=[this._wrapped];return h.apply(e,arguments),G(this,n.apply(P,e))}})},P.mixin(P),P.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=c[e];P.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],G(this,n)}}),P.each(["concat","join","slice"],function(e){var t=c[e];P.prototype[e]=function(){return G(this,t.apply(this._wrapped,arguments))}}),P.prototype.value=function(){return this._wrapped},P.prototype.valueOf=P.prototype.toJSON=P.prototype.value,P.prototype.toString=function(){return""+this._wrapped},a=[],r=function(){return P}.apply(t,a),!(void 0!==r&&(e.exports=r))}).call(this)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){e.forEach(function(e){e.initId=e.initId||e.objectId,delete e.createdAt,delete e.updatedAt,delete e.panorama})}function i(e,t){if(e.building){var n=e.building.map(function(e){if(e)return o(e);
}),a=e.email.map(function(e){if(e.email)return e.email});return{id:e.objectId,name:e.name,number:e.code,user:t||"",buildings:n.length>0?n:[""],emails:a.length>0?a:[""],date:c(e.updatedAt)}}}function o(e,t){if(e.panorama)return{panoramas:e.panorama||[],id:e.objectId||e.id,leanId:e.leanObjectId||"",name:e.name||"",description:e.description||"",visible:e.visible,user:t||"",floorplan:e.floorplan||"",code:e.sharecode||"",shareCode:v.viewerURL+"#!/"+e.sharecode,date:e.updatedAt?c(e.updatedAt):e.date,isDirty:!1}}function s(e,t){e.forEach(function(e){if(e.sharecode){var n=e.sharecode.map(function(t){return i(t,e.username)});t(n)}})}function u(e,t){e.forEach(function(e){if(e.building){var n=e.building.map(function(t){return o(t,e.username)});t(n)}})}function l(e){e.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0})}function c(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return n+"/"+f(a)+"/"+f(r)}function d(e){return void 0===e?200:e}function f(e){return(e<10?"0":"")+e}Object.defineProperty(t,"__esModule",{value:!0});var h=n(27),p=a(h),m=n(314),g=3e4,v={facebookAppId:"956126194495663",serverURL:"http://vrbackend.leanapp.cn",viewerURL:"http://vrviewer.istaging.co",resizeURL:"http://vrcam-10065475.image.myqcloud.com",panoViewerURL:"http://vrpano.istaging.co",bpLeanURL:"http://istaginghomeprobpintegrate.leanapp.cn",categories:["livingroom","diningroom","kitchen","bedroom","study","bathroom","toilet","garden","garage","outdoors","other"],user:{role:""}};v.authWithVRTour=function(e){return new m.Promise(function(t,n){var a="/leanapi/vrbackend/login",r={timeout:g},i=v.bpLeanURL+a;p["default"].http.post(i,e,r).then(function(e){200===e.status?t(e):n(e)},function(e){console.log("authWithVRTour error: ",e),n(e)})})},v.checkPanoResizeProgress=function(e){return new m.Promise(function(t,n){var a="/api/v1/websupport/pano/resizeprogress/"+e;p["default"].http.get(v.serverURL+a).then(function(e){var n=e.data;t(n)},function(e){console.log("fetchShareCodes error: ",e),n(e)})})},v.syncToVRTour=function(e){return new m.Promise(function(t,n){var a="/leanapi/vrbackend/sync",r={timeout:g},i=v.bpLeanURL+a;p["default"].http.post(i,e,r).then(function(e){200===e.status?t(e):n(e)},function(e){console.log("syncToVRTour error: ",e),n(e)})})},v.signUp=function(e){return new m.Promise(function(t,n){var a="/api/v1/users/formSignUp",r={timeout:g},i=v.serverURL+a;p["default"].http.post(i,e,r).then(function(e){200===e.status?t(e):n(e)},function(e){console.log("signUp error: ",e),n(e)})})},v.authWithFacebook=function(e){return new m.Promise(function(t,n){var a="/api/v1/users/auth/facebook/token",r={timeout:g},i=v.serverURL+a;p["default"].http.post(i,e,r).then(function(e){200===e.status?t(e):n(e)},function(e){console.log("authWithFacebook error: ",e),n(e)})})},v.verifyEmail=function(e){return new m.Promise(function(t,n){var a="/api/v1/users/email/"+e+"/verify",r=v.serverURL+a;p["default"].http.get(r,{}).then(function(e){200===e.status?t(e):n(e)},function(e){n(e)})})},v.updateUserProfile=function(e,t){var n=m.Promise.resolve();t&&(n=v.uploadUserPhoto(t)),console.log("PAYLOAD: ",e);var a=new m.Promise(function(t,n){var a="/api/v1/users/profile",r={timeout:g},i=v.serverURL+a;p["default"].http.post(i,e,r).then(function(e){console.log("RESP: ",e),200===e.status?t(e):n(e)},function(e){console.log("updateUserProfile error: ",e),n(e)})});return m.Promise.all([a,n])},v.uploadUserPhoto=function(e){return new m.Promise(function(t,n){var a="/api/v1/upload/userphoto",r=v.serverURL+a,i={timeout:g};p["default"].http.post(r,e,i).then(function(e){200===e.status?t(e):n(e)},function(e){console.log("uploadPhoto error: ",e),n(e)})})},v.fetchShareCodes=function(e){return new m.Promise(function(e,t){var n="/api/v1/me/sharecode";p["default"].http.get(v.serverURL+n).then(function(t){console.log("SHARECODES:",t.data);var n=t.data,a=n.map(function(e){return i(e)});e(a)},function(e){console.log("fetchShareCodes error: ",e),t(e)})})},v.fetchAdminShareCodes=function(e){return new m.Promise(function(e,t){var n="/api/v1/admin/me/sharecode";p["default"].http.get(v.serverURL+n).then(function(t){console.log("SHARECODES:",t.data);var n=t.data,a=[];s(n,function(e){a=a.concat(e)}),e(a)},function(e){console.log("fetchShareCodes error: ",e),t(e)})})},v.fetchBuildings=function(){return new m.Promise(function(e,t){var n="/api/v1/me/building?visible=true",a={timeout:g};p["default"].http.get(v.serverURL+n,{},a).then(function(t){console.log("BUILDINGS:",t.data);var n=t.data,a=n.map(function(e){return o(e)});e(a)},function(e){console.log("fetchBuildings error: ",e),t(e)})})},v.fetchAdminBuildings=function(e){return new m.Promise(function(e,t){var n="/api/v1/admin/me/building?visible=true";p["default"].http.get(v.serverURL+n).then(function(t){console.log("BUILDINGS:",t.data);var n=t.data,a=[];u(n,function(e){e.length>0&&(a=a.concat(e))}),e(a)},function(e){console.log("fetchBuildings error: ",e),t(e)})})},v.fetchBuildingById=function(e){return new m.Promise(function(t,n){var a=v.serverURL+"/api/v1/building/"+e;p["default"].http.get(a,{}).then(function(e){var n=e.data,a=o(n);console.log("BUILDING:",e.data),a.panoramas.forEach(function(e){e.markers&&r(e.markers)}),t(a)},function(e){console.log("fetchBuilding error: ",e),n(e)})})},v.fetchBuildingsByCodeId=function(e,t){var n=[];e&&(n=e.buildings.map(function(e){return o(e)})),t(n)},v.createBlankBuilding=function(){return new m.Promise(function(e,t){var n="/api/v1/building",a={timeout:g},r=v.serverURL+n;p["default"].http.post(r,{},a).then(function(n){200===n.status?e(n):t(n)},function(e){console.log("createBlankBuilding error: ",e),t(e)})})},v.updateBuilding=function(e,t){return new m.Promise(function(n,a){var r="/api/v1/building",i={timeout:g},o=v.serverURL+r;t.buildId=e,p["default"].http.put(o,t,i).then(function(e){200===e.status?n(e):a(e)},function(e){console.log("updateBuilding error: ",e),a(e)})})},v.deleteBuilding=function(e,t){return t.buildId=e,new m.Promise(function(e,n){var a="/api/v1/building/update",r={timeout:g},i=v.serverURL+a;p["default"].http.post(i,t,r).then(function(t){console.log("RESP:",t),200===t.status?e(t):n(t)},function(e){console.log("deleteBuilding error: ",e),n(e)})})},v.createBlankPanorama=function(e){return new m.Promise(function(t,n){var a="/api/v1/pano",r={timeout:g},i=v.serverURL+a,o={buildId:e};p["default"].http.post(i,o,r).then(function(e){200===e.status?t(e):n(e)},function(e){console.log("createBlankPanorama error: ",e),n(e)})})},v.uploadPanoFile=function(e){return new m.Promise(function(t,n){var a="/api/v1/websupport/pano/upload",r={timeout:g},i=v.serverURL+a;p["default"].http.post(i,e,r).then(function(e){200===e.status?t(e):n(e)},function(e){console.log("uploadFloorPlan error: ",e),n(e)})})},v.updatePanoFileMetadata=function(e,t){return console.log("META PAYLOAD:",t),new m.Promise(function(n,a){var r="/api/v1/websupport/pano/metadata/update",i={timeout:g},o=v.serverURL+r,s={fields:e,payload:t};p["default"].http.post(o,s,i).then(function(e){console.log("META RESP:",e),200===e.status?n(e):a(e)},function(e){console.log("uploadPanoFileMetadata error: ",e),a(e)})})},v.updatePanorama=function(e,t){return t.panoId=e,new m.Promise(function(e,n){var a=v.serverURL+"/api/v1/pano/update",r={timeout:g};p["default"].http.post(a,t,r).then(function(t){console.log("UPADATE RESP:",t),200===t.status?e(t):n(t)},function(e){console.log("updatePanorama error: ",e),n(e)})})},v.bulkUpdatePanorama=function(e){return new m.Promise(function(t,n){var a="/api/v1/pano/bulk/update",r={timeout:g},i=v.serverURL+a;e.panos.forEach(function(e){e.objectId=e.id}),p["default"].http.post(i,e,r).then(function(e){200===e.status?t(e):n(e)},function(e){console.log("bulkUpdatePanorama error: ",e),n(e)})})},v.updateMarkers=function(e){return new m.Promise(function(t,n){var a="/api/v1/marker",r={timeout:g};console.log("payload:",e),p["default"].http.post(v.serverURL+a,e,r).then(function(e){console.log("updateMarker:",e),200===e.status?t(e):n(e)},function(e){console.log("updateMarkers error: ",e),n(e)})})},v.sharePanorama=function(e){return new m.Promise(function(t,n){var a="/api/v1/upload/panorama/share",r={timeout:g},i=v.serverURL+a;p["default"].http.post(i,e,r).then(function(e){200===e.status?t(e):n(e)},function(e){console.log("sharePanorama error: ",e),n(e)})})},v.fetchPanoramasByBuildingId=function(e,t,n){var a=[];e&&e.id&&(a=e.panoramas.map(function(e){return e.markers&&r(e.markers),{web:e.web||"",app:e.app||"",thumbnail:e.thumbnail||"",id:e.objectId||e.id,name:e.name,category:e.categoryType||e.category,customCategory:"",x:d(e.x),y:d(e.y),isDefault:e.isDefault||!1,rotation:e.rotation||0,panoRotation:e.panoRotation||0,isDirty:!1,index:e.index,resizeProgress:e.resizeProgress||0,markers:e.markers||e.appMarkers||[]}})),l(a),n(a)},v.deletePanorama=function(e){return new m.Promise(function(t,n){var a=v.serverURL+"/api/v1/pano/delete",r={timeout:g};p["default"].http.post(a,e,r).then(function(e){200===e.status?t(e):n(e)},function(e){console.log("deletePanorama error: ",e),n(e)})})},t["default"]=v},function(e,t,n){var a,r;n(316),a=n(235),r=n(370),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(27),i=a(r),o={};o.stripCommas=function(e){return e.replace(/,/g,"")},o.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},o.getThumbnail=function(e){var t=[];for(var n in e)e[n]instanceof Array&&e[n].length>=1&&t.push(e[n]);return t[0]},o.getFirstThumbnail=function(e){var t=[];for(var n in e)e[n]instanceof Array&&e[n].length>=1&&t.push(e[n]);return t[0]&&t[0][0]?t[0][0].thumbnail:""},o.getObjsWithThumbnails=function(e,t){for(var n in t)if("panoramas"===n&&0!==t[n].length){var a=t[n].filter(function(e){return e.thumbnail&&""!==e.thumbnail});return a}},o.isFirstThumbnail=function(e,t){var n=t[e];return"panoramas"!==e||0===n.length||n===o.getThumbnail(t)},o.getFileFromInput=function(e){var t=document.getElementsByName(e)[0];return t.files[0]},o.clearFileFromInput=function(e){var t=document.getElementsByName(e)[0];t.value=""},o.setFileLinkName=function(e,t){var n=document.getElementsByName(e)[0];n.placeholder=t},o.getParentElements=function(e){var t=e.el.parentElement,n=t.parentElement.children;return[].slice.call(n)},o.addClassToParent=function(e){e.el.parentElement.className+=" active"},o.resetActiveClass=function(e){e.forEach(function(e){e.className=""})},o.PascalToParamCase=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}).substring(1)},o.getBrowserLang=function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},o.setLang=function(e){var t="",n=["zh","zh-tw","zh-cn"];t=n.indexOf(e.toLowerCase())>-1?"zh":"en",i["default"].config.lang=t},o.genAppMarkerPostion=function(e){var t={},n=e*(Math.PI/180),a=0,r=0,i=0;return a=-Math.sin(n),r=-Math.cos(n),i=Math.sin(n),t.y=200*i,t.x=200*a,t.z=200*r,t},o.genUnityAppMarkerPostion=function(e){var t=200,n={};return n.x=-e.z*t,n.y=e.y*t,n.z=-e.x*t,n},o.setLeancloudImgSize=function(e,t,n){return e.replace("w/4096/h/2048","w/"+t+"/h/"+n)},t["default"]=o},,function(e,t,n){var a,r;n(318),a=n(237),r=n(372),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(321),a=n(247),r=n(382),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},,function(e,t,n){(function(t){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(17),i=a(r),o=n(38),s=a(o),u=n(49),l=a(u),c=n(37),d=a(c),f="function"==typeof d["default"]&&"symbol"===(0,l["default"])(s["default"])?function(e){return"undefined"==typeof e?"undefined":(0,l["default"])(e)}:function(e){return e&&"function"==typeof d["default"]&&e.constructor===d["default"]?"symbol":"undefined"==typeof e?"undefined":(0,l["default"])(e)},h=n(36),p=n(47)("leancloud:request"),m=n(201),g=n(18),v=n(68),b=n(16),A=n(48),y=n(4),_=void 0,P={cn:"https://api.leancloud.cn",us:"https://us-api.leancloud.cn"},w=function(e,t){var n=(new Date).getTime(),a=m(n+e);return t?a+","+n+",master":a+","+n},x=function(e){var t=["batch","classes","files","date","functions","call","login","push","search/select","requestPasswordReset","requestEmailVerify","requestPasswordResetBySmsCode","resetPasswordBySmsCode","requestMobilePhoneVerify","requestLoginSmsCode","verifyMobilePhone","requestSmsCode","verifySmsCode","users","usersByMobilePhone","cloudQuery","qiniu","fileTokens","statuses","bigquery","search/select","subscribe/statuses/count","subscribe/statuses","installations"];if(t.indexOf(e)===-1&&!/users\/[^\/]+\/updatePassword/.test(e)&&!/users\/[^\/]+\/friendship\/[^\/]+/.test(e))throw new Error("Bad router: "+e+".")},C=0,I=function(e,t,n){var a=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],r=arguments[4],i=C++;p("request("+i+")",e,t,n,a);var o=new g,s=h(e,t).set(a).send(n).end(function(e,t){return t&&p("response("+i+")",t.status,t.body&&t.text,t.header),e?(t&&(e.statusCode=t.status,e.responseText=t.text,e.response=t.body),o.reject(e)):o.resolve(t.body,t.status,t)});return r&&s.on("progress",r),o},S=function(e){var n={"X-LC-Id":A.applicationId,"Content-Type":"application/json;charset=UTF-8"};A.masterKey&&A._useMasterKey?n["X-LC-Sign"]=w(A.masterKey,!0):n["X-LC-Sign"]=w(A.applicationKey),null!==A._config.applicationProduction&&(n["X-LC-Prod"]=A._config.applicationProduction),A._config.isNode?n["User-Agent"]=A._config.userAgent||"AV/"+A.version+"; Node.js/"+t.version:n["X-LC-UA"]="AV/"+A.version;var a=new g;return e?(n["X-LC-Session"]=e,a.resolve(n)):A._config.disableCurrentUser?a.resolve(n):A.User.currentAsync().then(function(e){e&&e._sessionToken&&(n["X-LC-Session"]=e._sessionToken),a.resolve(n)}),a},E=function(e,t,n,a,r){A.serverURL&&(A._config.APIServerURL=A.serverURL,console.warn("Please use AV._config.APIServerURL to replace AV.serverURL, and it is an internal interface."));var o=A._config.APIServerURL||P.cn;if("/"!==o.charAt(o.length-1)&&(o+="/"),o+="1.1/"+e,t&&(o+="/"+t),n&&(o+="/"+n),"users"!==e&&"classes"!==e||!r||(o+="?",r._fetchWhenSave&&(delete r._fetchWhenSave,o+="&new=true"),r._where&&(o+="&where="+encodeURIComponent((0,i["default"])(r._where)),delete r._where)),"get"===a.toLowerCase()){o.indexOf("?")===-1&&(o+="?");for(var s in r)"object"===f(r[s])&&(r[s]=(0,i["default"])(r[s])),o+="&"+s+"="+encodeURIComponent(r[s])}return o},k=function(e,t){return"number"!=typeof t&&(t=3600),v.setAsync("APIServerURL",e,1e3*t)},R=function(e){var t=new g;if(410===e.statusCode)k(e.response.api_server,e.response.ttl).then(function(){t.resolve(e.response.location)})["catch"](function(e){t.reject(e)});else{var n={code:-1,error:e.responseText};if(e.response&&e.response.code)n=e.response;else if(e.responseText)try{n=JSON.parse(e.responseText)}catch(a){}var r=new b(n.code,n.error);t.reject(r)}return t},T=function(e){A._config.APIServerURL="https://"+e;var t=y.findKey(P,function(e){return e===A._config.APIServerURL});t&&(A._config.region=t)},O=function(){var e="https://app-router.leancloud.cn/1/route?appId="+A.applicationId;return I("get",e).then(function(e){if(e.api_server)return T(e.api_server),k(e.api_server,e.ttl)},function(e){if(e.statusCode>=400&&e.statusCode<500)throw e})},L=function(){var e=arguments.length<=0||void 0===arguments[0]?"cn":arguments[0];_=new g;var t=_;return A._config.APIServerURL?void t.resolve():void("cn"===e?v.getAsync("APIServerURL").then(function(e){return e?void T(e):O()}).then(function(){t.resolve()})["catch"](function(e){t.reject(e)}):(A._config.region=e,A._config.APIServerURL=P[e],t.resolve()))},M=function(e,t,n,a){var r=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],i=arguments[5];if(!A.applicationId)throw new Error("You must specify your applicationId using AV.init()");if(!A.applicationKey&&!A.masterKey)throw new Error("You must specify a AppKey using AV.init()");return x(e),_?_.then(function(){var o=E(e,t,n,a,r);return S(i).then(function(e){return I(a,o,r,e).then(null,function(t){return R(t).then(function(t){return I(a,t,r,e)})})})}):g.error(new Error("Not initialized"))};e.exports={ajax:I,request:M,setServerUrlByRegion:L}}).call(t,n(35))},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=a(r),o=n(73),s=a(o),u=n(27),l=a(u),c=n(197),d=a(c),f=n(5),h=a(f);l["default"].use(d["default"]);var p=new d["default"],m=h["default"].serverURL+"/api/v1/users/password/forget",g=h["default"].serverURL+"/api/v1/users/login",v=h["default"].serverURL+"/api/v1/users/password/change",b="istaging_userinfo",A="leanistaging_token";t["default"]={user:{},login:function(e,t){var n=this;return new s["default"](function(a,r){e.$http.post(g,t).then(function(e){var t=n.setUserInfo(e.data);console.log(e.data),n.setUserLocalStorage(t),n.checkAuth(),a(e)},function(e){console.log("Failed to login"),r(e)})})},changePassword:function(e,t){var n=this;return new s["default"](function(a,r){e.$http.post(v,t).then(function(e){var t=n.setUserInfo(e.data);n.setUserLocalStorage(t),n.checkAuth(),a(e)},function(e){console.log("Failed to changePassword"),r(e)})})},loginWithFacebook:function(e){var t=this;return new s["default"](function(n,a){h["default"].authWithFacebook(e).then(function(e){var a=t.setUserInfo(e.data);t.setUserLocalStorage(a),t.checkAuth(),n(e)},function(e){console.log("Failed to login"),a(e)})})},logout:function(e){localStorage.removeItem(b),localStorage.removeItem(A),this.user.authenticated=!1,this.user.vrTourAuthenticated=!1,e&&p.go(e)},forgotPass:function(e,t){return new s["default"](function(n,a){e.$http.post(m,t).then(function(e){n(e)},function(e){a(e)})})},resetPass:function(e,t,n){var a=h["default"].serverURL+"/api/v1/users/password/"+t+"/reset";return new s["default"](function(t,r){e.$http.post(a,n).then(function(e){t(e)},function(e){r(e)})})},checkAuth:function(){var e=JSON.parse(localStorage.getItem(b));e&&e.apitoken?(this.user=e,this.user.authenticated=!0,l["default"].http.headers.common.istaging=this.user.apitoken):this.user.authenticated=!1},setUserLocalStorage:function(e){for(var t in this.user)""===e[t]||e[t]||(e[t]=this.user[t]),""===e[t]&&(e[t]="");localStorage.setItem(b,(0,i["default"])(e))},checkLeanAuth:function(e){var t=localStorage.getItem(A);t?(this.user.vrTourAuthenticated=!0,l["default"].http.headers.common.leanistaging=t):this.user.vrTourAuthenticated=!1,e&&e(this.user.vrTourAuthenticated)},setLeanLocalStorage:function(e){localStorage.setItem(A,e)},setUserInfo:function(e){var t={id:e.objectId||"",username:e.username||"",apitoken:e.sessionToken,name:e.name,role:e.userType||"",company:e.company||"",country:e.country||"",photo:e.profileUrl||"",phone:e.phone||""};return t}}},function(e,t,n){var a,r;n(322),a=n(248),r=n(383),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){"use strict";function a(e,t){var n=new Error(t);return n.code=e,n}var r=n(4);r.extend(a,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,X_DOMAIN_REQUEST:602}),e.exports=a},,function(e,t,n){(function(t){"use strict";var a=n(4),r=e.exports=function(e){this._resolved=!1,this._rejected=!1,this._resolvedCallbacks=[],this._rejectedCallbacks=[],this.doResolve(e)},i=function(e){return a.isNull(e)||a.isUndefined(e)},o=!1;"undefined"!=typeof t&&t.versions&&t.versions.node&&(o=!0),a.extend(r,{_isPromisesAPlusCompliant:!o,_debugError:!1,setPromisesAPlusCompliant:function(e){r._isPromisesAPlusCompliant=e},setDebugError:function(e){r._debugError=e},is:function(e){return e&&e.then&&a.isFunction(e.then)},as:function(){var e=new r;return arguments[0]&&a.isFunction(arguments[0].then)?arguments[0].then(function(t){e.resolve.call(e,t)},function(t){e.reject.call(e,t)}):e.resolve.apply(e,arguments),e},error:function(){var e=new r;return e.reject.apply(e,arguments),e},when:function(e){var t;t=e&&i(e.length)?arguments:e;var n=a.last(arguments);n=!!a.isBoolean(n)&&n;var o=t.length,s=!1,u=[],l=[];if(u.length=t.length,l.length=t.length,0===o)return n?r.as.call(this,u):r.as.apply(this,u);var c=new r,d=function(e){return o-=1,s&&!c._rejected&&n?void c.reject.call(c,l[e]):void(0===o&&(s&&!c._rejected?c.reject.call(c,l):n?c._rejected||c.resolve.call(c,u):c.resolve.apply(c,u)))};return a.each(t,function(e,t){r.is(e)?e.then(function(e){u[t]=e,d(t)},function(e){l[t]=e,s=!0,d(t)}):(u[t]=e,d(t))}),c},race:function(e){var t;t=e&&i(e.length)?arguments:e;var n=t.length,o=!1,s=[],u=[];if(s.length=u.length=t.length,0===n)return r.as.call(this);var l=new r,c=function(e){l._resolved||l._rejected||(o?l.reject.call(l,u[e]):l.resolve.call(l,s[e]))};return a.each(t,function(e,t){r.is(e)?e.then(function(e){s[t]=e,c(t)},function(e){u[t]=e,o=!0,c(t)}):(s[t]=e,c(t))}),l},_continueWhile:function(e,t){return e()?t().then(function(){return r._continueWhile(e,t)}):r.as()}}),r.all=function(e){return r.when(e,!0)},a.extend(r.prototype,{resolve:function(e){if(this._resolved||this._rejected)throw new Error("A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+".");this._resolved=!0,this._result=arguments;var t=arguments;a.each(this._resolvedCallbacks,function(e){e.apply(this,t)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},doResolve:function(e){if(e){var t=!1,n=this;try{e(function(e){t||(t=!0,n.resolve.call(n,e))},function(e){t||(t=!0,n.reject.call(n,e))})}catch(a){if(t)return;t=!0,n.reject.call(n,a)}}},reject:function(e){if(this._resolved||this._rejected)throw new r("A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+".");this._rejected=!0,this._error=e,a.each(this._rejectedCallbacks,function(t){t(e)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},then:function(e,n){var i=new r,o=function(){var t=arguments;if(e)if(r._isPromisesAPlusCompliant)try{t=[e.apply(this,t)]}catch(n){r._debugError&&n&&console.error("Error occurred in promise resolve callback.",n.stack||n),t=[r.error(n)]}else t=[e.apply(this,t)];1===t.length&&r.is(t[0])?t[0].then(function(){i.resolve.apply(i,arguments)},function(e){i.reject(e)}):i.resolve.apply(i,t)},s=function(e){var t=[];if(n){if(r._isPromisesAPlusCompliant)try{t=[n(e)]}catch(a){r._debugError&&a&&console.error("Error occurred in promise reject callback.",a.stack||a),t=[r.error(a)]}else t=[n(e)];1===t.length&&r.is(t[0])?t[0].then(function(){i.resolve.apply(i,arguments)},function(e){i.reject(e)}):r._isPromisesAPlusCompliant?i.resolve.apply(i,t):i.reject(t[0])}else i.reject(e)},u=function(e){e.call()};r._isPromisesAPlusCompliant&&("undefined"!=typeof window&&a.isFunction(window.setImmediate)?u=function(e){window.setImmediate(e)}:"undefined"!=typeof t&&t.nextTick?u=function(e){t.nextTick(e)}:"undefined"!=typeof setTimeout&&a.isFunction(setTimeout)&&(u=function(e){setTimeout(e,0)}));var l=this;return this._resolved?u(function(){o.apply(l,l._result)}):this._rejected?u(function(){s.apply(l,[l._error])}):(this._resolvedCallbacks.push(o),this._rejectedCallbacks.push(s)),i},"catch":function(e){return this.then(void 0,e)},always:function(e){return this.then(e,e)},done:function(e){return this.then(e)},fail:function(e){return this.then(null,e)},_thenRunCallbacks:function(e,t){var n;if(a.isFunction(e)){var i=e;n={success:function(e){i(e,null)},error:function(e){i(null,e)}}}else n=a.clone(e);return n=n||{},this.then(function(e){return n.success?n.success.apply(this,arguments):t&&t.trigger("sync",t,e,n),r.as.apply(r,arguments)},function(e){return n.error?a.isUndefined(t)?n.error(e):n.error(t,e):t&&t.trigger("error",t,e,n),r.error(e)})},_continueWith:function(e){return this.then(function(){return e(arguments,null)},function(t){return e(null,t)})}}),r.prototype["finally"]=r.prototype.always,r.prototype["try"]=r.prototype.done}).call(t,n(35))},,,,,,,,function(e,t,n){var a,r;n(326),r=n(387),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),i=a(r);t["default"]={route:{canActivate:function(){return i["default"].user.authenticated}}}},,,,,,function(e,t,n){var a,r;n(320),a=n(246),r=n(381),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},,function(e,t,n){function a(){}function r(e){if(!v(e))return e;var t=[];for(var n in e)i(t,n,e[n]);return t.join("&")}function i(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){i(e,t,n)});else if(v(n))for(var a in n)i(e,t+"["+a+"]",n[a]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function o(e){for(var t,n,a={},r=e.split("&"),i=0,o=r.length;i<o;++i)t=r[i],n=t.indexOf("="),n==-1?a[decodeURIComponent(t)]="":a[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return a}function s(e){var t,n,a,r,i=e.split(/\r?\n/),o={};i.pop();for(var s=0,u=i.length;s<u;++s)n=i[s],t=n.indexOf(":"),a=n.slice(0,t).toLowerCase(),r=A(n.slice(t+1)),o[a]=r;return o}function u(e){return/[\/+]json\b/.test(e)}function l(e){return e.split(/ *; */).shift()}function c(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),a=n.shift(),r=n.shift();return a&&r&&(e[a]=r),e},{})}function d(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this._setStatusProperties(this.xhr.status),this.header=this.headers=s(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function f(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new d(n)}catch(a){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=a,e.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,e.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(e)}n.emit("response",t);var r;try{(t.status<200||t.status>=300)&&(r=new Error(t.statusText||"Unsuccessful HTTP response"),r.original=e,r.response=t,r.status=t.status)}catch(a){r=a}r?n.callback(r,t):n.callback(null,t)})}function h(e,t){var n=b("DELETE",e);return t&&n.end(t),n}var p;"undefined"!=typeof window?p=window:"undefined"!=typeof self?p=self:(console.warn("Using browser-only version of superagent in non-browser environment"),p=this);var m=n(206),g=n(204),v=n(66),b=e.exports=n(205).bind(null,f);b.getXHR=function(){if(!(!p.XMLHttpRequest||p.location&&"file:"==p.location.protocol&&p.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only verison of superagent could not find XHR")};var A="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};b.serializeObject=r,b.parseString=o,b.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":r,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":o,"application/json":JSON.parse},d.prototype.get=function(e){return this.header[e.toLowerCase()]},d.prototype._setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=l(t);var n=c(t);for(var a in n)this[a]=n[a]},d.prototype._parseBody=function(e){var t=b.parse[this.type];return!t&&u(this.type)&&(t=b.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null},d.prototype._setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},d.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,a="cannot "+t+" "+n+" ("+this.status+")",r=new Error(a);return r.status=this.status,r.method=t,r.url=n,r},b.Response=d,m(f.prototype);for(var y in g)f.prototype[y]=g[y];f.prototype.type=function(e){return this.set("Content-Type",b.types[e]||e),this},f.prototype.responseType=function(e){return this._responseType=e,this},f.prototype.accept=function(e){return this.set("Accept",b.types[e]||e),this},f.prototype.auth=function(e,t,n){switch(n||(n={type:"basic"}),n.type){case"basic":var a=btoa(e+":"+t);this.set("Authorization","Basic "+a);break;case"auto":this.username=e,this.password=t}return this},f.prototype.query=function(e){return"string"!=typeof e&&(e=r(e)),e&&this._query.push(e),this},f.prototype.attach=function(e,t,n){return this._getFormData().append(e,t,n||t.name),this},f.prototype._getFormData=function(){return this._formData||(this._formData=new p.FormData),this._formData},f.prototype.callback=function(e,t){var n=this._callback;this.clearTimeout(),n(e,t)},f.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},f.prototype._timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},f.prototype._appendQueryString=function(){var e=this._query.join("&");e&&(this.url+=~this.url.indexOf("?")?"&"+e:"?"+e)},f.prototype.end=function(e){var t=this,n=this.xhr=b.getXHR(),r=this._timeout,i=this._formData||this._data;this._callback=e||a,n.onreadystatechange=function(){if(4==n.readyState){var e;try{e=n.status}catch(a){e=0}if(0==e){if(t.timedout)return t._timeoutError();if(t._aborted)return;return t.crossDomainError()}t.emit("end")}};var o=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),
e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(n.onprogress=o);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=o)}catch(s){}if(r&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},r)),this._appendQueryString(),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof i&&!this._isHost(i)){var l=this._header["content-type"],c=this._serializer||b.serialize[l?l.split(";")[0]:""];!c&&u(l)&&(c=b.serialize["application/json"]),c&&(i=c(i))}for(var d in this.header)null!=this.header[d]&&n.setRequestHeader(d,this.header[d]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof i?i:null),this},b.Request=f,b.get=function(e,t,n){var a=b("GET",e);return"function"==typeof t&&(n=t,t=null),t&&a.query(t),n&&a.end(n),a},b.head=function(e,t,n){var a=b("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&a.send(t),n&&a.end(n),a},b.options=function(e,t,n){var a=b("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&a.send(t),n&&a.end(n),a},b.del=h,b["delete"]=h,b.patch=function(e,t,n){var a=b("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&a.send(t),n&&a.end(n),a},b.post=function(e,t,n){var a=b("POST",e);return"function"==typeof t&&(n=t,t=null),t&&a.send(t),n&&a.end(n),a},b.put=function(e,t,n){var a=b("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&a.send(t),n&&a.end(n),a}},,,,,,,,,,function(e,t,n){var a,r;n(325),a=n(251),r=n(386),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){function a(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var a="color: "+this.color;e=[e[0],a,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,a),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}}function s(){var e;try{e=t.storage.debug}catch(n){}return e}function u(){try{return window.localStorage}catch(e){}}t=e.exports=n(198),t.log=i,t.formatArgs=r,t.save=o,t.load=s,t.useColors=a,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())},function(e,t){(function(t){"use strict";e.exports=t.AV||{}}).call(t,function(){return this}())},,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,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"},function(e,t,n){var a,r;n(317),a=n(236),r=n(371),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},,,function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t){function n(e){return null!==e&&"object"==typeof e}e.exports=n},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(17),i=a(r),o=n(69),s=n(48),u=t.removeAsync=o.removeItemAsync.bind(o),l=function(e,t){try{e=JSON.parse(e)}catch(n){return null}if(e){var a=e.expiredAt&&e.expiredAt<Date.now();return a?u(t).then(function(){return null}):e.value}return null};t.getAsync=function(e){return e=s.applicationId+"/"+e,o.getItemAsync(e).then(function(t){return l(t,e)})},t.setAsync=function(e,t,n){var a={value:t};return"number"==typeof n&&(a.expiredAt=Date.now()+n),o.setItemAsync(s.applicationId+"/"+e,(0,i["default"])(a))}},function(e,t,n){"use strict";var a=n(4),r=n(18),i=n(209),o=["getItem","setItem","removeItem","clear"];i.async?a(o).each(function(e){"function"!=typeof i[e]&&(i[e]=function(){var t=new Error("Synchronous API ["+e+"] is not available in this runtime.");throw t.code="SYNC_API_NOT_AVAILABLE",t})}):a(o).each(function(e){"function"==typeof i[e]&&(i[e+"Async"]=function(){return r.as(i[e].apply(i,arguments))})}),e.exports=i},function(e,t,n){(function(t){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(72),i=a(r),o=n(38),s=a(o),u=n(49),l=a(u),c=n(37),d=a(c),f="function"==typeof d["default"]&&"symbol"===(0,l["default"])(s["default"])?function(e){return"undefined"==typeof e?"undefined":(0,l["default"])(e)}:function(e){return e&&"function"==typeof d["default"]&&e.constructor===d["default"]?"symbol":"undefined"==typeof e?"undefined":(0,l["default"])(e)},h=n(4),p=n(12),m=function(e){return h.isNull(e)||h.isUndefined(e)},g=function(e){return h.isArray(e)?e:void 0===e||null===e?[]:[e]},v=function(e){var n=e._config;h.extend(n,{region:"cn",APIServerURL:n.APIServerURL||"",isNode:!1,disableCurrentUser:!1,userAgent:null,applicationProduction:null}),"undefined"!=typeof t&&t.versions&&t.versions.node&&(n.isNode=!0);var a=function(){},r=function(e,t,n){var r;return r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){e.apply(this,arguments)},h.extend(r,e),a.prototype=e.prototype,r.prototype=new a,t&&h.extend(r.prototype,t),n&&h.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r},o=function(t,n,a){e.applicationId&&t!==e.applicationId&&n!==e.applicationKey&&a!==e.masterKey&&console.warn("LeanCloud SDK is already initialized, please do not reinitialize it."),e.applicationId=t,e.applicationKey=n,e.masterKey=a,e._useMasterKey=!1};e.init=function(){var e=function(){console.warn("MasterKey should not be used in the browser. The permissions of MasterKey can be across all the server permissions, including the setting of ACL .")};switch(arguments.length){case 1:var t=arguments.length<=0?void 0:arguments[0];if("object"!==("undefined"==typeof t?"undefined":f(t)))throw new Error("AV.init(): Parameter is not correct.");!n.isNode&&t.masterKey&&e(),o(t.appId,t.appKey,t.masterKey),p.setServerUrlByRegion(t.region),n.disableCurrentUser=t.disableCurrentUser;break;case 2:case 3:console.warn("Please use AV.init() to replace AV.initialize(), AV.init() need an Object param, like { appId: 'YOUR_APP_ID', appKey: 'YOUR_APP_KEY' } . Docs: https://leancloud.cn/docs/sdk_setup-js.html"),n.isNode||3!==arguments.length||e(),o.apply(void 0,arguments),p.setServerUrlByRegion("cn")}},n.isNode&&(e.Cloud=e.Cloud||{},e.Cloud.useMasterKey=function(){e._useMasterKey=!0}),e.initialize=e.init,e.setProduction=function(e){m(e)?n.applicationProduction=null:n.applicationProduction=e?1:0},e.useAVCloudCN=function(){p.setServerUrlByRegion("cn"),console.warn("Do not use AV.useAVCloudCN. Please use AV.init(), you can set the region of server.")},e.useAVCloudUS=function(){p.setServerUrlByRegion("us"),console.warn("Do not use AV.useAVCloudUS. Please use AV.init(), you can set the region of server.")},e._getAVPath=function(t){if(!e.applicationId)throw"You need to call AV.initialize before using AV.";if(t||(t=""),!h.isString(t))throw"Tried to get a localStorage path that wasn't a String.";return"/"===t[0]&&(t=t.substring(1)),"AV/"+e.applicationId+"/"+t},e._installationId=null,e._getInstallationId=function(){if(e._installationId)return e.Promise.as(e._installationId);var t=e._getAVPath("installationId");return e.localStorage.getItemAsync(t).then(function(n){if(e._installationId=n,e._installationId)return n;var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e._installationId=a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a(),e.localStorage.setItemAsync(t,e._installationId)})},e._parseDate=function(e){var t=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),n=t.exec(e);if(!n)return null;var a=n[1]||0,r=(n[2]||1)-1,i=n[3]||0,o=n[4]||0,s=n[5]||0,u=n[6]||0,l=n[8]||0;return new Date(Date.UTC(a,r,i,o,s,u,l))},e._ajax=function(){console.warn("AV._ajax is deprecated, and will be removed in next release."),p.ajax.apply(p,arguments)},e._request=function(){console.warn("AV._request is deprecated, and will be removed in next release."),p.request.apply(p,arguments)},e._extend=function(e,t){var n=r(this,e,t);return n.extend=this.extend,n},e._getValue=function(e,t){return e&&e[t]?h.isFunction(e[t])?e[t]():e[t]:null},e._encode=function(t,n,a){if(t instanceof e.Object){if(a)throw"AV.Objects not allowed here";if(!n||h.include(n,t)||!t._hasData)return t._toPointer();if(!t.dirty())return n=n.concat(t),e._encode(t._toFullJSON(n),n,a);throw"Tried to save an object with a pointer to a new, unsaved object."}if(t instanceof e.ACL)return t.toJSON();if(h.isDate(t))return{__type:"Date",iso:t.toJSON()};if(t instanceof e.GeoPoint)return t.toJSON();if(h.isArray(t))return h.map(t,function(t){return e._encode(t,n,a)});if(h.isRegExp(t))return t.source;if(t instanceof e.Relation)return t.toJSON();if(t instanceof e.Op)return t.toJSON();if(t instanceof e.File){if(!t.url()&&!t.id)throw"Tried to save an object containing an unsaved file.";return{__type:"File",id:t.id,name:t.name(),url:t.url()}}if(h.isObject(t)){var r={};return e._objectEach(t,function(t,i){r[i]=e._encode(t,n,a)}),r}return t},e._decode=function(t,n){if(!h.isObject(n))return n;if(h.isArray(n))return e._arrayEach(n,function(t,a){n[a]=e._decode(a,t)}),n;if(n instanceof e.Object)return n;if(n instanceof e.File)return n;if(n instanceof e.Op)return n;if(n.__op)return e.Op._decode(n);var a;if("Pointer"===n.__type){a=n.className;var r=e.Object._create(a);return(0,i["default"])(n).length>3?(delete n.__type,delete n.className,r._finishFetch(n,!0)):r._finishFetch({objectId:n.objectId},!1),r}if("Object"===n.__type){a=n.className,delete n.__type,delete n.className;var o=e.Object._create(a);return o._finishFetch(n,!0),o}if("Date"===n.__type)return e._parseDate(n.iso);if("GeoPoint"===n.__type)return new e.GeoPoint({latitude:n.latitude,longitude:n.longitude});if("ACL"===t)return n instanceof e.ACL?n:new e.ACL(n);if("Relation"===n.__type){var s=new e.Relation(null,t);return s.targetClassName=n.className,s}if("File"===n.__type){var u=new e.File(n.name);return u.attributes.metaData=n.metaData||{},u.attributes.url=n.url,u.id=n.objectId,u}return e._objectEach(n,function(t,a){n[a]=e._decode(a,t)}),n},e._encodeObjectOrArray=function(t){var n=function(t){return t&&t._toFullJSON&&(t=t._toFullJSON([])),h.mapObject(t,function(t){return e._encode(t,[])})};return h.isArray(t)?t.map(function(e){return n(e)}):n(t)},e._arrayEach=h.each,e._traverse=function(t,n,a){if(t instanceof e.Object){if(a=a||[],h.indexOf(a,t)>=0)return;return a.push(t),e._traverse(t.attributes,n,a),n(t)}return t instanceof e.Relation||t instanceof e.File?n(t):h.isArray(t)?(h.each(t,function(r,i){var o=e._traverse(r,n,a);o&&(t[i]=o)}),n(t)):h.isObject(t)?(e._each(t,function(r,i){var o=e._traverse(r,n,a);o&&(t[i]=o)}),n(t)):n(t)},e._objectEach=e._each=function(e,t){h.isObject(e)?h.each(h.keys(e),function(n){t(e[n],n)}):h.each(e,t)}};e.exports={init:v,isNullOrUndefined:m,ensureArray:g}}).call(t,n(35))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=a(r),o=n(27),s=a(o),u=n(446),l=a(u),c=n(7),d=a(c);s["default"].use(l["default"]);var f={uploadURLs:{},buildings:[],building:{},currentBuildingId:"",shareCodes:[],shareCode:{},codeBuildings:[],panoramas:[],panorama:{},selectedPanorama:{},currentPanorama:{},targetPanorama:{},selectedMarker:{},alertParams:{},isLoading:!1,currentPanoramaId:"",activeModal:"",activeAlert:"",activeLoading:"",sort:{key:"",order:-1},leanBuildingInfo:{address:""},leanAuthInfo:{username:"",password:""},authInfo:{email:"",password:"",confirmPassword:""},signupInfo:{name:"",email:"",phone:"",company:"",country:"",role:"",password:"",confirmPassword:""},changePasswordInfo:{oldPassword:"",newPassword:"",confirmNewPassword:""},user:{role:"",username:"",name:"",company:"",phone:"",photo:"",VRAuthenticated:!1,oldPassword:"",newPassword:"",confirmNewPassword:""},hasFieldChanged:!1,firebaseComments:[],firebaseFiles:[],currentCommentId:"",areBuildingsFetched:!1,areShareCodesFetched:!1,isNewBuilding:!1,isNewPanorama:!1,isUpdatedPanorama:!1,isLineGridToggled:!1,isOverlayActive:!1,cameraRotation:{x:0,y:0,z:0},defaultPhoto:n(359),profilePhoto:"",sortList:[],agents:[{name:"Agent 1",role:"",company:"Company 1",country:"Taiwan",thumbnail:"",phone:"1234"},{name:"Agent 2",role:"",company:"Company 1",country:"Taiwan",thumbnail:"",phone:"1234"}],editorState:0,sceneEventCount:0,isEditorSceneReady:!0,hasAddedMarker:!1,hasClickedAddMarker:!1,cameraContainerEl:null,cameraElRotation:null,cameraElOrigRotation:null,cameraContainerElRotation:null,isImageLoading:!1,isUploadingMarker:!1,savedMarkerRotation:0,sortedPanoramas:[],hasSortTriggered:!1},h={FETCH_SHARE_CODE_BY_ID:function(e,t){var n=e.shareCodes,a=i["default"].find(n,{id:t});e.shareCode=a},FETCH_BUILDINGS_BY_CODE_ID:function(e,t){e.codeBuildings=t},SET_BUILDINGS:function(e,t){e.buildings=t},UPDATE_BUILDINGS_STATE:function(e,t){var n=e.buildings.map(function(e){return e.id===t.id&&(e=t),e});e.buildings=n},SET_BUILDING_BY_ID:function(e,t){t.isDirty=!1,e.building=t},CLEAR_BUILDING:function(e){e.building=null},SET_BUILDINGS_CONCAT:function(e,t){e.buildings=e.buildings.concat(t)},UPDATE_BUILDING:function(e){console.log("Building updated")},REMOVE_BUILDING_FROM_STATE:function(e,t){e.buildings=e.buildings.filter(function(e){return e.id!==t})},REMOVE_PANORAMA:function(e,t){e.panoramas=e.panoramas.filter(function(e){return e.id!==t}),e.building.panoramas=e.panoramas},SET_CURRENT_BUILDING_ID:function(e,t){e.currentBuildingId=t},FETCH_PANORAMA_BY_ID:function(e,t){var n=e.panoramas,a=i["default"].find(n,{id:""+t});e.panorama=a},CLEAR_PANORAMAS:function(e){e.panoramas=[]},CLEAR_PANORAMA:function(e){e.panorama=null},SET_PANORAMAS:function(e,t){e.panoramas=t},SET_SHARECODES:function(e,t){e.shareCodes=t},SET_SHARECODES_CONCAT:function(e,t){e.shareCodes=e.shareCodes.concat(t)},SET_CURRENT_PANORAMA_ID:function(e,t){e.currentPanoramaId=t},SET_ACTIVE_MODAL:function(e,t){e.activeModal=t},CLEAR_ACTIVE_MODAL:function(e,t){e.activeModal=""},SET_ACTIVE_LOADING:function(e,t){e.activeLoading=t},CLEAR_ACTIVE_LOADING:function(e){e.activeLoading=""},CHECK_BUILDINGS:function(e){e.areBuildingsFetched=!0},CHECK_SHARECODES:function(e){e.areShareCodesFetched=!0},SET_MARKERS:function(e,t,n,a){t.x=n,t.y=a,t.isDirty=!0},SET_ROTATION:function(e,t,n){t.rotation=n,t.isDirty=!0},SET_SORT:function(e,t,n){e.sort.key===t?e.sort.order=n*-1:e.sort.order=-1,e.sort.key=t},SET_START_SORT:function(e,t,n){console.log("OR:",n),e.sort.order=n||-1,e.sort.key=t},SET_FIELD_CHANGED:function(e){e.hasFieldChanged=!0},UNSET_FIELD_CHANGED:function(e){e.hasFieldChanged=!1},SET_USER_PHOTO:function(e,t){e.user.photo=t},SET_USER_INFO:function(e,t){e.user=t},SET_USER_LEAN_AUTH_STATE:function(e,t){e.user.VRAuthenticated=t},SET_CURRENT_COMMENT_ID:function(e,t){e.currentCommentId=t},FETCH_FIREBASE_COMMENTS:function(e,t){e.firebaseComments=t},DO_IMAGE_UPLOAD:function(e,t){e.uploadURLs=t},ADD_BUILDING_TO_STATE:function(e,t){e.buildings.push(t),e.building=t},ADD_PANORAMA_TO_STATE:function(e,t){e.panoramas.push(t),e.building.panoramas.push(t),e.panorama=t},SET_PANORAMA_PHOTO_STATE:function(e,t,n){var a=e.panoramas.map(function(t){return e.panorama.id===t.id&&(t.thumbnail=n),t});e.panoramas=a,e.panorama.web=t,e.panorama.thumbnail=n},UPDATE_PANORAMA_STATE:function(e,t){var n=e.panoramas.filter(function(e){return e.id!==t.id});e.panoramas=n,e.panoramas.push(t),e.panorama=t},SET_IS_NEW_BUILDING:function(e,t){e.isNewBuilding=t},SET_IS_NEW_PANORAMA:function(e,t){e.isNewPanorama=t},SET_IS_UPDATED_PANORAMA:function(e,t){e.isUpdatedPanorama=t},SET_SCENE_EVENT_COUNT:function(e,t){"undefined"==typeof t?e.sceneEventCount=e.sceneEventCount+1:e.sceneEventCount=t},GET_CAMERA_ROTATION:function(e,t,n){e.cameraRotation={x:t.x+n.x,y:t.y+n.y,z:t.z+n.z}},SET_PROFILE_PHOTO:function(e){e.user&&e.user.photo?e.profilePhoto=e.user.photo:e.profilePhoto=e.defaultPhoto},CLEAR_CHANGE_PASSWORD:function(e){e.changePasswordInfo.oldPassword="",e.changePasswordInfo.newPassword="",e.changePasswordInfo.confirmNewPassword=""},SET_IS_LINE_GRID_TOGGLED:function(e){e.isLineGridToggled=!e.isLineGridToggled},SET_SELECTED_PANORAMA:function(e,t){e.selectedPanorama=t},SET_CURRENT_PANORAMA:function(e,t){e.currentPanorama=t},SET_TARGET_PANORAMA:function(e,t){e.targetPanorama=t},SET_SELECTED_MARKER:function(e,t){e.selectedMarker=t},ADD_APP_MARKER:function(e,t){function n(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var a={},r=null;switch(r=e.cameraRotation.y,console.log("ROTATION:",r),t){case"point":a={initId:n(),objectId:"none",forward_x:0,forward_y:0,forward_z:0,currPanoId:"",nextPanoId:"",rotation:0,text:"",type:"point",isDeleted:!1,x:d["default"].genAppMarkerPostion(r).x,z:d["default"].genAppMarkerPostion(r).z,y:d["default"].genAppMarkerPostion(e.cameraRotation.x).y};break;case"tag":a={initId:n(),objectId:"none",currPanoId:"",title:"",description:"",price:"",photo:"",type:"tag",action:0,url:"",isDeleted:!1,x:d["default"].genAppMarkerPostion(e.cameraRotation.y).x,z:d["default"].genAppMarkerPostion(e.cameraRotation.y).z,y:d["default"].genAppMarkerPostion(e.cameraRotation.x).y};break;case"memo":a={initId:n(),objectId:"none",description:"",currPanoId:"",type:"memo",isDeleted:!1,x:d["default"].genAppMarkerPostion(e.cameraRotation.y).x,z:d["default"].genAppMarkerPostion(e.cameraRotation.y).z,y:d["default"].genAppMarkerPostion(e.cameraRotation.x).y}}var i=e.panoramas.filter(function(t){return t.id===e.selectedPanorama.id});i[0].markers.push(a)},DELETE_APP_MARKER:function(e){var t=e.selectedPanorama.markers.filter(function(t){return t.initId===e.selectedMarker.initId});if("none"===t[0].objectId){var n=e.selectedPanorama.markers.filter(function(e){return e.initId!==t[0].initId});e.selectedPanorama.markers=n}else t[0].isDeleted=!0},UPDATE_ALL_APP_MARKERS:function(e,t){e.selectedPanorama.markers=t},UPDATE_APP_MARKER:function(e,t,n,a,r){t.x=n,t.y=a,t.z=r,t.isUnity=!1},UPDATE_APP_MARKER_ROTATION:function(e,t,n){t.forward_y=n.y},UPDATE_APP_MARKER_NEXT_PANO:function(e,t,n){t.nextPanoId=n},SET_EDITOR_STATE:function(e,t){e.editorState=t},SET_HAS_ADDED_MARKER:function(e,t){e.hasAddedMarker=t},SET_HAS_CLICKED_ADD_MARKER:function(e,t){e.hasClickedAddMarker=t},GET_CAMERA_CONTAINER_EL:function(e,t){e.cameraContainerEl=t},SET_CAMERA_EL_ROTATION:function(e,t,n){e.cameraContainerEl.setAttribute("rotation",n)},SET_CAMERA_EL_ORIG_ROTATION:function(e){e.cameraElOrigRotation={x:0,y:e.cameraElRotation.y+e.cameraContainerElRotation.y,z:0}},GET_CAMERA_EL_ROTATION:function(e,t){e.cameraElRotation=t.getAttribute("rotation")},GET_CAMERA_CONTAINER_EL_ROTATION:function(e,t){e.cameraContainerElRotation=t.getAttribute("rotation")},SET_IS_EDITOR_SCENE_READY:function(e,t){e.isEditorSceneReady=t},SET_EDITOR_LOADING:function(e,t){e.isLoading=t},SET_EDITOR_ALERT:function(e,t){e.alertParams=t},SET_IS_IMAGE_LOADING:function(e,t){e.isImageLoading=t},SET_IS_UPLOADING_MARKER:function(e,t){e.isUploadingMarker=t},SET_TAG_PHOTO:function(e,t){var n=e.selectedPanorama.markers.filter(function(t){return t.initId===e.selectedMarker.initId});n[0].photo=t},SET_SORTED_PANORAMAS:function(e,t){e.sortedPanoramas=t.slice()},ASSIGN_INDEX_TO_PANORAMAS:function(e,t,n,a){var r=0,i=t[n];t.splice(n,1),t.splice(a,0,i),t.forEach(function(e){console.log(e.name),e.index=r++})},SET_HAS_SORT_TRIGGERED:function(e,t){e.hasSortTriggered=t},RESET_ALL:function(e){e.shareCodes=[],e.buildings=[],e.profilePhoto="",e.user={}}};t["default"]=new l["default"].Store({state:f,mutations:h})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var a,r;n(324),a=n(250),r=n(385),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(254),r=n(390),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(332),a=n(260),r=n(396),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(338),a=n(266),r=n(402),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},,function(e,t,n){function a(){return t.colors[c++%t.colors.length]}function r(e){function n(){}function r(){var e=r,n=+new Date,i=n-(l||n);e.diff=i,e.prev=l,e.curr=n,l=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=a());var o=Array.prototype.slice.call(arguments);o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var s=0;o[0]=o[0].replace(/%([a-z%])/g,function(n,a){if("%%"===n)return n;s++;var r=t.formatters[a];if("function"==typeof r){var i=o[s];n=r.call(e,i),o.splice(s,1),s--}return n}),"function"==typeof t.formatArgs&&(o=t.formatArgs.apply(e,o));var u=r.log||t.log||console.log.bind(console);u.apply(e,o)}n.enabled=!1,r.enabled=!0;var i=t.enabled(e)?r:n;return i.namespace=e,i}function i(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),a=n.length,r=0;r<a;r++)n[r]&&(e=n[r].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function o(){t.enable("")}function s(e){var n,a;for(n=0,a=t.skips.length;n<a;n++)if(t.skips[n].test(e))return!1;for(n=0,a=t.names.length;n<a;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r,t.coerce=u,t.disable=o,t.enable=i,t.enabled=s,t.humanize=n(199),t.names=[],t.skips=[],t.formatters={};var l,c=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),a=(t[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function a(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=s?Math.round(e/s)+"m":e>=o?Math.round(e/o)+"s":e+"ms"}function r(e){return i(e,l,"day")||i(e,u,"hour")||i(e,s,"minute")||i(e,o,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var o=1e3,s=60*o,u=60*s,l=24*u,c=365.25*l;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?r(e):a(e)}},function(e,t,n){!function(t){var n={},a={};n.length=0,n.getItem=function(e){return a[e]||null;
},n.setItem=function(e,t){"undefined"==typeof t?n.removeItem(e):(a.hasOwnProperty(e)||n.length++,a[e]=""+t)},n.removeItem=function(e){a.hasOwnProperty(e)&&(delete a[e],n.length--)},n.key=function(e){return Object.keys(a)[e]||null},n.clear=function(){a={},n.length=0},e.exports=n}(this)},function(e,t,n){!function(){var t=n(202),a=n(65).utf8,r=n(203),i=n(65).bin,o=function(e,n){e.constructor==String?e=n&&"binary"===n.encoding?i.stringToBytes(e):a.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var s=t.bytesToWords(e),u=8*e.length,l=1732584193,c=-271733879,d=-1732584194,f=271733878,h=0;h<s.length;h++)s[h]=16711935&(s[h]<<8|s[h]>>>24)|4278255360&(s[h]<<24|s[h]>>>8);s[u>>>5]|=128<<u%32,s[(u+64>>>9<<4)+14]=u;for(var p=o._ff,m=o._gg,g=o._hh,v=o._ii,h=0;h<s.length;h+=16){var b=l,A=c,y=d,_=f;l=p(l,c,d,f,s[h+0],7,-680876936),f=p(f,l,c,d,s[h+1],12,-389564586),d=p(d,f,l,c,s[h+2],17,606105819),c=p(c,d,f,l,s[h+3],22,-1044525330),l=p(l,c,d,f,s[h+4],7,-176418897),f=p(f,l,c,d,s[h+5],12,1200080426),d=p(d,f,l,c,s[h+6],17,-1473231341),c=p(c,d,f,l,s[h+7],22,-45705983),l=p(l,c,d,f,s[h+8],7,1770035416),f=p(f,l,c,d,s[h+9],12,-1958414417),d=p(d,f,l,c,s[h+10],17,-42063),c=p(c,d,f,l,s[h+11],22,-1990404162),l=p(l,c,d,f,s[h+12],7,1804603682),f=p(f,l,c,d,s[h+13],12,-40341101),d=p(d,f,l,c,s[h+14],17,-1502002290),c=p(c,d,f,l,s[h+15],22,1236535329),l=m(l,c,d,f,s[h+1],5,-165796510),f=m(f,l,c,d,s[h+6],9,-1069501632),d=m(d,f,l,c,s[h+11],14,643717713),c=m(c,d,f,l,s[h+0],20,-373897302),l=m(l,c,d,f,s[h+5],5,-701558691),f=m(f,l,c,d,s[h+10],9,38016083),d=m(d,f,l,c,s[h+15],14,-660478335),c=m(c,d,f,l,s[h+4],20,-405537848),l=m(l,c,d,f,s[h+9],5,568446438),f=m(f,l,c,d,s[h+14],9,-1019803690),d=m(d,f,l,c,s[h+3],14,-187363961),c=m(c,d,f,l,s[h+8],20,1163531501),l=m(l,c,d,f,s[h+13],5,-1444681467),f=m(f,l,c,d,s[h+2],9,-51403784),d=m(d,f,l,c,s[h+7],14,1735328473),c=m(c,d,f,l,s[h+12],20,-1926607734),l=g(l,c,d,f,s[h+5],4,-378558),f=g(f,l,c,d,s[h+8],11,-2022574463),d=g(d,f,l,c,s[h+11],16,1839030562),c=g(c,d,f,l,s[h+14],23,-35309556),l=g(l,c,d,f,s[h+1],4,-1530992060),f=g(f,l,c,d,s[h+4],11,1272893353),d=g(d,f,l,c,s[h+7],16,-155497632),c=g(c,d,f,l,s[h+10],23,-1094730640),l=g(l,c,d,f,s[h+13],4,681279174),f=g(f,l,c,d,s[h+0],11,-358537222),d=g(d,f,l,c,s[h+3],16,-722521979),c=g(c,d,f,l,s[h+6],23,76029189),l=g(l,c,d,f,s[h+9],4,-640364487),f=g(f,l,c,d,s[h+12],11,-421815835),d=g(d,f,l,c,s[h+15],16,530742520),c=g(c,d,f,l,s[h+2],23,-995338651),l=v(l,c,d,f,s[h+0],6,-198630844),f=v(f,l,c,d,s[h+7],10,1126891415),d=v(d,f,l,c,s[h+14],15,-1416354905),c=v(c,d,f,l,s[h+5],21,-57434055),l=v(l,c,d,f,s[h+12],6,1700485571),f=v(f,l,c,d,s[h+3],10,-1894986606),d=v(d,f,l,c,s[h+10],15,-1051523),c=v(c,d,f,l,s[h+1],21,-2054922799),l=v(l,c,d,f,s[h+8],6,1873313359),f=v(f,l,c,d,s[h+15],10,-30611744),d=v(d,f,l,c,s[h+6],15,-1560198380),c=v(c,d,f,l,s[h+13],21,1309151649),l=v(l,c,d,f,s[h+4],6,-145523070),f=v(f,l,c,d,s[h+11],10,-1120210379),d=v(d,f,l,c,s[h+2],15,718787259),c=v(c,d,f,l,s[h+9],21,-343485551),l=l+b>>>0,c=c+A>>>0,d=d+y>>>0,f=f+_>>>0}return t.endian([l,c,d,f])};o._ff=function(e,t,n,a,r,i,o){var s=e+(t&n|~t&a)+(r>>>0)+o;return(s<<i|s>>>32-i)+t},o._gg=function(e,t,n,a,r,i,o){var s=e+(t&a|n&~a)+(r>>>0)+o;return(s<<i|s>>>32-i)+t},o._hh=function(e,t,n,a,r,i,o){var s=e+(t^n^a)+(r>>>0)+o;return(s<<i|s>>>32-i)+t},o._ii=function(e,t,n,a,r,i,o){var s=e+(n^(t|~a))+(r>>>0)+o;return(s<<i|s>>>32-i)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var a=t.wordsToBytes(o(e,n));return n&&n.asBytes?a:n&&n.asString?i.bytesToString(a):t.bytesToHex(a)}}()},function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,a=0;n<e.length;n++,a+=8)t[a>>>5]|=e[n]<<24-a%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],a=0;a<e.length;a+=3)for(var r=e[a]<<16|e[a+1]<<8|e[a+2],i=0;i<4;i++)8*a+6*i<=8*e.length?n.push(t.charAt(r>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],a=0,r=0;a<e.length;r=++a%4)0!=r&&n.push((t.indexOf(e.charAt(a-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(a))>>>6-2*r);return n}};e.exports=n}()},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function a(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
e.exports=function(e){return null!=e&&(n(e)||a(e)||!!e._isBuffer)}},function(e,t,n){var a=n(66);t.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},t.parse=function(e){return this._parser=e,this},t.serialize=function(e){return this._serializer=e,this},t.timeout=function(e){return this._timeout=e,this},t.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,a){n?t(n):e(a)})})}return this._fullfilledPromise.then(e,t)},t.use=function(e){return e(this),this},t.get=function(e){return this._header[e.toLowerCase()]},t.getHeader=t.get,t.set=function(e,t){if(a(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},t.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},t.field=function(e,t){return this._getFormData().append(e,t),this},t.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},t.withCredentials=function(){return this._withCredentials=!0,this},t.redirects=function(e){return this._maxRedirects=e,this},t.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},t._isHost=function(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}},t.send=function(e){var t=a(e),n=this._header["content-type"];if(t&&a(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)}},function(e,t){function n(e,t,n){return"function"==typeof n?new e("GET",t).end(n):2==arguments.length?new e("GET",t):new e(t,n)}e.exports=n},function(e,t,n){function a(e){if(e)return r(e)}function r(e){for(var t in a.prototype)e[t]=a.prototype[t];return e}e.exports=a,a.prototype.on=a.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},a.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=a.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a,r=0;r<n.length;r++)if(a=n[r],a===t||a.fn===t){n.splice(r,1);break}return this},a.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var a=0,r=n.length;a<r;++a)n[a].apply(this,t)}return this},a.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},a.prototype.hasListeners=function(e){return!!this.listeners(e).length}},,function(e,t,n){"use strict";var a=n(4);e.exports=function(e){var t="*";e.ACL=function(t){var n=this;if(n.permissionsById={},a.isObject(t))if(t instanceof e.User)n.setReadAccess(t,!0),n.setWriteAccess(t,!0);else{if(a.isFunction(t))throw"AV.ACL() called with a function.  Did you forget ()?";e._objectEach(t,function(t,r){if(!a.isString(r))throw"Tried to create an ACL with an invalid userId.";n.permissionsById[r]={},e._objectEach(t,function(e,t){if("read"!==t&&"write"!==t)throw"Tried to create an ACL with an invalid permission type.";if(!a.isBoolean(e))throw"Tried to create an ACL with an invalid permission value.";n.permissionsById[r][t]=e})})}},e.ACL.prototype.toJSON=function(){return a.clone(this.permissionsById)},e.ACL.prototype._setAccess=function(t,n,r){if(n instanceof e.User?n=n.id:n instanceof e.Role&&(n="role:"+n.getName()),!a.isString(n))throw"userId must be a string.";if(!a.isBoolean(r))throw"allowed must be either true or false.";var i=this.permissionsById[n];if(!i){if(!r)return;i={},this.permissionsById[n]=i}r?this.permissionsById[n][t]=!0:(delete i[t],a.isEmpty(i)&&delete i[n])},e.ACL.prototype._getAccess=function(t,n){n instanceof e.User?n=n.id:n instanceof e.Role&&(n="role:"+n.getName());var a=this.permissionsById[n];return!!a&&!!a[t]},e.ACL.prototype.setReadAccess=function(e,t){this._setAccess("read",e,t)},e.ACL.prototype.getReadAccess=function(e){return this._getAccess("read",e)},e.ACL.prototype.setWriteAccess=function(e,t){this._setAccess("write",e,t)},e.ACL.prototype.getWriteAccess=function(e){return this._getAccess("write",e)},e.ACL.prototype.setPublicReadAccess=function(e){this.setReadAccess(t,e)},e.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(t)},e.ACL.prototype.setPublicWriteAccess=function(e){this.setWriteAccess(t,e)},e.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(t)},e.ACL.prototype.getRoleReadAccess=function(t){if(t instanceof e.Role&&(t=t.getName()),a.isString(t))return this.getReadAccess("role:"+t);throw"role must be a AV.Role or a String"},e.ACL.prototype.getRoleWriteAccess=function(t){if(t instanceof e.Role&&(t=t.getName()),a.isString(t))return this.getWriteAccess("role:"+t);throw"role must be a AV.Role or a String"},e.ACL.prototype.setRoleReadAccess=function(t,n){if(t instanceof e.Role&&(t=t.getName()),a.isString(t))return void this.setReadAccess("role:"+t,n);throw"role must be a AV.Role or a String"},e.ACL.prototype.setRoleWriteAccess=function(t,n){if(t instanceof e.Role&&(t=t.getName()),a.isString(t))return void this.setWriteAccess("role:"+t,n);throw"role must be a AV.Role or a String"}}},function(e,t,n){(function(t){"use strict";var a=n(4),r=n(18),i={},o=["getItem","setItem","removeItem","clear"];if(t.localStorage){var s=t.localStorage;try{var u="__storejs__";if(s.setItem(u,u),s.getItem(u)!=u)throw new Error;s.removeItem(u)}catch(l){s=n(200)}a(o).each(function(e){i[e]=function(){return t.localStorage[e].apply(t.localStorage,arguments)}}),i.async=!1}else{var c=n(448).AsyncStorage;a(o).each(function(e){i[e+"Async"]=function(){return r.as(c[e].apply(c,arguments))}}),i.async=!0}e.exports=i}).call(t,function(){return this}())},function(e,t){"use strict";var n=function(e,t){var n;n=e.indexOf("base64")<0?atob(e):e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var a=t||e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return new Blob([r],{type:a})};e.exports=n},function(e,t,n){"use strict";var a=n(4),r=n(12).request;e.exports=function(e){e.Cloud=e.Cloud||{},a.extend(e.Cloud,{run:function(t,n,a){var i=r("functions",t,null,"POST",e._encode(n,null,!0),a&&a.sessionToken);return i.then(function(t){return e._decode(null,t).result})._thenRunCallbacks(a)},rpc:function(t,n,i){return a.isArray(n)?e.Promise.error(new Error("Can't pass Array as the param of rpc function in JavaScript SDK."))._thenRunCallbacks(i):r("call",t,null,"POST",e._encodeObjectOrArray(n),i&&i.sessionToken).then(function(t){return e._decode("",t).result})._thenRunCallbacks(i)},getServerDate:function(t){var n=r("date",null,null,"GET");return n.then(function(t){return e._decode(null,t)})._thenRunCallbacks(t)},requestSmsCode:function(e,t){if(a.isString(e)&&(e={mobilePhoneNumber:e}),!e.mobilePhoneNumber)throw"Missing mobilePhoneNumber.";var n=r("requestSmsCode",null,null,"POST",e);return n._thenRunCallbacks(t)},verifySmsCode:function(e,t,n){if(!e)throw"Missing sms code.";var i={};a.isString(t)?i.mobilePhoneNumber=t:n=t;var o=r("verifySmsCode",e,null,"POST",i);return o._thenRunCallbacks(n)}})}},function(e,t){"use strict";e.exports=function(e){var t=/\s+/,n=Array.prototype.slice;e.Events={on:function(e,n,a){var r,i,o,s,u;if(!n)return this;for(e=e.split(t),r=this._callbacks||(this._callbacks={}),i=e.shift();i;)u=r[i],o=u?u.tail:{},o.next=s={},o.context=a,o.callback=n,r[i]={tail:s,next:u?u.next:o},i=e.shift();return this},off:function(e,n,a){var r,i,o,s,u,l;if(i=this._callbacks){if(!(e||n||a))return delete this._callbacks,this;for(e=e?e.split(t):_.keys(i),r=e.shift();r;)if(o=i[r],delete i[r],o&&(n||a)){for(s=o.tail,o=o.next;o!==s;)u=o.callback,l=o.context,(n&&u!==n||a&&l!==a)&&this.on(r,u,l),o=o.next;r=e.shift()}return this}},trigger:function(e){var a,r,i,o,s,u,l;if(!(i=this._callbacks))return this;for(u=i.all,e=e.split(t),l=n.call(arguments,1),a=e.shift();a;){if(r=i[a])for(o=r.tail;(r=r.next)!==o;)r.callback.apply(r.context||this,l);if(r=u)for(o=r.tail,s=[a].concat(l);(r=r.next)!==o;)r.callback.apply(r.context||this,s);a=e.shift()}return this}},e.Events.bind=e.Events.on,e.Events.unbind=e.Events.off}},function(e,t,n){(function(t){"use strict";var a=n(4),r=n(225),i=(n(226),n(227),n(16)),o=n(12).request;e.exports=function(e){var s=(e._config,function(e){return e.match(/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/)[4]}),u=function(e){if(e<26)return String.fromCharCode(65+e);if(e<52)return String.fromCharCode(97+(e-26));if(e<62)return String.fromCharCode(48+(e-52));if(62===e)return"+";if(63===e)return"/";throw new Error("Tried to encode large digit "+e+" in base64.")},l=function(e){var t=[];return t.length=Math.ceil(e.length/3),a.times(t.length,function(n){var a=e[3*n],r=e[3*n+1]||0,i=e[3*n+2]||0,o=3*n+1<e.length,s=3*n+2<e.length;t[n]=[u(a>>2&63),u(a<<4&48|r>>4&15),o?u(r<<2&60|i>>6&3):"=",s?u(63&i):"="].join("")}),t.join("")},c=function(e){return e.split(",")[0]&&e.split(",")[0].indexOf("base64")>=0&&(e=e.split(",")[1]),e},d={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"};e.File=function(r,i,o){this.attributes={name:r,url:"",metaData:{},base64:""};var s=void 0;if(i&&i.owner)s=i.owner;else if(!e._config.disableCurrentUser)try{s=e.User.current()}catch(u){if("SYNC_API_NOT_AVAILABLE"!==u.code)throw u;console.warn("Get current user failed. It seems this runtime use an async storage system, please create AV.File in the callback of AV.User.currentAsync().")}this.attributes.metaData={owner:s?s.id:"unknown"};var f=/\.([^.]*)$/.exec(r);f&&(f=f[1].toLowerCase());var h=o||d[f]||"text/plain";if(this._guessedType=h,a.isArray(i)&&(this.attributes.metaData.size=i.length,i={base64:l(i)}),i&&i.base64){var p=n(210),m=p(i.base64,h);this.attributes.base64=c(i.base64),this._source=e.Promise.as(m,h)}else if(i&&i.blob)i.blob.type||(i.blob.type=h),this._source=e.Promise.as(i.blob,h);else if("undefined"!=typeof File&&i instanceof t.File)this._source=e.Promise.as(i,h);else if("undefined"!=typeof t.Buffer&&t.Buffer.isBuffer(i))this.attributes.metaData.size=i.length,this._source=e.Promise.as(i,h);else if(a.isString(i))throw new Error("Creating a AV.File from a String is not yet supported.")},e.File.withURL=function(t,n,a,r){if(!t||!n)throw"Please provide file name and url";var i=new e.File(t,null,r);if(a)for(var o in a)i.attributes.metaData[o]||(i.attributes.metaData[o]=a[o]);return i.attributes.url=n,i.attributes.metaData.__source="external",i},e.File.createWithoutData=function(t){var n=new e.File;return n.id=t,n},e.File.prototype={className:"_File",toJSON:function(){return e._encode(this)},getACL:function(){return this._acl},setACL:function(t){return t instanceof e.ACL?void(this._acl=t):new i(i.OTHER_CAUSE,"ACL must be a AV.ACL.")},name:function(){return this.get("name")},url:function(){return this.get("url")},get:function(e){switch(e){case"objectId":case"id":return this.id;case"url":case"name":case"metaData":case"createdAt":case"updatedAt":return this.attributes[e];default:return this.attributes.metaData[e]}},set:function f(){var e=this,f=function(t,n){switch(t){case"name":case"url":case"base64":case"metaData":e.attributes[t]=n;break;default:e.attributes.metaData[t]=n}};switch(arguments.length){case 1:for(var t in arguments.length<=0?void 0:arguments[0])f(t,(arguments.length<=0?void 0:arguments[0])[t]);break;case 2:f(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}},metaData:function(e,t){return e&&t?(this.attributes.metaData[e]=t,this):e&&!t?this.attributes.metaData[e]:this.attributes.metaData},thumbnailURL:function(e,t,n,a,r){var i=this.attributes.url;if(!i)throw new Error("Invalid url.");if(!e||!t||e<=0||t<=0)throw new Error("Invalid width or height value.");if(n=n||100,a=!a||a,n<=0||n>100)throw new Error("Invalid quality value.");r=r||"png";var o=a?2:1;return i+"?imageView/"+o+"/w/"+e+"/h/"+t+"/q/"+n+"/format/"+r},size:function(){return this.metaData().size},ownerId:function(){return this.metaData().owner},destroy:function(t){if(!this.id)return e.Promise.error("The file id is not eixsts.")._thenRunCallbacks(t);var n=o("files",null,this.id,"DELETE",t&&t.sessionToken);return n._thenRunCallbacks(t)},_fileToken:function(e){var t=arguments.length<=1||void 0===arguments[1]?"fileTokens":arguments[1],n=this.attributes.name,a=s(n),r=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},i=r()+r()+r()+r()+r()+a,u={key:i,name:n,ACL:this._acl,mime_type:e,metaData:this.attributes.metaData};return e&&!this.attributes.metaData.mime_type&&(this.attributes.metaData.mime_type=e),this._qiniu_key=i,o(t,null,null,"POST",u)},save:function(){var e=this;if(this.id)throw new Error("File already saved. If you want to manipulate a file, use AV.Query to get it.");var t=void 0,n={};switch(arguments.length){case 1:t=arguments.length<=0?void 0:arguments[0];break;case 2:n=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1]}if(!this._previousSave)if(this._source)this._previousSave=this._source.then(function(t,a){return e._fileToken(a).then(function(a){var i=void 0;switch(a.provider){default:i=r(a,t,e,n)}return i["catch"](function(t){throw e.destroy(),t})})});else if(this.attributes.url&&"external"===this.attributes.metaData.__source){var a={name:this.attributes.name,ACL:this._acl,metaData:this.attributes.metaData,mime_type:this._guessedType,url:this.attributes.url};this._previousSave=o("files",this.attributes.name,null,"post",a).then(function(t){return e.attributes.name=t.name,e.attributes.url=t.url,e.id=t.objectId,t.size&&(e.attributes.metaData.size=t.size),e})}return this._previousSave._thenRunCallbacks(t)},fetch:function(){var t=this,n=null,r={};1===arguments.length?n=arguments[0]:2===arguments.length&&(r=arguments[0],n=arguments[1]);var i=o("files",null,this.id,"GET",r);return i.then(function(n){var r=e.Object.prototype.parse(n);return r.attributes={name:r.name,url:r.url},r.attributes.metaData=r.metaData||{},delete r.objectId,delete r.metaData,delete r.url,delete r.name,a.extend(t,r),t})._thenRunCallbacks(n)}}}}).call(t,function(){return this}())},function(e,t,n){"use strict";var a=n(4);e.exports=function(e){e.GeoPoint=function(t,n){a.isArray(t)?(e.GeoPoint._validate(t[0],t[1]),this.latitude=t[0],this.longitude=t[1]):a.isObject(t)?(e.GeoPoint._validate(t.latitude,t.longitude),this.latitude=t.latitude,this.longitude=t.longitude):a.isNumber(t)&&a.isNumber(n)?(e.GeoPoint._validate(t,n),this.latitude=t,this.longitude=n):(this.latitude=0,this.longitude=0);var r=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return r._latitude}),this.__defineGetter__("longitude",function(){return r._longitude}),this.__defineSetter__("latitude",function(t){e.GeoPoint._validate(t,r.longitude),r._latitude=t}),this.__defineSetter__("longitude",function(t){e.GeoPoint._validate(r.latitude,t),r._longitude=t}))},e.GeoPoint._validate=function(e,t){if(e<-90)throw"AV.GeoPoint latitude "+e+" < -90.0.";if(e>90)throw"AV.GeoPoint latitude "+e+" > 90.0.";if(t<-180)throw"AV.GeoPoint longitude "+t+" < -180.0.";if(t>180)throw"AV.GeoPoint longitude "+t+" > 180.0."},e.GeoPoint.current=function(t){var n=new e.Promise;return navigator.geolocation.getCurrentPosition(function(t){n.resolve(new e.GeoPoint({latitude:t.coords.latitude,longitude:t.coords.longitude}))},function(e){n.reject(e)}),n._thenRunCallbacks(t)},e.GeoPoint.prototype={toJSON:function(){return e.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(e){var t=Math.PI/180,n=this.latitude*t,a=this.longitude*t,r=e.latitude*t,i=e.longitude*t,o=n-r,s=a-i,u=Math.sin(o/2),l=Math.sin(s/2),c=u*u+Math.cos(n)*Math.cos(r)*l*l;return c=Math.min(1,c),2*Math.asin(Math.sqrt(c))},kilometersTo:function(e){return 6371*this.radiansTo(e)},milesTo:function(e){return 3958.8*this.radiansTo(e)}}}},function(e,t,n){"use strict";var a=e.exports=n(48);a._=n(4),a.version=n(229),a.Promise=n(18),a.localStorage=n(69),a.Cache=n(68),a._config=a._config||{},n(70).init(a),n(212)(a),n(214)(a),n(208)(a),n(218)(a),n(221)(a),n(213)(a),n(217)(a),n(222)(a),n(228)(a),n(220)(a),n(211)(a),n(219)(a),n(224)(a),n(223)(a),n(216)(a);var r=n(16);a.Error=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.warn("AV.Error() is deprecated, and will be removed in next release."),new(Function.prototype.bind.apply(r,[null].concat(t)))}},function(e,t,n){"use strict";var a=n(4),r=n(16),i=n(12).request;e.exports=function(e){e.Insight=e.Insight||{},a.extend(e.Insight,{startJob:function(t,n){if(!t||!t.sql)throw new Error("Please provide the sql to run the job.");var a={jobConfig:t,appId:e.applicationId},r=i("bigquery","jobs",null,"POST",e._encode(a,null,!0));return r.then(function(t){return e._decode(null,t).id})._thenRunCallbacks(n)},on:function(e,t){}}),e.Insight.JobQuery=function(e,t){if(!e)throw new Error("Please provide the job id.");this.id=e,this.className=t,this._skip=0,this._limit=100},e.Insight.JobQuery.prototype={skip:function(e){return this._skip=e,this},limit:function(e){return this._limit=e,this},find:function(t){var n={skip:this._skip,limit:this._limit},a=i("bigquery","jobs",this.id,"GET",n);return a.then(function(t){return t.error?e.Promise.error(new r(t.code,t.error)):e.Promise.as(t)})._thenRunCallbacks(t)}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(17),i=a(r),o=n(4),s=n(16),u=n(12).request,l=n(70);e.exports=function(e){e.Object=function(t,n){if(o.isString(t))return e.Object._create.apply(this,arguments);t=t||{},n&&n.parse&&(t=this.parse(t));var a=e._getValue(this,"defaults");if(a&&(t=o.extend({},a,t)),n&&n.collection&&(this.collection=n.collection),this._serverData={},this._opSetQueue=[{}],this.attributes={},this._hashedJSON={},this._escapedAttributes={},this.cid=o.uniqueId("c"),this.changed={},this._silent={},this._pending={},!this.set(t,{silent:!0}))throw new Error("Can't create an invalid AV.Object");this.changed={},this._silent={},this._pending={},this._hasData=!0,this._previousAttributes=o.clone(this.attributes),this.initialize.apply(this,arguments)},e.Object.saveAll=function(t,n){return e.Object._deepSaveAsync(t,null,n)._thenRunCallbacks(n)},e.Object.fetchAll=function(t,n){return e.Promise.as().then(function(){return u("batch",null,null,"POST",{requests:o.map(t,function(e){if(!e.className)throw new Error("object must have className to fetch");if(!e.id)throw new Error("object must have id to fetch");if(e.dirty())throw new Error("object is modified but not saved");return{method:"GET",path:"/1.1/classes/"+e.className+"/"+e.id}})},n&&n.sessionToken)}).then(function(e){return o.forEach(t,function(t,n){if(!e[n].success){var a=new Error(e[n].error.error);throw a.code=e[n].error.code,a}t._finishFetch(t.parse(e[n].success))}),t})},o.extend(e.Object.prototype,e.Events,{_fetchWhenSave:!1,initialize:function(){},fetchWhenSave:function(e){if(console.warn("AV.Object#fetchWhenSave is deprecated, use AV.Object#save with options.fetchWhenSave instead."),!o.isBoolean(e))throw"Expect boolean value for fetchWhenSave";this._fetchWhenSave=e},getObjectId:function(){return this.id},getCreatedAt:function(){return this.createdAt||this.get("createdAt")},getUpdatedAt:function(){return this.updatedAt||this.get("updatedAt")},toJSON:function(){var t=this._toFullJSON();return e._arrayEach(["__type","className"],function(e){delete t[e]}),t},_toFullJSON:function(t){var n=o.clone(this.attributes);return e._objectEach(n,function(a,r){n[r]=e._encode(a,t)}),e._objectEach(this._operations,function(e,t){n[t]=e}),o.has(this,"id")&&(n.objectId=this.id),o.has(this,"createdAt")&&(o.isDate(this.createdAt)?n.createdAt=this.createdAt.toJSON():n.createdAt=this.createdAt),o.has(this,"updatedAt")&&(o.isDate(this.updatedAt)?n.updatedAt=this.updatedAt.toJSON():n.updatedAt=this.updatedAt),n.__type="Object",n.className=this.className,n},_refreshCache:function(){var t=this;t._refreshingCache||(t._refreshingCache=!0,e._objectEach(this.attributes,function(n,a){n instanceof e.Object?n._refreshCache():o.isObject(n)&&t._resetCacheForKey(a)&&t.set(a,new e.Op.Set(n),{silent:!0})}),delete t._refreshingCache)},dirty:function(e){this._refreshCache();var t=o.last(this._opSetQueue);return e?!!t[e]:!this.id||o.keys(t).length>0},_toPointer:function(){return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(e){switch(e){case"objectId":case"id":return this.id;case"createdAt":case"updatedAt":return this[e];default:return this.attributes[e]}},relation:function(t){var n=this.get(t);if(n){if(!(n instanceof e.Relation))throw"Called relation() on non-relation field "+t;return n._ensureParentAndKey(this,t),n}return new e.Relation(this,t)},escape:function(e){var t=this._escapedAttributes[e];if(t)return t;var n,a=this.attributes[e];return n=l.isNullOrUndefined(a)?"":o.escape(a.toString()),this._escapedAttributes[e]=n,n},has:function(e){return!l.isNullOrUndefined(this.attributes[e])},_mergeMagicFields:function(t){var n=this,a=["id","objectId","createdAt","updatedAt"];e._arrayEach(a,function(a){t[a]&&("objectId"===a?n.id=t[a]:"createdAt"!==a&&"updatedAt"!==a||o.isDate(t[a])?n[a]=t[a]:n[a]=e._parseDate(t[a]),delete t[a])})},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var t=o.first(this._opSetQueue);this._opSetQueue=o.rest(this._opSetQueue);var n=o.first(this._opSetQueue);e._objectEach(t,function(e,a){var r=t[a],i=n[a];r&&i?n[a]=i._mergeWithPrevious(r):r&&(n[a]=r)}),this._saving=this._saving-1},_finishSave:function(t){var n={};e._traverse(this.attributes,function(t){t instanceof e.Object&&t.id&&t._hasData&&(n[t.id]=t)});var a=o.first(this._opSetQueue);this._opSetQueue=o.rest(this._opSetQueue),this._applyOpSet(a,this._serverData),this._mergeMagicFields(t);var r=this;e._objectEach(t,function(t,a){r._serverData[a]=e._decode(a,t);var i=e._traverse(r._serverData[a],function(t){if(t instanceof e.Object&&n[t.id])return n[t.id]});i&&(r._serverData[a]=i)}),this._rebuildAllEstimatedData(),this._saving=this._saving-1},_finishFetch:function(t,n){this._opSetQueue=[{}],this._mergeMagicFields(t);var a=this;e._objectEach(t,function(t,n){a._serverData[n]=e._decode(n,t)}),this._rebuildAllEstimatedData(),this._refreshCache(),this._opSetQueue=[{}],this._hasData=n},_applyOpSet:function(t,n){var a=this;e._objectEach(t,function(t,r){n[r]=t._estimate(n[r],a,r),n[r]===e.Op._UNSET&&delete n[r]})},_resetCacheForKey:function(t){var n=this.attributes[t];if(o.isObject(n)&&!(n instanceof e.Object)&&!(n instanceof e.File)){n=n.toJSON?n.toJSON():n;var a=(0,i["default"])(n);if(this._hashedJSON[t]!==a){var r=!!this._hashedJSON[t];return this._hashedJSON[t]=a,r}}return!1},_rebuildEstimatedDataForKey:function(t){var n=this;delete this.attributes[t],this._serverData[t]&&(this.attributes[t]=this._serverData[t]),e._arrayEach(this._opSetQueue,function(a){var r=a[t];r&&(n.attributes[t]=r._estimate(n.attributes[t],n,t),n.attributes[t]===e.Op._UNSET?delete n.attributes[t]:n._resetCacheForKey(t))})},_rebuildAllEstimatedData:function(){var t=this,n=o.clone(this.attributes);this.attributes=o.clone(this._serverData),e._arrayEach(this._opSetQueue,function(n){t._applyOpSet(n,t.attributes),e._objectEach(n,function(e,n){t._resetCacheForKey(n)})}),e._objectEach(n,function(e,n){t.attributes[n]!==e&&t.trigger("change:"+n,t,t.attributes[n],{})}),e._objectEach(this.attributes,function(e,a){o.has(n,a)||t.trigger("change:"+a,t,e,{})})},set:function(t,n,a){var r;if(o.isObject(t)||l.isNullOrUndefined(t)?(r=t,e._objectEach(r,function(t,n){r[n]=e._decode(n,t)}),a=n):(r={},r[t]=e._decode(t,n)),a=a||{},!r)return this;r instanceof e.Object&&(r=r.attributes),a.unset&&e._objectEach(r,function(t,n){r[n]=new e.Op.Unset});var i=o.clone(r),s=this;if(e._objectEach(i,function(t,n){t instanceof e.Op&&(i[n]=t._estimate(s.attributes[n],s,n),i[n]===e.Op._UNSET&&delete i[n])}),!this._validate(r,a))return!1;this._mergeMagicFields(r),a.changes={};var u=this._escapedAttributes;this._previousAttributes||{};return e._arrayEach(o.keys(r),function(t){var n=r[t];n instanceof e.Relation&&(n.parent=s),n instanceof e.Op||(n=new e.Op.Set(n));var i=!0;n instanceof e.Op.Set&&o.isEqual(s.attributes[t],n.value)&&(i=!1),i&&(delete u[t],a.silent?s._silent[t]=!0:a.changes[t]=!0);var l=o.last(s._opSetQueue);l[t]=n._mergeWithPrevious(l[t]),s._rebuildEstimatedDataForKey(t),i?(s.changed[t]=s.attributes[t],a.silent||(s._pending[t]=!0)):(delete s.changed[t],delete s._pending[t])}),a.silent||this.change(a),this},unset:function(e,t){return t=t||{},t.unset=!0,this.set(e,null,t)},increment:function(t,n){return(o.isUndefined(n)||o.isNull(n))&&(n=1),this.set(t,new e.Op.Increment(n))},add:function(t,n){return this.set(t,new e.Op.Add(l.ensureArray(n)))},addUnique:function(t,n){return this.set(t,new e.Op.AddUnique(l.ensureArray(n)))},remove:function(t,n){return this.set(t,new e.Op.Remove(l.ensureArray(n)))},op:function(e){return o.last(this._opSetQueue)[e]},clear:function(e){e=e||{},e.unset=!0;var t=o.extend(this.attributes,this._operations);return this.set(t,e)},_getSaveJSON:function(){var t=o.clone(o.first(this._opSetQueue));return e._objectEach(t,function(e,n){t[n]=e.toJSON()}),t},_canBeSerialized:function(){return e.Object._canBeSerializedAsValue(this.attributes)},fetch:function(){var e={},t={};1===arguments.length?e=arguments[0]:2===arguments.length&&(t=arguments[0],e=arguments[1]||{}),t&&t.include&&o.isArray(t.include)&&(t.include=t.include.join(","));var n=this,a=u("classes",this.className,this.id,"GET",t,e.sessionToken);return a.then(function(e){return n._finishFetch(n.parse(e),!0),n})._thenRunCallbacks(e,this)},save:function(t,n,a){var r,i,s;if(o.isObject(t)||l.isNullOrUndefined(t)?(r=t,s=n):(r={},r[t]=n,s=a),!s&&r){var c=o.reject(r,function(e,t){return o.include(["success","error","wait"],t)});if(0===c.length){var d=!0;if(o.has(r,"success")&&!o.isFunction(r.success)&&(d=!1),o.has(r,"error")&&!o.isFunction(r.error)&&(d=!1),d)return this.save(null,r)}}s=o.clone(s)||{},s.wait&&(i=o.clone(this.attributes));var f=o.clone(s)||{};f.wait&&(f.silent=!0);var h;
if(f.error=function(e,t){h=t},r&&!this.set(r,f))return e.Promise.error(h)._thenRunCallbacks(s,this);var p=this;p._refreshCache();var m=[],g=[];return e.Object._findUnsavedChildren(p.attributes,m,g),m.length+g.length>0?e.Object._deepSaveAsync(this.attributes,p,s).then(function(){return p.save(null,s)},function(t){return e.Promise.error(t)._thenRunCallbacks(s,p)}):(this._startSave(),this._saving=(this._saving||0)+1,this._allPreviousSaves=this._allPreviousSaves||e.Promise.as(),this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var t=p.id?"PUT":"POST",n=p._getSaveJSON();if(p._fetchWhenSave&&(n._fetchWhenSave=!0),s.fetchWhenSave&&(n._fetchWhenSave=!0),s.query){var a;if("function"==typeof s.query.toJSON&&(a=s.query.toJSON(),a&&(n._where=a.where)),!n._where){var l=new Error("options.query is not an AV.Query");return e.Promise.error(l)._thenRunCallbacks(s,p)}}var c="classes",d=p.className;"_User"!==p.className||p.id||(c="users",d=null);var h=s._makeRequest||u,m=h(c,d,p.id,t,n,s.sessionToken);return m=m.then(function(e){var t=p.parse(e);return s.wait&&(t=o.extend(r||{},t)),p._finishSave(t),s.wait&&p.set(i,f),p},function(t){return p._cancelSave(),e.Promise.error(t)})._thenRunCallbacks(s,p)}),this._allPreviousSaves)},destroy:function(e){e=e||{};var t=this,n=function(){t.trigger("destroy",t,t.collection,e)};if(!this.id)return n();e.wait||n();var a=u("classes",this.className,this.id,"DELETE",null,e.sessionToken);return a.then(function(){return e.wait&&n(),t})._thenRunCallbacks(e,this)},parse:function(t){var n=o.clone(t);return o(["createdAt","updatedAt"]).each(function(t){n[t]&&(n[t]=e._parseDate(n[t]))}),n.updatedAt||(n.updatedAt=n.createdAt),n},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.id},change:function(t){t=t||{};var n=this._changing;this._changing=!0;var a=this;e._objectEach(this._silent,function(e){a._pending[e]=!0});var r=o.extend({},t.changes,this._silent);if(this._silent={},e._objectEach(r,function(e,n){a.trigger("change:"+n,a,a.get(n),t)}),n)return this;for(var i=function(e,t){a._pending[t]||a._silent[t]||delete a.changed[t]};!o.isEmpty(this._pending);)this._pending={},this.trigger("change",this,t),e._objectEach(this.changed,i),a._previousAttributes=o.clone(this.attributes);return this._changing=!1,this},existed:function(){return console.warn("AV.Object.prototype.existed() is deprecated."),!1},hasChanged:function(e){return arguments.length?this.changed&&o.has(this.changed,e):!o.isEmpty(this.changed)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&o.clone(this.changed);var n={},a=this._previousAttributes;return e._objectEach(t,function(e,t){o.isEqual(a[t],e)||(n[t]=e)}),n},previous:function(e){return arguments.length&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},validate:function(t,n){return!(!o.has(t,"ACL")||t.ACL instanceof e.ACL)&&new s(s.OTHER_CAUSE,"ACL must be a AV.ACL.")},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=o.extend({},this.attributes,e);var n=this.validate(e,t);return!n||(t&&t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1)},getACL:function(){return this.get("ACL")},setACL:function(e,t){return this.set("ACL",e,t)}}),e.Object.createWithoutData=function(t,n,a){var r=new e.Object(t);return r.id=n,r._hasData=a,r},e.Object.destroyAll=function(t,n){if(n=n||{},!t||0===t.length)return e.Promise.as()._thenRunCallbacks(n);var a=t[0].className,r="",i=!0;t.forEach(function(e){if(e.className!=a)throw"AV.Object.destroyAll requires the argument object array's classNames must be the same";if(!e.id)throw"Could not delete unsaved object";i?(r=e.id,i=!1):r=r+","+e.id});var o=u("classes",a,r,"DELETE",null,n.sessionToken);return o._thenRunCallbacks(n)},e.Object._getSubclass=function(t){if(!o.isString(t))throw"AV.Object._getSubclass requires a string argument.";var n=e.Object._classMap[t];return n||(n=e.Object.extend(t),e.Object._classMap[t]=n),n},e.Object._create=function(t,n,a){var r=e.Object._getSubclass(t);return new r(n,a)},e.Object._classMap={},e.Object._extend=e._extend,e.Object["new"]=function(t,n){return new e.Object(t,n)},e.Object.extend=function(t,n,a){if(!o.isString(t)){if(t&&o.has(t,"className"))return e.Object.extend(t.className,t,n);throw new Error("AV.Object.extend's first argument should be the className.")}"User"===t&&(t="_User");var r=null;if(o.has(e.Object._classMap,t)){var i=e.Object._classMap[t];if(!n&&!a)return i;r=i._extend(n,a)}else n=n||{},n._className=t,r=this._extend(n,a);return r.extend=function(n){if(o.isString(n)||n&&o.has(n,"className"))return e.Object.extend.apply(r,arguments);var a=[t].concat(o.toArray(arguments));return e.Object.extend.apply(r,a)},r["new"]=function(e,t){return new r(e,t)},e.Object._classMap[t]=r,r},Object.defineProperty(e.Object.prototype,"className",{get:function(){var e=this._className||this.constructor.name;return"User"===e?"_User":e}}),e.Object.register=function(t){if(!(t.prototype instanceof e.Object))throw new Error("registered class is not a subclass of AV.Object");var n=t.name;if(!n.length)throw new Error("registered class must be named");e.Object._classMap[n]=t},e.Object._findUnsavedChildren=function(t,n,a){e._traverse(t,function(t){return t instanceof e.Object?(t._refreshCache(),void(t.dirty()&&n.push(t))):t instanceof e.File?void(t.url()||t.id||a.push(t)):void 0})},e.Object._canBeSerializedAsValue=function(t){var n=!0;return t instanceof e.Object||t instanceof e.File?n=!!t.id:o.isArray(t)?e._arrayEach(t,function(t){e.Object._canBeSerializedAsValue(t)||(n=!1)}):o.isObject(t)&&e._objectEach(t,function(t){e.Object._canBeSerializedAsValue(t)||(n=!1)}),n},e.Object._deepSaveAsync=function(t,n,a){var r=[],i=[];e.Object._findUnsavedChildren(t,r,i),n&&(r=o.filter(r,function(e){return e!=n}));var l=e.Promise.as();o.each(i,function(e){l=l.then(function(){return e.save()})});var c=o.uniq(r),d=o.uniq(c);return l.then(function(){return e.Promise._continueWhile(function(){return d.length>0},function(){var t=[],n=[];if(e._arrayEach(d,function(e){return t.length>20?void n.push(e):void(e._canBeSerialized()?t.push(e):n.push(e))}),d=n,0===t.length)return e.Promise.error(new s(s.OTHER_CAUSE,"Tried to save a batch with a cycle."));var r=e.Promise.when(o.map(t,function(t){return t._allPreviousSaves||e.Promise.as()})),i=new e.Promise;return e._arrayEach(t,function(e){e._allPreviousSaves=i}),r._continueWith(function(){return u("batch",null,null,"POST",{requests:o.map(t,function(e){var t=e._getSaveJSON(),n="POST",a="/1.1/classes/"+e.className;return e.id&&(a=a+"/"+e.id,n="PUT"),e._startSave(),{method:n,path:a,body:t}})},a&&a.sessionToken).then(function(n){var a;if(e._arrayEach(t,function(e,t){n[t].success?e._finishSave(e.parse(n[t].success)):(a=a||n[t].error,e._cancelSave())}),a)return e.Promise.error(new s(a.code,a.error))}).then(function(e){return i.resolve(e),e},function(t){return i.reject(t),e.Promise.error(t)})})})}).then(function(){return t})}}},function(e,t,n){"use strict";var a=n(4);e.exports=function(e){e.Op=function(){this._initialize.apply(this,arguments)},e.Op.prototype={_initialize:function(){}},a.extend(e.Op,{_extend:e._extend,_opDecoderMap:{},_registerDecoder:function(t,n){e.Op._opDecoderMap[t]=n},_decode:function(t){var n=e.Op._opDecoderMap[t.__op];return n?n(t):void 0}}),e.Op._registerDecoder("Batch",function(t){var n=null;return e._arrayEach(t.ops,function(t){t=e.Op._decode(t),n=t._mergeWithPrevious(n)}),n}),e.Op.Set=e.Op._extend({_initialize:function(e){this._value=e},value:function(){return this._value},toJSON:function(){return e._encode(this.value())},_mergeWithPrevious:function(e){return this},_estimate:function(e){return this.value()}}),e.Op._UNSET={},e.Op.Unset=e.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(e){return this},_estimate:function(t){return e.Op._UNSET}}),e.Op._registerDecoder("Delete",function(t){return new e.Op.Unset}),e.Op.Increment=e.Op._extend({_initialize:function(e){this._amount=e},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.amount());if(t instanceof e.Op.Set)return new e.Op.Set(t.value()+this.amount());if(t instanceof e.Op.Increment)return new e.Op.Increment(this.amount()+t.amount());throw"Op is invalid after previous op."}return this},_estimate:function(e){return e?e+this.amount():this.amount()}}),e.Op._registerDecoder("Increment",function(t){return new e.Op.Increment(t.amount)}),e.Op.Add=e.Op._extend({_initialize:function(e){this._objects=e},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:e._encode(this.objects())}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.objects());if(t instanceof e.Op.Set)return new e.Op.Set(this._estimate(t.value()));if(t instanceof e.Op.Add)return new e.Op.Add(t.objects().concat(this.objects()));throw"Op is invalid after previous op."}return this},_estimate:function(e){return e?e.concat(this.objects()):a.clone(this.objects())}}),e.Op._registerDecoder("Add",function(t){return new e.Op.Add(e._decode(void 0,t.objects))}),e.Op.AddUnique=e.Op._extend({_initialize:function(e){this._objects=a.uniq(e)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:e._encode(this.objects())}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.objects());if(t instanceof e.Op.Set)return new e.Op.Set(this._estimate(t.value()));if(t instanceof e.Op.AddUnique)return new e.Op.AddUnique(this._estimate(t.objects()));throw"Op is invalid after previous op."}return this},_estimate:function(t){if(t){var n=a.clone(t);return e._arrayEach(this.objects(),function(t){if(t instanceof e.Object&&t.id){var r=a.find(n,function(n){return n instanceof e.Object&&n.id===t.id});if(r){var i=a.indexOf(n,r);n[i]=t}else n.push(t)}else a.contains(n,t)||n.push(t)}),n}return a.clone(this.objects())}}),e.Op._registerDecoder("AddUnique",function(t){return new e.Op.AddUnique(e._decode(void 0,t.objects))}),e.Op.Remove=e.Op._extend({_initialize:function(e){this._objects=a.uniq(e)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:e._encode(this.objects())}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return t;if(t instanceof e.Op.Set)return new e.Op.Set(this._estimate(t.value()));if(t instanceof e.Op.Remove)return new e.Op.Remove(a.union(t.objects(),this.objects()));throw"Op is invalid after previous op."}return this},_estimate:function(t){if(t){var n=a.difference(t,this.objects());return e._arrayEach(this.objects(),function(t){t instanceof e.Object&&t.id&&(n=a.reject(n,function(n){return n instanceof e.Object&&n.id===t.id}))}),n}return[]}}),e.Op._registerDecoder("Remove",function(t){return new e.Op.Remove(e._decode(void 0,t.objects))}),e.Op.Relation=e.Op._extend({_initialize:function(t,n){this._targetClassName=null;var r=this,i=function(t){if(t instanceof e.Object){if(!t.id)throw"You can't add an unsaved AV.Object to a relation.";if(r._targetClassName||(r._targetClassName=t.className),r._targetClassName!==t.className)throw"Tried to create a AV.Relation with 2 different types: "+r._targetClassName+" and "+t.className+".";return t.id}return t};this.relationsToAdd=a.uniq(a.map(t,i)),this.relationsToRemove=a.uniq(a.map(n,i))},added:function(){var t=this;return a.map(this.relationsToAdd,function(n){var a=e.Object._create(t._targetClassName);return a.id=n,a})},removed:function(){var t=this;return a.map(this.relationsToRemove,function(n){var a=e.Object._create(t._targetClassName);return a.id=n,a})},toJSON:function(){var e=null,t=null,n=this,r=function(e){return{__type:"Pointer",className:n._targetClassName,objectId:e}},i=null;return this.relationsToAdd.length>0&&(i=a.map(this.relationsToAdd,r),e={__op:"AddRelation",objects:i}),this.relationsToRemove.length>0&&(i=a.map(this.relationsToRemove,r),t={__op:"RemoveRelation",objects:i}),e&&t?{__op:"Batch",ops:[e,t]}:e||t||{}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)throw"You can't modify a relation after deleting it.";if(t instanceof e.Op.Relation){if(t._targetClassName&&t._targetClassName!==this._targetClassName)throw"Related object must be of class "+t._targetClassName+", but "+this._targetClassName+" was passed in.";var n=a.union(a.difference(t.relationsToAdd,this.relationsToRemove),this.relationsToAdd),r=a.union(a.difference(t.relationsToRemove,this.relationsToAdd),this.relationsToRemove),i=new e.Op.Relation(n,r);return i._targetClassName=this._targetClassName,i}throw"Op is invalid after previous op."}return this},_estimate:function(t,n,a){if(t){if(t instanceof e.Relation){if(this._targetClassName)if(t.targetClassName){if(t.targetClassName!==this._targetClassName)throw"Related object must be a "+t.targetClassName+", but a "+this._targetClassName+" was passed in."}else t.targetClassName=this._targetClassName;return t}throw"Op is invalid after previous op."}var r=new e.Relation(n,a);r.targetClassName=this._targetClassName}}),e.Op._registerDecoder("AddRelation",function(t){return new e.Op.Relation(e._decode(void 0,t.objects),[])}),e.Op._registerDecoder("RemoveRelation",function(t){return new e.Op.Relation([],e._decode(void 0,t.objects))})}},function(e,t,n){"use strict";var a=n(12).request;e.exports=function(e){e.Installation=e.Object.extend("_Installation"),e.Push=e.Push||{},e.Push.send=function(e,t){if(e.where&&(e.where=e.where.toJSON().where),e.where&&e.cql)throw"Both where and cql can't be set";if(e.push_time&&(e.push_time=e.push_time.toJSON()),e.expiration_time&&(e.expiration_time=e.expiration_time.toJSON()),e.expiration_time&&e.expiration_time_interval)throw"Both expiration_time and expiration_time_interval can't be set";var n=a("push",null,null,"POST",e);return n._thenRunCallbacks(t)}}},function(e,t,n){"use strict";var a=n(4),r=n(16),i=n(12).request;e.exports=function(e){e.Query=function(t){a.isString(t)&&(t=e.Object._getSubclass(t)),this.objectClass=t,this.className=t.prototype.className,this._where={},this._include=[],this._limit=-1,this._skip=0,this._extraOptions={}},e.Query.or=function(){var t=a.toArray(arguments),n=null;e._arrayEach(t,function(e){if(a.isNull(n)&&(n=e.className),n!==e.className)throw"All queries must be for the same class"});var r=new e.Query(n);return r._orQuery(t),r},e.Query.and=function(){var t=a.toArray(arguments),n=null;e._arrayEach(t,function(e){if(a.isNull(n)&&(n=e.className),n!==e.className)throw"All queries must be for the same class"});var r=new e.Query(n);return r._andQuery(t),r},e.Query.doCloudQuery=function(t,n,r){var o={cql:t};a.isArray(n)?o.pvalues=n:r=n;var s=i("cloudQuery",null,null,"GET",o,r&&r.sessionToken);return s.then(function(t){var n=new e.Query(t.className),r=a.map(t.results,function(e){var a=n._newObject(t);return a._finishFetch&&a._finishFetch(n._processResult(e),!0),a});return{results:r,count:t.count,className:t.className}})._thenRunCallbacks(r)},e.Query._extend=e._extend,e.Query.prototype={_processResult:function(e){return e},get:function(t,n){if(!t){var i=new r(r.OBJECT_NOT_FOUND,"Object not found.");throw i}var o=this;return o.equalTo("objectId",t),o.first().then(function(t){if(!a.isEmpty(t))return t;var n=new r(r.OBJECT_NOT_FOUND,"Object not found.");return e.Promise.error(n)})._thenRunCallbacks(n,null)},toJSON:function(){var t={where:this._where};return this._include.length>0&&(t.include=this._include.join(",")),this._select&&(t.keys=this._select.join(",")),this._limit>=0&&(t.limit=this._limit),this._skip>0&&(t.skip=this._skip),void 0!==this._order&&(t.order=this._order),e._objectEach(this._extraOptions,function(e,n){t[n]=e}),t},_newObject:function(t){var n;return n=t&&t.className?new e.Object(t.className):new this.objectClass},_createRequest:function(e,t){return i("classes",this.className,null,"GET",e||this.toJSON(),t&&t.sessionToken)},find:function(e){var t=this,n=this._createRequest(null,e);return n.then(function(e){return a.map(e.results,function(n){var a=t._newObject(e);return a._finishFetch&&a._finishFetch(t._processResult(n),!0),a})})._thenRunCallbacks(e)},destroyAll:function(t){var n=this;return n.find().then(function(t){return e.Object.destroyAll(t)})._thenRunCallbacks(t)},count:function(e){var t=this.toJSON();t.limit=0,t.count=1;var n=this._createRequest(t,e);return n.then(function(e){return e.count})._thenRunCallbacks(e)},first:function(e){var t=this,n=this.toJSON();n.limit=1;var r=this._createRequest(n,e);return r.then(function(e){return a.map(e.results,function(e){var n=t._newObject();return n._finishFetch&&n._finishFetch(t._processResult(e),!0),n})[0]})._thenRunCallbacks(e)},collection:function(t,n){return n=n||{},new e.Collection(t,a.extend(n,{model:this._objectClass||this.objectClass,query:this}))},skip:function(e){return this._skip=e,this},limit:function(e){return this._limit=e,this},equalTo:function(t,n){return this._where[t]=e._encode(n),this},_addCondition:function(t,n,a){return this._where[t]||(this._where[t]={}),this._where[t][n]=e._encode(a),this},sizeEqualTo:function(e,t){this._addCondition(e,"$size",t)},notEqualTo:function(e,t){return this._addCondition(e,"$ne",t),this},lessThan:function(e,t){return this._addCondition(e,"$lt",t),this},greaterThan:function(e,t){return this._addCondition(e,"$gt",t),this},lessThanOrEqualTo:function(e,t){return this._addCondition(e,"$lte",t),this},greaterThanOrEqualTo:function(e,t){return this._addCondition(e,"$gte",t),this},containedIn:function(e,t){return this._addCondition(e,"$in",t),this},notContainedIn:function(e,t){return this._addCondition(e,"$nin",t),this},containsAll:function(e,t){return this._addCondition(e,"$all",t),this},exists:function(e){return this._addCondition(e,"$exists",!0),this},doesNotExist:function(e){return this._addCondition(e,"$exists",!1),this},matches:function(e,t,n){return this._addCondition(e,"$regex",t),n||(n=""),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),n&&n.length&&this._addCondition(e,"$options",n),this},matchesQuery:function(e,t){var n=t.toJSON();return n.className=t.className,this._addCondition(e,"$inQuery",n),this},doesNotMatchQuery:function(e,t){var n=t.toJSON();return n.className=t.className,this._addCondition(e,"$notInQuery",n),this},matchesKeyInQuery:function(e,t,n){var a=n.toJSON();return a.className=n.className,this._addCondition(e,"$select",{key:t,query:a}),this},doesNotMatchKeyInQuery:function(e,t,n){var a=n.toJSON();return a.className=n.className,this._addCondition(e,"$dontSelect",{key:t,query:a}),this},_orQuery:function(e){var t=a.map(e,function(e){return e.toJSON().where});return this._where.$or=t,this},_andQuery:function(e){var t=a.map(e,function(e){return e.toJSON().where});return this._where.$and=t,this},_quote:function(e){return"\\Q"+e.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(e,t){return this._addCondition(e,"$regex",this._quote(t)),this},startsWith:function(e,t){return this._addCondition(e,"$regex","^"+this._quote(t)),this},endsWith:function(e,t){return this._addCondition(e,"$regex",this._quote(t)+"$"),this},ascending:function(e){return this._order=e,this},addAscending:function(e){return this._order?this._order+=","+e:this._order=e,this},descending:function(e){return this._order="-"+e,this},addDescending:function(e){return this._order?this._order+=",-"+e:this._order="-"+e,this},near:function(t,n){return n instanceof e.GeoPoint||(n=new e.GeoPoint(n)),this._addCondition(t,"$nearSphere",n),this},withinRadians:function(e,t,n){return this.near(e,t),this._addCondition(e,"$maxDistance",n),this},withinMiles:function(e,t,n){return this.withinRadians(e,t,n/3958.8)},withinKilometers:function(e,t,n){return this.withinRadians(e,t,n/6371)},withinGeoBox:function(t,n,a){return n instanceof e.GeoPoint||(n=new e.GeoPoint(n)),a instanceof e.GeoPoint||(a=new e.GeoPoint(a)),this._addCondition(t,"$within",{$box:[n,a]}),this},include:function(){var t=this;return e._arrayEach(arguments,function(e){a.isArray(e)?t._include=t._include.concat(e):t._include.push(e)}),this},select:function(){var t=this;return this._select=this._select||[],e._arrayEach(arguments,function(e){a.isArray(e)?t._select=t._select.concat(e):t._select.push(e)}),this},each:function(t,n){if(n=n||{},this._order||this._skip||this._limit>=0){var r="Cannot iterate on a query with sort, skip, or limit.";return e.Promise.error(r)._thenRunCallbacks(n)}var i=(new e.Promise,new e.Query(this.objectClass));i._limit=n.batchSize||100,i._where=a.clone(this._where),i._include=a.clone(this._include),i.ascending("objectId");var o=!1;return e.Promise._continueWhile(function(){return!o},function(){return i.find().then(function(n){var r=e.Promise.as();return a.each(n,function(e){r=r.then(function(){return t(e)})}),r.then(function(){n.length>=i._limit?i.greaterThan("objectId",n[n.length-1].id):o=!0})})})._thenRunCallbacks(n)}},e.FriendShipQuery=e.Query._extend({_objectClass:e.User,_newObject:function(){return new e.User},_processResult:function(e){if(e&&e[this._friendshipTag]){var t=e[this._friendshipTag];return"Pointer"===t.__type&&"_User"===t.className&&(delete t.__type,delete t.className),t}return null}})}},function(e,t,n){"use strict";var a=n(4);e.exports=function(e){e.Relation=function(e,t){if(!a.isString(t))throw new TypeError("key must be a string");this.parent=e,this.key=t,this.targetClassName=null},e.Relation.reverseQuery=function(t,n,a){var r=new e.Query(t);return r.equalTo(n,a._toPointer()),r},e.Relation.prototype={_ensureParentAndKey:function(e,t){if(this.parent=this.parent||e,this.key=this.key||t,this.parent!==e)throw"Internal Error. Relation retrieved from two different Objects.";if(this.key!==t)throw"Internal Error. Relation retrieved from two different keys."},add:function(t){a.isArray(t)||(t=[t]);var n=new e.Op.Relation(t,[]);this.parent.set(this.key,n),this.targetClassName=n._targetClassName},remove:function(t){a.isArray(t)||(t=[t]);var n=new e.Op.Relation([],t);this.parent.set(this.key,n),this.targetClassName=n._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function t(){var n,t;return this.targetClassName?(n=e.Object._getSubclass(this.targetClassName),t=new e.Query(n)):(n=e.Object._getSubclass(this.parent.className),t=new e.Query(n),t._extraOptions.redirectClassNameForKey=this.key),t._addCondition("$relatedTo","object",this.parent._toPointer()),t._addCondition("$relatedTo","key",this.key),t}}}},function(e,t,n){"use strict";var a=n(4),r=n(16);e.exports=function(e){e.Role=e.Object.extend("_Role",{constructor:function(t,n){if(a.isString(t)?(e.Object.prototype.constructor.call(this,null,null),this.setName(t)):e.Object.prototype.constructor.call(this,t,n),void 0===n){var r=new e.ACL;r.setPublicReadAccess(!0),this.getACL()||this.setACL(r)}else{if(!(n instanceof e.ACL))throw new TypeError("acl must be an instance of AV.ACL");this.setACL(n)}},getName:function(){return this.get("name")},setName:function(e,t){return this.set("name",e,t)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(t,n){if("name"in t&&t.name!==this.getName()){var i=t.name;if(this.id&&this.id!==t.objectId)return new r(r.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if(!a.isString(i))return new r(r.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(i))return new r(r.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}return!!e.Object.prototype.validate&&e.Object.prototype.validate.call(this,t,n)}})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(17),i=a(r),o=n(4),s=n(12).request;e.exports=function(e){e.SearchSortBuilder=function(){this._sortFields=[]},e.SearchSortBuilder.prototype={_addField:function(e,t,n,a){var r={};return r[e]={order:t||"asc",mode:n||"avg",missing:"_"+(a||"last")},this._sortFields.push(r),this},ascending:function(e,t,n){return this._addField(e,"asc",t,n)},descending:function(e,t,n){return this._addField(e,"desc",t,n)},whereNear:function(e,t,n){n=n||{};var a={},r={lat:t.latitude,lon:t.longitude},i={order:n.order||"asc",mode:n.mode||"avg",unit:n.unit||"km"};return i[e]=r,a._geo_distance=i,this._sortFields.push(a),this},build:function(){return(0,i["default"])(e._encode(this._sortFields))}},e.SearchQuery=e.Query._extend({_sid:null,_hits:0,_queryString:null,_highlights:null,_sortBuilder:null,_createRequest:function(e,t){return s("search/select",null,null,"GET",e||this.toJSON(),t&&t.sessionToken)},sid:function(e){return this._sid=e,this},queryString:function(e){return this._queryString=e,this},highlights:function(e){var t;return t=e&&o.isString(e)?arguments:e,this._highlights=t,this},sortBy:function(e){return this._sortBuilder=e,this},hits:function(){return this._hits||(this._hits=0),this._hits},_processResult:function(e){return delete e.className,delete e._app_url,delete e._deeplink,e},hasMore:function(){return!this._hitEnd},reset:function(){this._hitEnd=!1,this._sid=null,this._hits=0},find:function(e){var t=this,n=this._createRequest();return n.then(function(e){return e.sid?(t._oldSid=t._sid,t._sid=e.sid):(t._sid=null,t._hitEnd=!0),t._hits=e.hits||0,o.map(e.results,function(n){n.className&&(e.className=n.className);var a=t._newObject(e);return a.appURL=n._app_url,a._finishFetch(t._processResult(n),!0),a})})._thenRunCallbacks(e)},toJSON:function(){var t=e.SearchQuery.__super__.toJSON.call(this);if(delete t.where,this.className&&(t.clazz=this.className),this._sid&&(t.sid=this._sid),!this._queryString)throw"Please set query string.";if(t.q=this._queryString,this._highlights&&(t.highlights=this._highlights.join(",")),this._sortBuilder&&t.order)throw"sort and order can not be set at same time.";return this._sortBuilder&&(t.sort=this._sortBuilder.build()),t}})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(38),i=a(r),o=n(49),s=a(o),u=n(37),l=a(u),c="function"==typeof l["default"]&&"symbol"===(0,s["default"])(i["default"])?function(e){return"undefined"==typeof e?"undefined":(0,s["default"])(e)}:function(e){return e&&"function"==typeof l["default"]&&e.constructor===l["default"]?"symbol":"undefined"==typeof e?"undefined":(0,s["default"])(e)},d=n(4),f=n(12).request;e.exports=function(e){e.Status=function(e,t){return this.data={},this.inboxType="default",this.query=null,e&&"object"===("undefined"==typeof e?"undefined":c(e))?this.data=e:(e&&(this.data.image=e),t&&(this.data.message=t)),this},e.Status.prototype={get:function(e){return this.data[e]},set:function(e,t){return this.data[e]=t,this},destroy:function(t){if(!this.id)return e.Promise.error("The status id is not exists.")._thenRunCallbacks(t);var n=f("statuses",null,this.id,"DELETE",t&&t.sessionToken);return n._thenRunCallbacks(t)},toObject:function(){return this.id?e.Object.createWithoutData("_Status",this.id):null},_getDataJSON:function(){var t=d.clone(this.data);return e._encode(t)},send:function(t){if(!e.User.current())throw"Please signin an user.";if(!this.query)return e.Status.sendStatusToFollowers(this,t);var n=this.query.toJSON();n.className=this.query.className;var a={};a.query=n,this.data=this.data||{};var r=e.Object.createWithoutData("_User",e.User.current().id)._toPointer();this.data.source=this.data.source||r,a.data=this._getDataJSON(),a.inboxType=this.inboxType||"default";var i=f("statuses",null,null,"POST",a,t&&t.sessionToken),o=this;return i.then(function(t){return o.id=t.objectId,o.createdAt=e._parseDate(t.createdAt),o})._thenRunCallbacks(t)},_finishFetch:function(t){this.id=t.objectId,this.createdAt=e._parseDate(t.createdAt),this.updatedAt=e._parseDate(t.updatedAt),this.messageId=t.messageId,delete t.messageId,delete t.objectId,delete t.createdAt,delete t.updatedAt,this.data=e._decode(void 0,t)}},e.Status.sendStatusToFollowers=function(t,n){if(!e.User.current())throw"Please signin an user.";var a={};a.className="_Follower",a.keys="follower";var r=e.Object.createWithoutData("_User",e.User.current().id)._toPointer();a.where={user:r};var i={};i.query=a,t.data=t.data||{},t.data.source=t.data.source||r,i.data=t._getDataJSON(),i.inboxType=t.inboxType||"default";var o=f("statuses",null,null,"POST",i,n&&n.sessionToken);return o.then(function(n){return t.id=n.objectId,t.createdAt=e._parseDate(n.createdAt),t})._thenRunCallbacks(n)},e.Status.sendPrivateStatus=function(t,n,a){if(!e.User.current())throw"Please signin an user.";if(!n)throw"Invalid target user.";var r=d.isString(n)?n:n.id;if(!r)throw"Invalid target user.";var i={};i.className="_User";var o=e.Object.createWithoutData("_User",e.User.current().id)._toPointer();i.where={objectId:r};var s={};s.query=i,t.data=t.data||{},t.data.source=t.data.source||o,s.data=t._getDataJSON(),s.inboxType="private",t.inboxType="private";var u=f("statuses",null,null,"POST",s,a&&a.sessionToken);return u.then(function(n){return t.id=n.objectId,t.createdAt=e._parseDate(n.createdAt),t})._thenRunCallbacks(a)},e.Status.countUnreadStatuses=function(t){if(!e.User.current()&&null==t)throw"Please signin an user or pass the owner objectId.";t=t||e.User.current();var n=d.isString(arguments[1])?arguments[2]:arguments[1],a=d.isString(arguments[1])?arguments[1]:"default",r={};r.inboxType=e._encode(a),r.owner=e._encode(t);var i=f("subscribe/statuses/count",null,null,"GET",r,n&&n.sessionToken);return i._thenRunCallbacks(n)},e.Status.statusQuery=function(t){var n=new e.Query("_Status");return t&&n.equalTo("source",t),n},e.InboxQuery=e.Query._extend({_objectClass:e.Status,_sinceId:0,_maxId:0,_inboxType:"default",_owner:null,_newObject:function(){return new e.Status},_createRequest:function(e,t){return f("subscribe/statuses",null,null,"GET",e||this.toJSON(),t&&t.sessionToken)},sinceId:function(e){return this._sinceId=e,this},maxId:function(e){return this._maxId=e,this},owner:function(e){return this._owner=e,this},inboxType:function(e){return this._inboxType=e,this},toJSON:function(){var t=e.InboxQuery.__super__.toJSON.call(this);return t.owner=e._encode(this._owner),t.inboxType=e._encode(this._inboxType),t.sinceId=e._encode(this._sinceId),t.maxId=e._encode(this._maxId),t}}),e.Status.inboxQuery=function(t,n){var a=new e.InboxQuery(e.Status);return t&&(a._owner=t),n&&(a._inboxType=n),a}}},function(e,t,n){"use strict";var a=n(36),r=n(47)("cos"),i=n(18);e.exports=function(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];n.attributes.url=e.url,n._bucket=e.bucket,n.id=e.objectId;var s=e.upload_url+"?sign="+encodeURIComponent(e.token),u=new i,l=a("POST",s).field("fileContent",t).field("op","upload");return o.onprogress&&l.on("progress",o.onprogress),l.end(function(e,t){return t&&r(t.status,t.body,t.text),e?(t&&(e.statusCode=t.status,e.responseText=t.text,e.response=t.body),u.reject(e)):void u.resolve(n)}),u}},function(e,t,n){"use strict";var a=n(36),r=n(18),i=n(47)("qiniu");e.exports=function(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];n.attributes.url=e.url,n._bucket=e.bucket,n.id=e.objectId;var s=e.token,u=new r,l=a("POST","https://up.qbox.me").field("file",t).field("name",n.attributes.name).field("key",n._qiniu_key).field("token",s);return o.onprogress&&l.on("progress",o.onprogress),l.end(function(e,t){return t&&i(t.status,t.body,t.text),e?(t&&(e.statusCode=t.status,e.responseText=t.text,e.response=t.body),u.reject(e)):void u.resolve(n)}),u}},function(e,t,n){"use strict";var a=n(36),r=n(18);e.exports=function(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];n.attributes.url=e.url,n._bucket=e.bucket,n.id=e.objectId;var o=new r,s=a("PUT",e.upload_url).set("Content-Type",n.attributes.metaData.mime_type).send(t);return i.onprogress&&s.on("progress",i.onprogress),s.end(function(e,t){return e?(t&&(e.statusCode=t.status,e.responseText=t.text,e.response=t.body),o.reject(e)):void o.resolve(n)}),o}},function(e,t,n){
"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=s.clone(e)||{};return delete t.success,delete t.error,t}var i=n(17),o=a(i),s=n(4),u=n(16),l=n(12).request;e.exports=function(e){e.User=e.Object.extend("_User",{_isCurrentUser:!1,_mergeMagicFields:function(t){t.sessionToken&&(this._sessionToken=t.sessionToken,delete t.sessionToken),e.User.__super__._mergeMagicFields.call(this,t)},_cleanupAuthData:function(){if(this.isCurrent()){var t=this.get("authData");t&&e._objectEach(this.get("authData"),function(e,n){t[n]||delete t[n]})}},_synchronizeAllAuthData:function(){var t=this.get("authData");if(t){var n=this;e._objectEach(this.get("authData"),function(e,t){n._synchronizeAuthData(t)})}},_synchronizeAuthData:function(t){if(this.isCurrent()){var n;s.isString(t)?(n=t,t=e.User._authProviders[n]):n=t.getAuthType();var a=this.get("authData");if(a&&t){var r=t.restoreAuthentication(a[n]);r||this._unlinkFrom(t)}}},_handleSaveResult:function(t){return t&&!e._config.disableCurrentUser&&(this._isCurrentUser=!0),this._cleanupAuthData(),this._synchronizeAllAuthData(),delete this._serverData.password,this._rebuildEstimatedDataForKey("password"),this._refreshCache(),!t&&!this.isCurrent()||e._config.disableCurrentUser?e.Promise.as():e.Promise.as(e.User._saveCurrentUser(this))},_linkWith:function(t,n){var a;if(s.isString(t)?(a=t,t=e.User._authProviders[t]):a=t.getAuthType(),s.has(n,"authData")){var i=this.get("authData")||{};return i[a]=n.authData,this.set("authData",i),this.save({authData:i},r(n)).then(function(e){return e._handleSaveResult(!0).then(function(){return e})})._thenRunCallbacks(n)}var o=this,u=new e.Promise;return t.authenticate({success:function(e,t){o._linkWith(e,{authData:t,success:n.success,error:n.error}).then(function(){u.resolve(o)})},error:function(e,t){n.error&&n.error(o,t),u.reject(t)}}),u},_unlinkFrom:function(t,n){var a;s.isString(t)?(a=t,t=e.User._authProviders[t]):a=t.getAuthType();var r=s.clone(n),i=this;return r.authData=null,r.success=function(e){i._synchronizeAuthData(t),n.success&&n.success.apply(this,arguments)},this._linkWith(t,r)},_isLinked:function(e){var t;t=s.isString(e)?e:e.getAuthType();var n=this.get("authData")||{};return!!n[t]},logOut:function(){this._logOutWithAll(),this._isCurrentUser=!1},_logOutWithAll:function(){var t=this.get("authData");if(t){var n=this;e._objectEach(this.get("authData"),function(e,t){n._logOutWith(t)})}},_logOutWith:function(t){this.isCurrent()&&(s.isString(t)&&(t=e.User._authProviders[t]),t&&t.deauthenticate&&t.deauthenticate())},signUp:function(e,t){var n;t=t||{};var a=e&&e.username||this.get("username");if(!a||""===a)throw n=new u(u.OTHER_CAUSE,"Cannot sign up user with an empty name."),t&&t.error&&t.error(this,n),n;var i=e&&e.password||this.get("password");if(!i||""===i)throw n=new u(u.OTHER_CAUSE,"Cannot sign up user with an empty password."),t&&t.error&&t.error(this,n),n;return this.save(e,r(t)).then(function(e){return e._handleSaveResult(!0).then(function(){return e})})._thenRunCallbacks(t,this)},signUpOrlogInWithMobilePhone:function(e,t){var n;t=t||{};var a=e&&e.mobilePhoneNumber||this.get("mobilePhoneNumber");if(!a||""===a)throw n=new u(u.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber with an empty mobilePhoneNumber."),t&&t.error&&t.error(this,n),n;var i=e&&e.smsCode||this.get("smsCode");if(!i||""===i)throw n=new u(u.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber  with an empty smsCode."),t&&t.error&&t.error(this,n),n;var o=r(t);return o._makeRequest=function(e,t,n,a,r){return l("usersByMobilePhone",null,null,"POST",r)},this.save(e,o).then(function(e){return delete e.attributes.smsCode,delete e._serverData.smsCode,e._handleSaveResult(!0).then(function(){return e})})._thenRunCallbacks(t)},logIn:function(e){var t=this,n=l("login",null,null,"POST",this.toJSON());return n.then(function(e,n,a){var r=t.parse(e,n,a);return t._finishFetch(r),t._handleSaveResult(!0).then(function(){return r.smsCode||delete t.attributes.smsCode,t})})._thenRunCallbacks(e,this)},save:function(t,n,a){var i,o;return s.isObject(t)||s.isNull(t)||s.isUndefined(t)?(i=t,o=n):(i={},i[t]=n,o=a),o=o||{},e.Object.prototype.save.call(this,i,r(o)).then(function(e){return e._handleSaveResult(!1).then(function(){return e})})._thenRunCallbacks(o)},follow:function(e,t){if(!this.id)throw"Please signin.";if(!e)throw"Invalid target user.";var n=s.isString(e)?e:e.id;if(!n)throw"Invalid target user.";var a="users/"+this.id+"/friendship/"+n,r=l(a,null,null,"POST",null,t&&t.sessionToken);return r._thenRunCallbacks(t)},unfollow:function(e,t){if(!this.id)throw"Please signin.";if(!e)throw"Invalid target user.";var n=s.isString(e)?e:e.id;if(!n)throw"Invalid target user.";var a="users/"+this.id+"/friendship/"+n,r=l(a,null,null,"DELETE",null,t&&t.sessionToken);return r._thenRunCallbacks(t)},followerQuery:function(){return e.User.followerQuery(this.id)},followeeQuery:function(){return e.User.followeeQuery(this.id)},fetch:function(){var t=null,n={};return 1===arguments.length?t=arguments[0]:2===arguments.length&&(n=arguments[0],t=arguments[1]),e.Object.prototype.fetch.call(this,n,{}).then(function(e){return e._handleSaveResult(!1).then(function(){return e})})._thenRunCallbacks(t)},updatePassword:function(e,t,n){var a="users/"+this.id+"/updatePassword",r={old_password:e,new_password:t},i=l(a,null,null,"PUT",r,n&&n.sessionToken);return i._thenRunCallbacks(n,this)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},getMobilePhoneNumber:function(){return this.get("mobilePhoneNumber")},setMobilePhoneNumber:function(e,t){return this.set("mobilePhoneNumber",e,t)},setUsername:function(e,t){return this.set("username",e,t)},setPassword:function(e,t){return this.set("password",e,t)},getEmail:function(){return this.get("email")},setEmail:function(e,t){return this.set("email",e,t)},authenticated:function(){return!!this._sessionToken&&!e._config.disableCurrentUser&&e.User.current()&&e.User.current().id===this.id},getSessionToken:function(){return this._sessionToken}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",_authProviders:{},signUp:function(t,n,a,r){a=a||{},a.username=t,a.password=n;var i=e.Object._create("_User");return i.signUp(a,r)},logIn:function(t,n,a){var r=e.Object._create("_User");return r._finishFetch({username:t,password:n}),r.logIn(a)},become:function(t,n){n=n||{};var a=e.Object._create("_User");return l("users","me",null,"GET",{useMasterKey:n.useMasterKey,session_token:t}).then(function(e,t,n){var r=a.parse(e,t,n);return a._finishFetch(r),a._handleSaveResult(!0).then(function(){return a})})._thenRunCallbacks(n,a)},logInWithMobilePhoneSmsCode:function(t,n,a){var r=e.Object._create("_User");return r._finishFetch({mobilePhoneNumber:t,smsCode:n}),r.logIn(a)},signUpOrlogInWithMobilePhone:function(t,n,a,r){a=a||{},a.mobilePhoneNumber=t,a.smsCode=n;var i=e.Object._create("_User");return i.signUpOrlogInWithMobilePhone(a,r)},logInWithMobilePhone:function(t,n,a){var r=e.Object._create("_User");return r._finishFetch({mobilePhoneNumber:t,password:n}),r.logIn(a)},signUpOrlogInWithAuthData:function(t,n,a){return e.User._logInWith(n,{authData:t})._thenRunCallbacks(a)},associateWithAuthData:function(e,t,n){return e._linkWith(t,{authData:n})},logOut:function(){return e._config.disableCurrentUser?(console.warn("AV.User.current() was disabled in multi-user environment, call logOut() from user object instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),e.Promise.as(null)):(null!==e.User._currentUser&&(e.User._currentUser._logOutWithAll(),e.User._currentUser._isCurrentUser=!1),e.User._currentUserMatchesDisk=!0,e.User._currentUser=null,e.localStorage.removeItemAsync(e._getAVPath(e.User._CURRENT_USER_KEY)))},followerQuery:function(t){if(!t||!s.isString(t))throw"Invalid user object id.";var n=new e.FriendShipQuery("_Follower");return n._friendshipTag="follower",n.equalTo("user",e.Object.createWithoutData("_User",t)),n},followeeQuery:function(t){if(!t||!s.isString(t))throw"Invalid user object id.";var n=new e.FriendShipQuery("_Followee");return n._friendshipTag="followee",n.equalTo("user",e.Object.createWithoutData("_User",t)),n},requestPasswordReset:function(e,t){var n={email:e},a=l("requestPasswordReset",null,null,"POST",n);return a._thenRunCallbacks(t)},requestEmailVerify:function(e,t){var n={email:e},a=l("requestEmailVerify",null,null,"POST",n);return a._thenRunCallbacks(t)},requestEmailVerfiy:function(e,t){var n={email:e},a=l("requestEmailVerify",null,null,"POST",n);return a._thenRunCallbacks(t)},requestMobilePhoneVerify:function(e,t){var n={mobilePhoneNumber:e},a=l("requestMobilePhoneVerify",null,null,"POST",n);return a._thenRunCallbacks(t)},requestPasswordResetBySmsCode:function(e,t){var n={mobilePhoneNumber:e},a=l("requestPasswordResetBySmsCode",null,null,"POST",n);return a._thenRunCallbacks(t)},resetPasswordBySmsCode:function(e,t,n){var a={password:t},r=l("resetPasswordBySmsCode",null,e,"PUT",a);return r._thenRunCallbacks(n)},verifyMobilePhone:function(e,t){var n=l("verifyMobilePhone",null,e,"POST",null);return n._thenRunCallbacks(t)},requestLoginSmsCode:function(e,t){var n={mobilePhoneNumber:e},a=l("requestLoginSmsCode",null,null,"POST",n);return a._thenRunCallbacks(t)},currentAsync:function(){return e._config.disableCurrentUser?(console.warn("AV.User.currentAsync() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),e.Promise.as(null)):e.User._currentUser?e.Promise.as(e.User._currentUser):e.User._currentUserMatchesDisk?e.Promise.as(e.User._currentUser):e.localStorage.getItemAsync(e._getAVPath(e.User._CURRENT_USER_KEY)).then(function(t){if(!t)return null;e.User._currentUserMatchesDisk=!0,e.User._currentUser=e.Object._create("_User"),e.User._currentUser._isCurrentUser=!0;var n=JSON.parse(t);return e.User._currentUser.id=n._id,delete n._id,e.User._currentUser._sessionToken=n._sessionToken,delete n._sessionToken,e.User._currentUser._finishFetch(n),e.User._currentUser._synchronizeAllAuthData(),e.User._currentUser._refreshCache(),e.User._currentUser._opSetQueue=[{}],e.User._currentUser})},current:function(){if(e._config.disableCurrentUser)return console.warn("AV.User.current() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),null;if(e.User._currentUser)return e.User._currentUser;if(e.User._currentUserMatchesDisk)return e.User._currentUser;e.User._currentUserMatchesDisk=!0;var t=e.localStorage.getItem(e._getAVPath(e.User._CURRENT_USER_KEY));if(!t)return null;e.User._currentUser=e.Object._create("_User"),e.User._currentUser._isCurrentUser=!0;var n=JSON.parse(t);return e.User._currentUser.id=n._id,delete n._id,e.User._currentUser._sessionToken=n._sessionToken,delete n._sessionToken,e.User._currentUser._finishFetch(n),e.User._currentUser._synchronizeAllAuthData(),e.User._currentUser._refreshCache(),e.User._currentUser._opSetQueue=[{}],e.User._currentUser},_saveCurrentUser:function(t){var n;return n=e.User._currentUser!==t?e.User.logOut():e.Promise.as(),n.then(function(){t._isCurrentUser=!0,e.User._currentUser=t;var n=t.toJSON();return n._id=t.id,n._sessionToken=t._sessionToken,e.localStorage.setItemAsync(e._getAVPath(e.User._CURRENT_USER_KEY),(0,o["default"])(n)).then(function(){e.User._currentUserMatchesDisk=!0})})},_registerAuthenticationProvider:function(t){e.User._authProviders[t.getAuthType()]=t,!e._config.disableCurrentUser&&e.User.current()&&e.User.current()._synchronizeAuthData(t.getAuthType())},_logInWith:function(t,n){var a=e.Object._create("_User");return a._linkWith(t,n)}})}},function(e,t){"use strict";e.exports="js1.4.0"},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.drag=t.activeLink=t.active=void 0;var r=n(45),i=a(r);n(346),n(233);var o=n(7),s=a(o);t.active={bind:function(){var e=this;this.vm.$nextTick(function(){var t=e,n=s["default"].getParentElements(t);n[1].className=" active",t.el.addEventListener("click",function(){s["default"].resetActiveClass(n),s["default"].addClassToParent(t)})})}},t.activeLink={priority:800,update:function(e){var t=this;this.vm.$nextTick(function(){var n=t,a=t.el.getAttribute("href"),r="#"+e.path,o=r.match(/#\/\b[\w-]+\b/);if(o&&a===o[0]){var u=(0,i["default"])(".active");u.removeClass("active"),s["default"].addClassToParent(n)}})}},t.drag={bind:function(){var e=this;this.vm.$nextTick(function(){function t(e){a.vm.$emit("drag-event",e)}function n(e){a.vm.$emit("rotate-event",e)}var a=e;if(a.el){var r=/[+-]?\d+(\.\d+)?/g,o=a.el.querySelector(".marker .fa-circle"),s=o.style.transform,u=s.match(r).map(function(e){return parseFloat(e)});a.vm&&((0,i["default"])(a.el).draggable({containment:(0,i["default"])(a.el.parentElement),drag:t}),(0,i["default"])(o).rotatable({containment:(0,i["default"])(a.el.parentElement),angle:u[0],rotate:n}))}})}}},function(e,t){"use strict";function n(e){return e.replace(/([A-Z])/g,function(e){return" "+e.toLowerCase()}).replace(/^.?/,function(e){return e.toUpperCase()})}function a(e){if(e)return e.match(/\/([^\/]*)$/)[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.camelCaseToText=n,t.urlPathToFileName=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={en:{shareCodes:"Panocodes",building:"Virtual tour",buildings:"Virtual tours",panorama:"Panorama",panoramas:"Panoramas",panoName:"Name",myProjects:"Virtual tours",newProject:"New virtual tour",sharingHistory:"Sharing history",user:"User",all:"All",livingroom:"Living room",diningroom:"Dining room",kitchen:"Kitchen",bedroom:"Bedroom",study:"Study",bathroom:"Bathroom",toilet:"Toilet",garden:"Garden",garage:"Garage",outdoors:"Outdoors",other:"Other",email:"Email",emails:"Emails",username:"Username",password:"Password",changePassword:"Change password",confirmPassword:"Confirm password",oldPassword:"Old password",newPassword:"New password",confirmNewPassword:"Confirm new password",passwordError:"Please enter your correct old password.",passwordUpdated:"Your password has been updated.",logIn:"Log in",logInWithFacebook:"Log in with Facebook",signUpWithFacebook:"Sign up with Facebook",logOut:"Log out",logInFailed:"Email and password don't match.",signUp:"Sign up",signUpSucceded:"Sign up success.",signUpFailed:"Sign up failed.",forgotPass:"Forgot your account's password? Enter your email address and we'll send you a recovery link.",forgotPassLink:"Forgot password?",forgotPassSucceded:"The recovery link has been sent to your email.",forgotPassFailed:"Invalid email address",recoveryEmail:"Send recovery email",emailVerified:"Your email is now verified!",emailNotVerified:"Failed to verify email!",emailVerifiedButton:"Access the LiveTour Creator now",resetPass:"Reset Password",resetDirection:"Reset direction",passMatchFailed:"Password and confirm password must match.",newPassMatchFailed:"New password and confirm new password must match.",resetPassSucceded:"Your password has been reset!",resetPassFailed:"Password reset failed.",createBuildingFailed:"Building create failed",createPanoramaFailed:"Panorama create failed",creatingBuilding:"Creating virtual tour, please wait...",creatingPanorama:"Creating panorama, please wait...",noChanges:"No changes to update.",noBuildings:"No projects to show. Please create one or more projects.",orderBy:"Order by",filterBy:"Filter by",name:"Name",yourName:"Name",justName:"Name",anonymous:"Anonymous",company:"Company",yourCompany:"Your company",country:"Country",selectCountry:"Please choose your country",photo:"Photo",profilePhoto:"Profile photo",phone:"Phone",yourPhone:"Mobile",number:"Panocode",date:"Date",price:"Price",title:"Title",description:"Description",category:"Category",floorplan:"Floor plan",floorplanHint:"The image should be square and not larger than 1MB.",panoramaHint:"Only JPEG files are allowed.",floorplanError:"Please selected a file smaller than 1MB.",uploadFloorplan:"Please upload a floorplan.",photoError:"Please selected a file smaller than 1MB.",panoramaError:"Please selected a file smaller than 20MB.",panoramaInvalid:"Please selected a JPEG file.",photoRequired:"Please select a file.",requiredError:"Please enter your ",minLengthError:"Please enter at least {n} characters",maxLengthError:"Please enter within {n} characters",invalidError:"Please enter a valid ",buildingCount:"Virtual tour count",categoryCount:"Category count",panoramaCount:"Panorama count",browse:"Browse",viewer:"Viewer",viewerLink:"Virtual tour",update:"Update",updateDetails:"Update details",updateFloorplan:"Update floorplan",updateDirection:"Update direction",updateMarker:"Apply changes",updateAllMarkers:"Update all markers","delete":"Delete",deleteBuilding:"Delete building",deletePanorama:"Delete panorama",confirm:"Confirm",confirmDelete:"Confirm delete",confirmShare:"Confirm share",confirmDeleteAppMarker:"Are you sure you want to delete this marker?",confirmDeleteBuilding:"Are you sure you want to delete this virtual tour?",confirmDeletePanorama:"Are you sure you want to delete this panorama?",confirmSharePanorama:"Are you sure you want to share this panorama?",confirmLeave:"You have unsaved changes on this page. Are you sure you want to leave?",userUpdated:"User profile updated!",buildingUpdated:"Virtual tour updated!",buildingDeleted:"Virtual tour deleted!",buildingSynced:"Virtual tour synced!",buildingSyncedError:"Virtual tour failed to sync.",panoramaUpdated:"Panorama updated!",panoramaSaved:"Panorama saved!",panoramaDeleted:"Panorama deleted!",lastPanoramaError:"Sorry, you can't delete the last panorama.",close:"Close",cancel:"Cancel",current:"Current",target:"Target",panoramaEditor:"Floor plan editor",panoramaEditorTooltip:"Rotate the marker until its <strong>direction</strong> in the floorplan <strong>matches</strong> what the picture shows.",panoramaList:"Panorama list",panoramaPreview:"Panorama preview",panoramaInstruction:"Rotate the panorama and click Update to set a default direction.",noLink:"No link",noItems:"No items to display.",invalidPanorama:"Please upload a panorama.",warning:"Warning",web:"Panorama",url:"URL",authWithVRTour:"Authenticate with VR Tour",syncToVRTour:"Sync to VR Tour",authWithVRTourFailed:"Authentication with VR Tour failed.",errorOccurred:"An error has occured, please try again later.",myProfile:"My profile",commentsManager:"Comments manager",confirmDeleteComment:"Are you sure you want to delete this comment?",commentDeleted:"Comment deleted!",shareBuilding:"Share virtual tour",manageAgents:"Manage agents",resizing:"Resizing panorama",resizingInstruction:"This process may take some time depending on the size of the photo.",resizingFailed:"Failed to resize panorama",resizingFailedInstruction:"Please try again.",markerEditor:"Marker editor",markerUpdated:"Marker updated!",markersUpdated:"Markers updated!",markerDeleted:"Marker deleted!",positionMarker:"Please position your marker.",rotatePanorama:"Please set a default panorama rotation.",selectMarker:"Please add or select a marker.",selectCurrentPanorama:"Please select a panorama.",selectTargetPanorama:"Please select a target panorama.",addStandpoint:"Add standpoint",addTag:"Add tag",addLink:"Add link",switchCurrentPanorama:"Switch current panorama",loadingMessage:"Loading image, please wait.",enterTagDetails:"Please enter the tag's details.",enterLinkDetails:"Please enter the link's details",addNew:"Add new",backToBuilding:"Back to building",yes:"Yes",no:"No",action:"Action",isDefault:"Default",buyNow:"Buy now",viewAtHome:"View at home",learnMore:"Learn more",selectLink:"Please select a link",branded:"Branded",noBranded:"Non-branded",none:"None",copyright:"Copyright  {y} iStaging Corp. All rights reserved.",period:"."},zh:{shareCodes:"",builing:"",buildings:"",panorama:"",panoramas:"",panoName:"",myProjects:"",newProject:"",sharingHistory:"",user:"",all:"",livingroom:"",diningroom:"",kitchen:"",bedroom:"1",study:"2",bathroom:"3",toilet:"",garden:"",garage:"/",outdoors:"",other:"",email:"",emails:"",username:"",password:"",confirmPassword:"",changePassword:"",oldPassword:"",newPassword:"",confirmNewPassword:"",passwordError:"",passwordUpdated:"",logIn:"",logInWithFacebook:"Facebook",signUpWithFacebook:"Facebook",logOut:"",logInFailed:"",signUp:"",signUpSucceded:"",signUpFailed:"",forgotPass:"",forgotPassLink:"",forgotPassFailed:"",forgotPassSucceded:"",recoveryEmail:"",emailVerified:"",emailNotVerified:"",emailVerifiedButton:"",resetPass:"",resetDirection:"",passMatchFailed:"",newPassMatchFailed:"",resetPassSucceded:"",resetPassFailed:"",createBuildingFailed:"",createPanoramaFailed:"",creatingBuilding:"...",creatingPanorama:"...",noChanges:"",noBuildings:"",orderBy:"",filterBy:"",name:"",yourName:"",justName:"",anonymous:"",company:"",yourCompany:"",country:"",selectCountry:"",photo:"",profilePhoto:"",phone:"",yourPhone:"",number:"",date:"",title:"",price:"",description:"",category:"",floorplan:"",floorplanHint:"1MB",panoramaHint:"JPEG",floorplanError:"1MB",uploadFloorplan:"",photoError:"1MB",panoramaError:"20MB",panoramaInvalid:"JPEG",photoRequired:"",requiredError:"",minLengthError:"{n}",maxLengthError:"{n}",invalidError:"",buildingCount:"",categoryCount:"",panoramaCount:"",browse:"",viewer:"",viewerLink:"",update:"",updateDetails:"",updateFloorplan:"",updateDirection:"",updateMarker:"",updateAllMarkers:"","delete":"",deleteBuilding:"",deletePanorama:"",confirm:"",confirmDelete:"",confirmShare:"",confirmDeleteAppMarker:"?",confirmDeleteBuilding:"?",confirmDeletePanorama:"?",confirmSharePanorama:"?",userUpdated:"",buildingUpdated:"",buildingDeleted:"",buildingSynced:"",buildingSyncedError:"",panoramaUpdated:"!",panoramaSaved:"!",panoramaDeleted:"!",lastPanoramaError:"",close:"",cancel:"",current:"",target:"",panoramaEditor:"",panoramaEditorTooltip:"<strong></strong><strong></strong>",panoramaList:"",panoramaPreview:"",panoramaInstruction:"",noLink:"",noItems:"",invalidPanorama:" ",warning:"",web:"",url:"",authWithVRTour:"VR Tour",syncToVRTour:'""',authWithVRTourFailed:"VR",errorOccurred:"",myProfile:"",commentsManager:"",confirmDeleteComment:"?",commentDeleted:"!",shareBuilding:"",manageAgents:"",resizing:"",resizingInstruction:"",resizingFailed:"",resizingFailedInstruction:"",markerEditor:"",markerUpdated:"",markersUpdated:"",markerDeleted:"",positionMarker:"",rotatePanorama:"",selectMarker:"",selectCurrentPanorama:"",selectTargetPanorama:"",enterTagDetails:"",enterLinkDetails:"",addStandpoint:"",addTag:"",addLink:"",switchCurrentPanorama:"",loadingMessage:"",addNew:"",backToBuilding:"",yes:"",no:"",action:"",isDefault:"",buyNow:"",viewAtHome:"",learnMore:"",selectLink:"",branded:"",noBranded:"",none:"",copyright:"Copyright  {y} iStaging Corp. ",period:""}};t["default"]=n},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(45),i=a(r);!function(e,t){e.widget("ui.rotatable",e.ui.mouse,{widgetEventPrefix:"rotate",options:{handle:!1,angle:!1,wheelRotate:!0,snap:!1,step:22.5,handleOffset:{top:0,left:0},rotationCenterX:!1,rotationCenterY:!1,start:null,rotate:null,stop:null},rotationCenterX:function(e){return e===t?this.options.rotationCenterX:void(this.options.rotationCenterX=e)},rotationCenterY:function(e){return e===t?this.options.rotationCenterY:void(this.options.rotationCenterY=e)},handle:function(e){return e===t?this.options.handle:void(this.options.handle=e)},angle:function(e){return e===t?this.options.angle:(this.options.angle=e,this.elementCurrentAngle=e,void this.performRotation(this.options.angle))},_create:function(){var t;this.options.handle?t=this.options.handle:(t=e(document.createElement("div")),t.addClass("ui-rotatable-handle"),t.append('<i class="fa fa-rotate-left"></i>')),this.listeners={rotateElement:e.proxy(this.rotateElement,this),startRotate:e.proxy(this.startRotate,this),stopRotate:e.proxy(this.stopRotate,this),wheelRotate:e.proxy(this.wheelRotate,this)},this.options.wheelRotate&&this.element.bind("wheel",this.listeners.wheelRotate),t.draggable({helper:"clone",start:this.dragStart,handle:t}),t.bind("mousedown",this.listeners.startRotate),t.closest(this.element).length||t.appendTo(this.element),0!=this.options.angle?(this.elementCurrentAngle=this.options.angle,this.performRotation(this.elementCurrentAngle)):this.elementCurrentAngle=0},_destroy:function(){this.element.removeClass("ui-rotatable"),this.element.find(".ui-rotatable-handle").remove(),this.options.wheelRotate&&this.element.unbind("wheel",this.listeners.wheelRotate)},performRotation:function(e){this.element.css("transform-origin",this.options.rotationCenterX+"% "+this.options.rotationCenterY+"%"),this.element.css("-ms-transform-origin",this.options.rotationCenterX+"% "+this.options.rotationCenterY+"%"),this.element.css("-webkit-transform-origin",this.options.rotationCenterX+"% "+this.options.rotationCenterY+"%"),this.element.css("transform","rotate("+e+"rad)"),this.element.css("-moz-transform","rotate("+e+"rad)"),this.element.css("-webkit-transform","rotate("+e+"rad)"),this.element.css("-o-transform","rotate("+e+"rad)")},getElementOffset:function(){this.performRotation(0);var e=this.element.offset();return this.performRotation(this.elementCurrentAngle),e},getElementCenter:function(){var e=this.getElementOffset();if(this.options.rotationCenterX===!1)var t=e.left+this.element.width()/2,n=e.top+this.element.height()/2;else var t=e.left+this.element.width()/100*this.options.rotationCenterX,n=e.top+this.element.height()/100*this.options.rotationCenterY;return Array(t,n)},dragStart:function(e){if(this.element)return!1},startRotate:function(t){var n=this.getElementCenter(),a=t.pageX-this.options.handleOffset.left-n[0],r=t.pageY-this.options.handleOffset.top-n[1];return this.mouseStartAngle=Math.atan2(r,a),this.elementStartAngle=this.elementCurrentAngle,this.hasRotated=!1,this._propagate("start",t),e(document).bind("mousemove",this.listeners.rotateElement),e(document).bind("mouseup",this.listeners.stopRotate),!1},rotateElement:function(e){if(!this.element||this.element.disabled)return!1;var t=this.getRotateAngle(e),n=this.elementCurrentAngle;if(this.elementCurrentAngle=t,this._propagate("rotate",e),this._propagate("rotate",e)===!1)return this.elementCurrentAngle=n,!1;var a=this.ui();return this._trigger("rotate",e,a)===!1?(this.elementCurrentAngle=n,!1):(a.angle.current!=t&&(t=a.angle.current,this.elementCurrentAngle=t),this.performRotation(t),n!=t&&(this.hasRotated=!0),!1)},stopRotate:function(t){if(this.element&&!this.element.disabled)return e(document).unbind("mousemove",this.listeners.rotateElement),e(document).unbind("mouseup",this.listeners.stopRotate),this.elementStopAngle=this.elementCurrentAngle,this._propagate("stop",t),setTimeout(function(){this.element=!1},10),!1},getRotateAngle:function(e){var t=this.getElementCenter(),n=e.pageX-this.options.handleOffset.left-t[0],a=e.pageY-this.options.handleOffset.top-t[1],r=Math.atan2(a,n),i=r-this.mouseStartAngle+this.elementStartAngle;return(this.options.snap||e.shiftKey)&&(i=this._calculateSnap(i)),i},wheelRotate:function(e){var t=Math.round(e.originalEvent.deltaY/10)*Math.PI/180;(this.options.snap||e.shiftKey)&&(t=this._calculateSnap(t)),t=this.elementCurrentAngle+t,this.angle(t),this._trigger("rotate",e,this.ui())},_calculateSnap:function(e){var t=e/Math.PI*180;return t=Math.round(t/this.options.step)*this.options.step,t*Math.PI/180},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"rotate"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{api:this,element:this.element,angle:{start:this.elementStartAngle,current:this.elementCurrentAngle,stop:this.elementStopAngle}}}})}(i["default"])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(71),i=a(r),o=n(7),s=a(o),u=n(421),l=a(u),c=n(413),d=a(c),f=n(6),h=a(f),p=n(14),m=a(p),g=n(2),v=n(3);t["default"]={store:i["default"],components:{Navbar:l["default"],IFooter:d["default"],Alert:h["default"]},vuex:{getters:{user:g.user,buildings:g.buildings,alertParams:g.alertParams},actions:{fetchBuildings:v.fetchBuildings,fetchShareCodes:v.fetchShareCodes,checkBuildings:v.checkBuildings,checkShareCodes:v.checkShareCodes,setUserInfo:v.setUserInfo,setUserLeanAuth:v.setUserLeanAuth,setProfilePhoto:v.setProfilePhoto,setAlertParams:v.setAlertParams,setIsLoading:v.setIsLoading}},created:function(){var e=s["default"].getBrowserLang();s["default"].setLang(e)},ready:function(){var e=this;m["default"].checkAuth(),m["default"].checkLeanAuth(function(t){e.setUserLeanAuth(t)}),m["default"].user.authenticated&&(this.setUserInfo(m["default"].user),this.fetchBuildings(function(t){e.checkBuildings(),t&&(console.log("update building failed E: ",t),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0}))}),this.setProfilePhoto(),"/"===this.$route.path&&this.$route.router.go("/buildings"))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=n(3);t["default"]={vuex:{getters:{alertParams:a.alertParams},actions:{setAlertParams:r.setAlertParams}},watch:{alertParams:function(){var e=this;this.alertParams.show&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.setAlertParams({type:"",text:"",show:!1})},2e3))}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=a(r);t["default"]={components:{Loading:i["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(347),i=a(r),o=n(2),s=n(3);t["default"]={props:{fields:Array,object:Object,hasDelete:Boolean,hasPreviewPhoto:Boolean,isInModal:Boolean,isInEditor:Boolean,btnText:String,delText:String,categories:Array},vuex:{getters:{hasFieldChanged:o.hasFieldChanged,isLoading:o.isLoading},actions:{setFieldChanged:s.setFieldChanged,unsetFieldChanged:s.unsetFieldChanged}},data:function(){return{formSubmitted:!1,formInvalid:!1,requiredFields:[],minLengthFields:[],maxLengthFields:[],matchesFields:[]}},computed:{countries:function(){var e=i["default"].countries,t=[];for(var n in e)t.push({name:e[n].name,"native":e[n]["native"]?e[n]["native"]:e[n].name});return t}},ready:function(){var e=this;this.fields.forEach(function(t){t.required&&e.requiredFields.push(t.name),t.minLength&&e.minLengthFields.push(t),t.maxLength&&e.maxLengthFields.push(t),t.matches&&e.matchesFields.push(t)})},methods:{getFilenameFromUrl:function(e){if(e){var t=e.match(/([^\/]+)\.\w+(?=\?|$)/)[0];return t}},setPlaceholderValue:function(e){return this.$options.filters.urlPathToFileName(e)},onChange:function(){this.$emit("on-change")},onDelete:function(){this.$emit("on-delete")},onSubmit:function(){this.validate(),this.formSubmitted=!0,this.formInvalid||(this.$emit("on-submit"),
this.unsetFieldChanged())},setLabelColumns:function(){return this.isInModal?"col-sm-3":"col-sm-2"},setFieldColumns:function(){return this.isInModal?"col-sm-9":"col-sm-10"},showValidationClasses:function(e,t){return{"has-error":this.isKeyRequired(e)&&(this.isEmpty(t)||this.isTooShort(t,this.findMinLength(e))||this.isTooLong(t,this.findMaxLength(e))||this.isUnmatched(t,this.findMatches(e)))&&this.formSubmitted,required:this.isKeyRequired(e)}},findField:function(e,t){var n=null;return this.fields.filter(function(t){t.name===e&&(n=t)}),n?n[t]:""},findFieldName:function(e){return this.findField(e,"name")},findCustomText:function(e){return this.findField(e,"text")},findOrder:function(e){return this.findField(e,"order")},findRadioFields:function(e){return this.findField(e,"radioFields")},isKeyRequired:function(e){return this.requiredFields.indexOf(e)>-1},isEmpty:function(e){return!e},isTooShort:function(e,t){if(t&&e)return e.length<t},isTooLong:function(e,t){if(t&&e)return e.length>t},isUnmatched:function(e,t){if(t){var n=new RegExp(t);return!n.test(e)}},findMinLength:function(e){if(this.minLengthFields){var t=null;return this.minLengthFields.filter(function(n){n.name===e&&(t=n.minLength)}),t}},findMaxLength:function(e){if(this.maxLengthFields){var t=null;return this.maxLengthFields.filter(function(n){n.name===e&&(t=n.maxLength)}),t}},findMatches:function(e){if(this.matchesFields){var t=null;return this.matchesFields.filter(function(n){n.name===e&&(t=n.matches)}),t}},validate:function(){for(var e in this.object){var t=this.object[e];if(this.isKeyRequired(e)&&this.isEmpty(t)||this.isTooShort(t,this.findMinLength(e))||this.isTooLong(t,this.findMaxLength(e))||this.isUnmatched(t,this.findMatches(e))){this.formInvalid=!0;break}this.formInvalid=!1}},validateOnChange:function(e,t){this.setFieldChanged(),this.validate()},isInFields:function(e){var t=[];return this.fields.forEach(function(e){return t.push(e.name)}),!t||t.indexOf(e)>-1},getPropType:function(e){return this.fields.map(function(t){if(t.name===e)return t.type}).join("")},isTextField:function(e){var t=this.getPropType(e),n=["text","password","email"];return"url"!==e?(console.log("not url"),n.indexOf(t)>-1):(console.log("is url"),console.log(n.indexOf(t)>-1&&this.object.action>0),n.indexOf(t)>-1&&this.object.action>0)},isNumberField:function(e){var t=this.getPropType(e),n=["number"];return n.indexOf(t)>-1},isBooleanField:function(e){var t=this.getPropType(e),n=["radio"];return n.indexOf(t)>-1},isMarkerBooleanField:function(e){var t=this.getPropType(e),n=["radioMarker"];return n.indexOf(t)>-1},isTextareaField:function(e){var t=this.getPropType(e),n=["textarea"];return n.indexOf(t)>-1},isFirstAction:function(e){return 0===e},isSecondAction:function(e){return 1===e}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"IFooter",computed:{currentYear:function(){return(new Date).getFullYear()}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{key:String,value:{required:!0,twoWay:!0},fields:Array},methods:{uncheckAll:function(){var e=document.getElementsByClassName("list-checkbox");Array.prototype.forEach.call(e,function(e){console.log(e)})}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{key:String,value:{required:!0},fields:Array},methods:{keyHasTrans:function(e){var t=this.findField(e,"hasTrans");return t},isNonFalsy:function(e){return!!e||(0===e||!!e&&void 0)},findField:function(e,t){var n=null;return this.fields.filter(function(t){t.name===e&&(n=t)}),n?n[t]:""}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=n(3);t["default"]={props:{fields:Array,hasThumbnails:Boolean,sortable:Boolean,defaultSortKey:String,defaultSortOrder:Number},vuex:{getters:{sort:a.sort},actions:{setSort:r.setSort,setStartSort:r.setStartSort}},computed:{sortKey:function(){return this.sort.key},sortOrder:function(){return this.sort.order},caretClass:function(){return this.sortOrder>0?"fa-caret-up":"fa-caret-down"}},ready:function(){this.setStartSort(this.defaultSortKey,this.defaultSortOrder)}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=a(r);t["default"]={props:{value:{required:!0},fields:Array,object:Object},computed:{parentComponent:function o(){var o=this.$parent.$parent.$options.name;return i["default"].PascalToParamCase(o)}},methods:{isNestedRoute:function(e){var t=e.params,n=t.id||t.shareCodeId||t.buildingId||t.panoramaId;return!!n}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{key:String,value:{required:!0},fields:Array,object:Object},methods:{isObject:function(e){return e.constructor===Object},isString:function(e){return e.constructor===String}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=a(r);t["default"]={props:{value:{required:!0},fields:Array,object:Object},computed:{parentComponent:function o(){var o=this.$parent.$parent.$options.name;return i["default"].PascalToParamCase(o)}},methods:{getThumbnail:function(e){if(e.constructor===Array){var t=e.filter(function(e){return e.thumbnail||e.thumbnail});return t[0].thumbnail}return e},isNestedRoute:function(e){var t=e.params,n=t.id||t.shareCodeId||t.buildingId||t.panoramaId;return!!n}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{objectName:String},data:function(){return{defaultThumb:n(361)}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=a(r),o=n(5),s=a(o),u=n(2),l=n(3),c=n(15),d=a(c),f=n(419),h=a(f),p=n(420),m=a(p),g=n(417),v=a(g),b=n(415),A=a(b),y=n(418),_=a(y),P=n(416),w=a(P),x=n(414),C=a(x);t["default"]={name:"List",components:{Thumbnail:h["default"],ThumbnailError:m["default"],Name:v["default"],Detail:A["default"],Tags:_["default"],Labels:w["default"],Checkbox:C["default"],Modal:d["default"]},props:{className:Array,sortedClassName:Array,objectName:String,actions:Object,fields:Array,hasThumbnails:Boolean,defaultSortKey:String,defaultSortOrder:Number,sortable:Boolean},vuex:{getters:{sort:u.sort,user:u.user,activeModal:u.activeModal},actions:{setIsLoading:l.setIsLoading,setAlertParams:l.setAlertParams,fetchBuildings:l.fetchBuildings,setSortedPanoramas:l.setSortedPanoramas,setHasSortTriggered:l.setHasSortTriggered,assignIndexToPanoramas:l.assignIndexToPanoramas,setActiveModal:l.setActiveModal}},data:function(){return{tooltipVisible:!1,options:{handle:".list-grip",draggable:".list-draggable",onEnd:this.onSortEnd}}},computed:{sortKey:function(){if(!this.sortable)return this.sort.key},sortOrder:function(){if(!this.sortable)return this.sort.order},categories:function(){return s["default"].categories}},watch:{className:function(e){e.length>0&&this.setSortedPanoramas(e)}},methods:{buildingShareCodeNoBrand:function(e){return e.shareCode+"?ui=true"},showBrandModal:function(e,t){"United States"===this.user.country&&(t.preventDefault(),this.setActiveModal(e))},onSortEnd:function(e){var t=e.oldIndex-1,n=e.newIndex-1;this.assignIndexToPanoramas(this.sortedClassName,t,n),this.setHasSortTriggered(!0)},isKeyInFields:function(e){var t=null;return this.fields.filter(function(n){n.name===e&&(t=n)}),t},findField:function(e,t){var n=null;return this.fields.filter(function(t){t.name===e&&(n=t)}),n?n[t]:""},setColumnsByKey:function(e){var t=this.findField(e,"column");return"col-md-"+t},keyIsThumbnail:function(e){var t=this.findField(e,"isThumbnail");return t},keyHasLink:function(e){var t=this.findField(e,"hasLink");return t},keyIsArray:function(e){var t=this.findField(e,"isArray");return t},keyIsDetail:function(e){var t=this.findField(e,"isDetail");return t},keyIsCheckbox:function(e){var t=this.findField(e,"isCheckbox");return t},hasNoCategories:function(e){if(this.hasThumbnails){for(var t in e){for(var n=e[t],a=0;a<n.length;a++){var r=n[a];if(r.thumbnail&&""!==r.thumbnail)return!1}if("thumbnail"===t&&""!==n)return!1}return!0}},getPropType:function(e){return this.fields.map(function(t){if(t.name===e)return t.type}).join("")},isValidValue:function(e,t,n){if("thumbnail"===e&&""===t)return!1;if("panoramas"===e&&0===t.length)return!1;if("panoramas"===e&&0!==t.length){var a=t.filter(function(e){return e.thumbnail&&""!==e.thumbnail}),r=i["default"].getObjsWithThumbnails(e,n);if(0===a.length)return!1;if(a[0]!==r[0])return!1}return!0},updatePanoramas:function(){var e=this,t={panos:this.className};console.log("PAY: ",t),t.panos.length>0?(this.setIsLoading(!0),s["default"].bulkUpdatePanorama(t).then(function(t){e.fetchBuildings(),e.setIsLoading(!1),e.setAlertParams({type:"success",text:"panoramaUpdated",show:!0})})):(this.setIsLoading(!1),this.setAlertParams({type:"warning",text:"noChanges",show:!0}))}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{color:String,noOverlay:Boolean},computed:{colorClass:function(){return"brand"===this.color?"sk-circle-brand":"white"===this.color?"sk-circle-white":void 0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3);t["default"]={props:{modalTitle:String,postSave:Function,postParam:Object,closeOnComplete:Boolean,noConfirm:Boolean,noClose:Boolean},vuex:{actions:{setActiveModal:a.setActiveModal}},data:function(){return{isVisible:!0}},ready:function(){var e=this;document.addEventListener("keydown",function(t){e.isVisible&&27===t.keyCode&&e.close()})},methods:{close:function(){this.isVisible=!0,this.setActiveModal("")},save:function(){var e=this;if(this.postSave){var t=this.postParam||{};this.postSave(t).then(function(t){e.closeOnComplete&&e.close()})}else this.close()}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=a(r),o=n(1),s=a(o),u=n(14),l=a(u),c=n(5),d=a(c),f=n(15),h=a(f),p=n(10),m=a(p),g=n(2),v=n(3);t["default"]={vuex:{getters:{user:g.user,authInfo:g.authInfo,activeModal:g.activeModal,activeLoading:g.activeLoading,profilePhoto:g.profilePhoto,isLoading:g.isLoading},actions:{resetAll:v.resetAll,fetchBuildings:v.fetchBuildings,setActiveModal:v.setActiveModal,clearActiveModal:v.clearActiveModal,addBuildingToState:v.addBuildingToState,setIsNewBuilding:v.setIsNewBuilding,setIsLoading:v.setIsLoading}},components:{Modal:h["default"],Loading:m["default"]},data:function(){return{logoImage:n(362),links:[{name:"myProjects",path:"#/buildings"},{name:"newProject",method:this.newBuilding}],alert:null,isFormLoading:!1}},methods:{logout:function(){l["default"].logout("/"),this.resetAll()},isEmptyObj:function(e){return i["default"].isEmpty(e)},newBuilding:function(){var e=this;this.setActiveModal("creatingBuilding"),this.setIsLoading(!0),d["default"].createBlankBuilding().then(function(t){var n=t.data.objectId,a=t.data;a.shareCode=a.sharecode,a.shareCode=d["default"].viewerURL+"#!/"+a.shareCode,delete a.sharecode,e.renameBuildingProps(a),e.addBuildingToState(a),e.clearActiveModal(),e.setIsLoading(!1),e.setIsNewBuilding(!0),e.$route.router.go("/buildings/"+n)},function(t){console.log("Error:",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0}),e.clearActiveModal()})},shouldNotHide:function(e){return"admin"!==this.user.role||"myProfile"!==e.name},renameBuildingProps:function(e){e.date=(0,s["default"])(e.updatedAt).format("YYYY/MM/DD"),e.id=e.objectId,e.panoramas=[],delete e.objectId,delete e.createdAt,delete e.updatedAt}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{fileProgress:Number},computed:{hasProgressStarted:function(){return this.fileProgress!==-1&&void 0!==this.fileProgress}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{url:String}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=a(r),o=n(90),s=a(o),u=n(7),l=a(u),c=n(423),d=a(c),f=n(196),h=a(f),p=n(432),m=a(p),g=n(424),v=a(g),b=n(435),A=a(b),y=n(9),_=a(y),P=n(6),w=a(P),x=n(10),C=a(x),I=n(15),S=a(I),E=n(26),k=a(E),R=n(193),T=a(R),O=n(28),L=a(O),M=n(5),B=a(M),j=n(2),N=n(3);t["default"]={name:"Building",mixins:[L["default"]],components:{FormBuilder:_["default"],PanoramaEditor:h["default"],MarkerEditor:m["default"],CommentsEditor:v["default"],Panoramas:A["default"],Alert:w["default"],Loading:C["default"],Modal:S["default"],Spinner:k["default"],BuildingButtons:d["default"],ProgressBar:T["default"]},vuex:{getters:{buildings:j.buildings,building:j.building,panoramas:j.panoramas,activeModal:j.activeModal,hasFieldChanged:j.hasFieldChanged,isNewBuilding:j.isNewBuilding,isLoading:j.isLoading,isUpdatedPanorama:j.isUpdatedPanorama,isUploadingMarker:j.isUploadingMarker,alertParams:j.alertParams,uploadURLs:j.uploadURLs},actions:{doImageUpload:N.doImageUpload,fetchBuildings:N.fetchBuildings,removeBuildingFromState:N.removeBuildingFromState,fetchBuildingById:N.fetchBuildingById,fetchPanoramasByBuildingId:N.fetchPanoramasByBuildingId,setActiveModal:N.setActiveModal,clearActiveModal:N.clearActiveModal,setIsLoading:N.setIsLoading,setAlertParams:N.setAlertParams,checkBuildings:N.checkBuildings,clearPanoramas:N.clearPanoramas,fetchFirebaseComments:N.fetchFirebaseComments,setIsNewBuilding:N.setIsNewBuilding,setIsUpdatedPanorama:N.setIsUpdatedPanorama,clearBuilding:N.clearBuilding,updateBuildingsState:N.updateBuildingsState}},data:function(){return{buildingId:"",props:[],formFields:[{name:"name",type:"text",required:!0,minLength:2},{name:"description",type:"text"},{name:"viewerLink",type:"text"},{name:"floorplan",type:"file",description:"floorplanHint"}],filename:"",fileProgress:-1,buildingUpdatePayload:Object}},watch:{building:function(e,t){var n=this;if(e){this.fetchPanoramasByBuildingId(this.buildingId);var a=s["default"].database().ref("comments/"+this.building.code);a.on("child_added",function(e){n.fetchFirebaseComments(n.building.code)}),a.on("child_removed",function(e){n.fetchFirebaseComments(n.building.code)})}},uploadURLs:function(e,t){this.isUploadingMarker||(this.buildingUpdatePayload.floorplan=e[0],this.fileProgress=100,this.updateBuildingFileMetadata(this.buildingId,this.buildingUpdatePayload))}},route:{data:function(e){var t=this,n=e.to.params.buildingId;return this.isNewBuilding||this.fetchBuildingById(n,function(e){e&&(console.log("An error ocurred: ",e),t.setAlertParams({type:"danger",text:"errorOccurred",show:!0}))}),this.building&&this.fetchFirebaseComments(this.building.code),this.setIsNewBuilding(!1),this.setIsUpdatedPanorama(!1),{buildingId:n}},deactivate:function(e){this.clearBuilding(),this.clearPanoramas(),e.next()}},computed:{categories:function(){return B["default"].categories}},ready:function(){this.props=this.categories},methods:{hasAtLeastOnePanorama:function(e){return e.panoramas[0]},isArrayWithValue:function(e,t){var n=i["default"].find(t,"thumbnail");if(n&&t instanceof Array)return t.length>0},isEmptyObj:function(e){return i["default"].isEmpty(e)},getObjsWithThumbnails:function(e,t){return l["default"].getObjsWithThumbnails(e,t)},updateBuilding:function(){var e=this,t={name:this.building.name,description:this.building.description,floorplan:this.building.floorplan};this.buildingUpdatePayload=t,this.setIsLoading(!0);var n=l["default"].getFileFromInput("floorplan");n?(this.filename=n.name,this.fileProgress=0,this.doImageUpload(n,[])):B["default"].updateBuilding(this.buildingId,t).then(function(t){console.log("RES:",t),e.fetchBuildingById(e.buildingId,function(t){t&&(console.log("An error ocurred: ",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0}))}),e.updateBuildingsState(e.building),e.setIsLoading(!1),e.setAlertParams({type:"success",text:"buildingUpdated",show:!0})},function(t){console.log("update building failed E: ",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0})})},updateBuildingFileMetadata:function(e,t){var n=this;B["default"].updateBuilding(e,t).then(function(e){n.fetchBuildingById(n.buildingId,function(e){return e?(console.log("An error ocurred: ",e),n.setIsLoading(!1),void n.setAlertParams({type:"danger",text:"errorOccurred",show:!0})):(n.updateBuildingsState(n.building),n.fileProgress=-1,n.setIsLoading(!1),n.setAlertParams({type:"success",text:"buildingUpdated",show:!0}),void l["default"].clearFileFromInput("floorplan"))})},function(e){console.log("update building failed E: ",e),n.setIsLoading(!1),n.setAlertParams({type:"danger",text:"errorOccurred",show:!0}),l["default"].clearFileFromInput("floorplan")})},deleteBuilding:function(){this.setActiveModal("deleteBuildingConfirm")},deleteBuildingConfirm:function(){var e=this,t={visible:!1};return this.setIsLoading(!0),B["default"].deleteBuilding(this.buildingId,t).then(function(t){var n=t.data.objectId;e.removeBuildingFromState(n),e.clearActiveModal(),e.setIsLoading(!1),e.setAlertParams({type:"default",text:"buildingDeleted",show:!0}),e.checkBuildings(),setTimeout(function(){e.$route.router.go("/buildings")},2e3)},function(t){console.log("update building failed E: ",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0}),e.clearActiveModal()})},validateFloorplan:function(){var e=l["default"].getFileFromInput("floorplan"),t=1048576,n=/\.(gif|jpg|jpeg|tiff|png)$/i;return e.size>t?(this.setAlertParams({type:"danger",text:"floorplanError",show:!0}),void l["default"].clearFileFromInput("floorplan")):n.test(e.name)?void l["default"].setFileLinkName("floorplan-link",e.name):(this.setAlertParams({type:"danger",text:"panoramaInvalid",show:!0}),void l["default"].clearFileFromInput("floorplan"))}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=a(r),o=n(6),s=a(o),u=n(15),l=a(u),c=n(10),d=a(c),f=n(46),h=a(f),p=n(5),m=a(p),g=n(14),v=a(g),b=n(7),A=a(b),y=n(2),_=n(3);t["default"]={vuex:{getters:{building:y.building,activeModal:y.activeModal,activeLoading:y.activeLoading,leanAuthInfo:y.leanAuthInfo,leanBuildingInfo:y.leanBuildingInfo,user:y.user},actions:{setActiveModal:_.setActiveModal,clearActiveModal:_.clearActiveModal,setActiveLoading:_.setActiveLoading,clearActiveLoading:_.clearActiveLoading,setUserLeanAuth:_.setUserLeanAuth}},components:{FormBuilder:i["default"],Alert:s["default"],Modal:l["default"],Loading:d["default"],ShareButtons:h["default"]},data:function(){return{leanAuthFormFields:[{name:"username",type:"text",required:!0},{name:"password",type:"password",required:!0}],leanBuildingFormFields:[{name:"address",type:"text",required:!0}],isBuildingSynced:!1,alert:null}},computed:{buildingShareCodeNoBrand:function(){return this.building.shareCode+"?ui=true"}},methods:{authConfirm:function(){var e=this,t={username:this.leanAuthInfo.username,password:this.leanAuthInfo.password};return this.setActiveLoading("authLoading"),m["default"].authWithVRTour(t).then(function(t){e.clearActiveLoading();var n=t.data.sessionToken;v["default"].setLeanLocalStorage(n),v["default"].checkLeanAuth(function(t){e.setUserLeanAuth(t)}),e.setActiveModal("syncBuilding")},function(t){console.log(t),e.clearActiveModal(),e.clearActiveLoading()})},syncBuilding:function(){this.user.VRAuthenticated===!0?this.setActiveModal("syncBuilding"):this.setActiveModal("authWithVRTour")},syncBuildingConfirm:function(){var e=this,t=A["default"].getFirstThumbnail(this.building),n={name:this.building.name,description:this.building.description,address:this.leanBuildingInfo.address,imageUrl:t};return this.building.leanId&&(n.leanBuildId=this.building.leanId),this.setActiveLoading("syncLoading"),m["default"].syncToVRTour(n).then(function(t){var n=t.data.buildId,a={leanBuildId:n};return m["default"].updateBuilding(e.building.id,a).then(function(t){e.clearActiveModal(),e.clearActiveLoading(),e.setActiveModal("buildingSynced"),e.isBuildingSynced=!0})},function(t){console.log(t),e.clearActiveModal(),e.clearActiveLoading(),e.setActiveModal("buildingSynced")})},shareBuilding:function(){this.setActiveModal("shareBuilding")},showBrandModal:function(e){"United States"===this.user.country&&(e.preventDefault(),this.setActiveModal("chooseBrand"))}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(9),s=a(o),u=n(34),l=a(u),c=n(6),d=a(c),f=n(15),h=a(f),p=n(26),m=a(p),g=n(10),v=a(g),b=n(46),A=a(b),y=n(28),_=a(y),P=n(2),w=n(3);t["default"]={name:"Buildings",mixins:[_["default"]],components:{List:l["default"],Alert:d["default"],Modal:h["default"],Spinner:m["default"],Loading:v["default"],FormBuilder:s["default"],ShareButtons:A["default"]},props:{codeBuildings:Array},vuex:{getters:{user:P.user,buildings:P.buildings,activeModal:P.activeModal,activeLoading:P.activeLoading,currentBuildingId:P.currentBuildingId,areBuildingsFetched:P.areBuildingsFetched,alertParams:P.alertParams,isLoading:P.isLoading},actions:{fetchBuildings:w.fetchBuildings,checkBuildings:w.checkBuildings,removeBuildingFromState:w.removeBuildingFromState,setActiveModal:w.setActiveModal,clearActiveModal:w.clearActiveModal,setCurrentBuildingId:w.setCurrentBuildingId,setAlertParams:w.setAlertParams,setIsLoading:w.setIsLoading}},data:function(){var e=[{name:"panoramas",column:1,isThumbnail:!0},{name:"name",column:2,hasLink:!0},{name:"date",column:2,isDetail:!0}];return{props:["name","date","user"],buildingFields:e,buildingActions:{"delete":{submit:this.deleteBuilding},share:{submit:this.shareBuilding}},currentBuilding:null}},computed:{selectedBuildings:function(){var e=this.$parent.$options.name;return"ShareCode"===e?this.codeBuildings:this.buildings}},ready:function(){this.addFieldsByRole()},methods:{addFieldsByRole:function(){if(""===this.user.role||"normal"===this.user.role||"agent"===this.user.role||"shopifyAgent"===this.user.role){var e={name:"description",column:4,isDetail:!0};this.buildingFields.splice(-1,-2,e)}if("admin"===this.user.role){var t={name:"user",column:2,isDetail:!0},n={name:"description",column:2,isDetail:!0};this.buildingFields.splice(-1,-2,n),this.buildingFields.splice(-1,-2,t)}},shareBuilding:function(e){this.setActiveModal("shareConfirm");var t=this.buildings.filter(function(t){return t.id===e});this.currentBuilding=t[0]},deleteBuilding:function(e){this.setCurrentBuildingId(e),this.setActiveModal("deleteConfirm")},deleteBuildingConfirm:function(){var e=this,t={visible:!1};return this.setIsLoading(!0),i["default"].deleteBuilding(this.currentBuildingId,t).then(function(t){var n=t.data.objectId;e.removeBuildingFromState(n),e.setAlertParams({type:"default",text:"buildingDeleted",show:!0}),e.clearActiveModal(),e.setIsLoading(!1),e.checkBuildings()},function(t){console.log("update building failed E: ",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0}),e.clearActiveModal()})}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),i=a(r),o=n(15),s=a(o),u=n(6),l=a(u),c=n(62),d=a(c),f=n(2),h=n(3);t["default"]={components:{List:i["default"],Modal:s["default"],AlertParams:l["default"],EditorLoading:d["default"]},vuex:{getters:{building:f.building,firebaseComments:f.firebaseComments,currentCommentId:f.currentCommentId,isLoading:f.isLoading,alertParams:f.alertParams,activeModal:f.activeModal},actions:{fetchBuildings:h.fetchBuildings,setActiveModal:h.setActiveModal,setIsLoading:h.setIsLoading,setAlertParams:h.setAlertParams,setCurrentCommentId:h.setCurrentCommentId,deleteFirebaseComments:h.deleteFirebaseComments,clearActiveModal:h.clearActiveModal}},data:function(){return{firebaseCommentsActions:{"delete":{submit:this.deleteComment}},firebaseCommentsFields:[{name:"author",column:3,isDetail:!0},{name:"date",column:2,isDetail:!0},{name:"message",column:6,isDetail:!0}]}},methods:{deleteComment:function(e){this.setCurrentCommentId(e),this.setActiveModal("deleteCommentConfirm")},deleteCommentConfirm:function(){var e=this;return this.setIsLoading(!0),this.deleteFirebaseComments(this.building.code,this.currentCommentId).then(function(t){e.clearActiveModal(),e.setIsLoading(!1),e.setAlertParams({type:"default",text:"commentDeleted",show:!0})})}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=a(r),o=n(5),s=a(o),u=n(3);t["default"]={name:"EmailVerified",vuex:{actions:{setIsLoading:u.setIsLoading,setAlertParams:u.setAlertParams,clearActiveModal:u.clearActiveModal}},components:{Loading:i["default"]},data:function(){return{nonce:"",isVerified:null}},watch:{nonce:function(){var e=this;s["default"].verifyEmail(this.nonce).then(function(t){e.isVerified=!0},function(t){console.log("emailVerify error: ",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0}),e.clearActiveModal(),e.isVerified=!1})}},route:{data:function(e){var t=e.to,n=t.params.nonce;return{nonce:n}},activate:function(){var e=document.getElementsByTagName("body")[0];e.className+=" bg-brand"}},methods:{redirectToHome:function(){console.log("test3"),this.$route.router.go("http://vreditor.istaging.co")}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=a(r),o=n(6),s=a(o),u=n(10),l=a(u),c=n(2),d=n(3),f=n(14),h=a(f);t["default"]={name:"ForgotPass",components:{FormBuilder:i["default"],Alert:s["default"],Loading:l["default"]},vuex:{getters:{authInfo:c.authInfo,activeLoading:c.activeLoading,alertParams:c.alertParams,isLoading:c.isLoading},actions:{setActiveLoading:d.setActiveLoading,clearActiveLoading:d.clearActiveLoading,setAlertParams:d.setAlertParams,setIsLoading:d.setIsLoading}},data:function(){return{nonce:"",formFields:[{name:"email",type:"email",required:!0}]}},route:{data:function(e){var t=e.to,n=t.params.nonce;return{nonce:n}},canActivate:function(){return!h["default"].user.authenticated},activate:function(){var e=document.getElementsByTagName("body")[0];e.className+=" bg-brand"}},methods:{forgotPassSubmit:function(){var e=this,t={email:this.authInfo.email};this.setIsLoading(!0),h["default"].forgotPass(this,t).then(function(t){e.setIsLoading(!1),e.setAlertParams({type:"success",text:"forgotPassSucceded",show:!0})})["catch"](function(t){e.setIsLoading(!1),console.log("Error:",t),e.setAlertParams({type:"danger",text:"forgotPassFailed",show:!0})})}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=a(r),o=n(6),s=a(o),u=n(10),l=a(u),c=n(14),d=a(c),f=n(2),h=n(3);t["default"]={name:"Login",components:{FormBuilder:i["default"],Alert:s["default"],Loading:l["default"]},vuex:{getters:{isLoading:f.isLoading,authInfo:f.authInfo,user:f.user,activeLoading:f.activeLoading,alertParams:f.alertParams},actions:{fetchShareCodes:h.fetchShareCodes,fetchBuildings:h.fetchBuildings,checkBuildings:h.checkBuildings,checkShareCodes:h.checkShareCodes,setUserInfo:h.setUserInfo,setIsLoading:h.setIsLoading,setProfilePhoto:h.setProfilePhoto,setAlertParams:h.setAlertParams}},data:function(){return{alert:null,formFields:[{name:"email",type:"email",required:!0},{name:"password",type:"password",required:!0}],formActions:[{name:"logIn",submit:this.loginSubmit}],logoImage:n(61)}},route:{canActivate:function(){return!d["default"].user.authenticated},activate:function(){var e=document.getElementsByTagName("body")[0];e.className+=" bg-brand"}},ready:function(){},methods:{loginSubmit:function(){var e=this,t={email:this.authInfo.email,password:this.authInfo.password};this.setIsLoading(!0),d["default"].login(this,t).then(function(t){e.handleAfterLogin()})["catch"](function(t){e.setIsLoading(!1),console.log("Error:",t),e.setAlertParams({type:"danger",text:"logInFailed",show:!0})})},handleAfterLogin:function(){var e=this;this.setUserInfo(d["default"].user),this.fetchShareCodes(function(){return e.checkShareCodes()}),this.fetchBuildings(function(){return e.checkBuildings()}),this.setProfilePhoto(),this.setIsLoading(!1),this.$route.router.go("/buildings")}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(9),o=a(i),s=n(6),u=a(s),l=n(10),c=a(l),d=n(26),f=a(d),h=n(34),p=a(h);t["default"]={name:"ManageAgents",components:{FormBuilder:o["default"],Alert:u["default"],Loading:c["default"],Spinner:f["default"],List:p["default"]},vuex:{getters:{signupInfo:r.signupInfo,agents:r.agents}},data:function(){return{alert:null,formFields:[{name:"name",type:"text",required:!0,text:"yourName"},{name:"email",type:"email",required:!0,matches:"^[-a-z0-9~!$%^&*_=+}{'?]+(.[-a-z0-9~!$%^&*_=+}{'?]+)*@([a-z0-9_][-a-z0-9_]*(.[-a-z0-9_]+)*.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}))(:[0-9]{1,5})?$"},{name:"phone",type:"text",text:"yourPhone"},{name:"company",type:"text",text:"yourCompany"},{name:"country"},{name:"photo",type:"file"},{name:"password",type:"password",required:!0},{name:"confirmPassword",type:"password",required:!0}],formActions:[{name:"signUp",submit:this.signupSubmit}],agentFields:[{name:"thumbnail",column:1,isThumbnail:!0},{name:"name",column:2,isDetail:!0},{name:"role",column:2,isDetail:!0},{name:"company",column:3,isDetail:!0,hasTrans:!0},{name:"country",column:2,isDetail:!0},{name:"phone",column:2,isDetail:!0}]}},methods:{signupSubmit:function(){console.log("Submitted!")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=n(3);t["default"]={vuex:{getters:{editorState:a.editorState,isEditorSceneReady:a.isEditorSceneReady,hasAddedMarker:a.hasAddedMarker,selectedPanorama:a.selectedPanorama,selectedMarker:a.selectedMarker,cameraContainerEl:a.cameraContainerEl,cameraElOrigRotation:a.cameraElOrigRotation,cameraElRotation:a.cameraElRotation,cameraContainerElRotation:a.cameraContainerElRotation},actions:{setSelectedMarker:r.setSelectedMarker,setEditorState:r.setEditorState,setHasAddedMarker:r.setHasAddedMarker,setIsImageLoading:r.setIsImageLoading,setIsEditorSceneReady:r.setIsEditorSceneReady,setAlertParams:r.setAlertParams,updateAppMarkerRotation:r.updateAppMarkerRotation,updateAppMarkerNextPano:r.updateAppMarkerNextPano,deleteAppMarker:r.deleteAppMarker,undoSetRotation:r.undoSetRotation,resetCamera:r.resetCamera,saveMarkerRotation:r.saveMarkerRotation}},methods:{undo:function(){2===this.editorState?(this.setEditorState(1),this.setSelectedMarker({})):4===this.editorState&&(this.setEditorState(3),this.undoSetRotation(this))},onConfirm:function(e){var t=this;if(2===this.editorState)this.setEditorState(3);else if(4===this.editorState){var n={x:0,y:this.cameraElRotation.y+this.cameraContainerElRotation.y,z:0};this.hasAddedMarker&&this.setHasAddedMarker(!1),this.setEditorState(1),this.setIsEditorSceneReady(!1),this.setIsImageLoading(!0),this.updateAppMarkerRotation(e,n),this.updateAppMarkerNextPano(e,this.selectedPanorama.id),this.undoSetRotation(this),this.setSelectedMarker({}),this.$nextTick(function(){t.setIsEditorSceneReady(!0)})}},handleDeleteButton:function(){this.setEditorState(-1)}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=a(r),o=n(9),s=a(o),u=n(195),l=a(u),c=n(2),d=n(3);t["default"]={name:"MarkerInfo",vuex:{getters:{panoramas:c.panoramas,selectedPanorama:c.selectedPanorama,currentPanorama:c.currentPanorama,selectedMarker:c.selectedMarker,editorState:c.editorState,isEditorSceneReady:c.isEditorSceneReady,isUploadingMarker:c.isUploadingMarker,
hasAddedMarker:c.hasAddedMarker,cameraContainerEl:c.cameraContainerEl,cameraElRotation:c.cameraElRotation,cameraElOrigRotation:c.cameraElOrigRotation,cameraContainerElRotation:c.cameraContainerElRotation,uploadURLs:c.uploadURLs},actions:{setSelectedMarker:d.setSelectedMarker,setEditorState:d.setEditorState,setSceneEventCount:d.setSceneEventCount,setHasAddedMarker:d.setHasAddedMarker,setSelectedPanorama:d.setSelectedPanorama,setCurrentPanorama:d.setCurrentPanorama,setAlertParams:d.setAlertParams,setIsEditorSceneReady:d.setIsEditorSceneReady,setIsImageLoading:d.setIsImageLoading,setCameraElRotation:d.setCameraElRotation,setCameraElOrigRotation:d.setCameraElOrigRotation,getCameraRotation:d.getCameraRotation,addAppMarker:d.addAppMarker,getCameraContainerEl:d.getCameraContainerEl,deleteAppMarker:d.deleteAppMarker,undoSetRotation:d.undoSetRotation,resetCamera:d.resetCamera,doImageUpload:d.doImageUpload,setIsUploadingMarker:d.setIsUploadingMarker,setTagPhoto:d.setTagPhoto,setIsLoading:d.setIsLoading}},components:{FormBuilder:s["default"],MarkerButtons:l["default"]},data:function(){return{selectedTagFields:[{name:"title",type:"text",required:!0,minLength:2,order:1},{name:"description",type:"textarea",required:!0,minLength:2,order:2},{name:"photo",type:"file",text:"photo",order:3},{name:"price",type:"text",order:4},{name:"action",type:"radioMarker",order:5},{name:"url",type:"text",minLength:2,order:6}],selectedMemoFields:[{name:"description",type:"textarea",required:!0,minLength:2,maxLength:100}],defaultThumbnail:n(360)}},watch:{selectedMarker:{handler:function(e){"tag"===this.selectedMarker.type?e.description.trim().length<this.selectedTagFields[1].minLength?this.setHasAddedMarker(!0):this.setHasAddedMarker(!1):"memo"===this.selectedMarker.type&&(e.description.trim().length<this.selectedMemoFields[0].minLength||e.description.trim().length>this.selectedMemoFields[0].maxLength?this.setHasAddedMarker(!0):this.setHasAddedMarker(!1))},deep:!0},uploadURLs:function(e,t){this.isUploadingMarker&&(this.setTagPhoto(e[0]),this.setIsUploadingMarker(!1),this.handleMarkerAfterUpdate())}},methods:{formDone:function(){var e=null;"tag"===this.selectedMarker.type&&(e=i["default"].getFileFromInput("photo")),this.setIsLoading(!0),e&&(this.filename=e.name,this.setIsUploadingMarker(!0),this.doImageUpload(e,[])),e||this.handleMarkerAfterUpdate()},menuClose:function(){this.editorState?this.setEditorState(2):this.setEditorState(1)},selectPanorama:function(e){var t=this;if(0===this.editorState){if(this.selectedPanorama.id===e.id)return void this.setEditorState(1);this.setSelectedPanorama(e),this.setCurrentPanorama(e),this.setEditorState(1),this.setIsEditorSceneReady(!1),this.setIsImageLoading(!0),this.$nextTick(function(){var e={x:0,y:0,z:0};t.setIsEditorSceneReady(!0),t.getCameraRotation(e,t.cameraContainerElRotation),t.setSceneEventCount(t.selectedPanorama.markers.length)})}else if(3===this.editorState){if(this.selectedPanorama.id===e.id)return;this.setSelectedPanorama(e),this.setIsImageLoading(!0);var n=e===this.currentPanorama;if(n)return;this.setCameraElOrigRotation({x:0,y:this.cameraElRotation.y+this.cameraContainerElRotation.y,z:0});var a=e.id===this.selectedMarker.nextPanoId;a?this.useSelectedMarkerRotation():this.resetCamera(this),this.setEditorState(4),this.setIsEditorSceneReady(!1),this.$nextTick(function(){t.setIsEditorSceneReady(!0)})}},useSelectedMarkerRotation:function(){var e=this,t={x:0,y:this.selectedMarker.forward_y,z:0};this.resetCamera(this,function(){e.setCameraElRotation(e.cameraContainerEl,t)})},handleCancelDelete:function(){this.setEditorState(2)},handleDeleteMarker:function(){this.deleteAppMarker(),this.hasAddedMarker&&this.setHasAddedMarker(!1),this.setEditorState(1),this.setSelectedMarker({})},isCurrentPanorama:function(e){return e===this.currentPanorama},isTargetPanorama:function(e){return e.id===this.selectedMarker.nextPanoId},isDisabledPanorama:function(e){return!e.web},validatePhoto:function(){var e=i["default"].getFileFromInput("photo"),t=1048576;return e.size>t?void this.setAlertParams({type:"danger",text:"floorplanError",show:!0}):void i["default"].setFileLinkName("photo-link",e.name)},handleMarkerAfterUpdate:function(){this.setSelectedMarker({}),this.setEditorState(1),this.setIsLoading(!1)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2);t["default"]={vuex:{getters:{panoramas:a.panoramas,targetPanorama:a.targetPanorama,selectedMarker:a.selectedMarker}},methods:{isTargetPanorama:function(e){return e===this.targetPanorama}},computed:{targetPanorama:function(){var e=this,t=this.panoramas.filter(function(t){return t.id===e.selectedMarker.nextPanoId});return t[0]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=n(3);t["default"]={vuex:{getters:{panoramas:a.panoramas,selectedPanorama:a.selectedPanorama,selectedMarker:a.selectedMarker,editorState:a.editorState,hasAddedMarker:a.hasAddedMarker,cameraContainerElRotation:a.cameraContainerElRotation,cameraContainerEl:a.cameraContainerEl},actions:{setSelectedMarker:r.setSelectedMarker,setSceneEventCount:r.setSceneEventCount,addAppMarker:r.addAppMarker,setEditorState:r.setEditorState,setHasAddedMarker:r.setHasAddedMarker,setCameraElRotation:r.setCameraElRotation}},data:function(){return{pointMarkerState:!0,pointMarkerHint:"",changeCurrentPanoramaTool:{"class":"fa-th-large",hintText:"switchCurrentPanorama"}}},computed:{editorTools:function(){return[{"class":"fa-bullseye",type:"point",hintText:this.pointMarkerHint},{"class":"fa-tag",type:"tag",hintText:"addTag"},{"class":"fa-sticky-note-o",type:"memo",hintText:"addMemo"}]}},watch:{panoramas:function(e){e.length>1?(this.pointMarkerState=!0,this.pointMarkerHint="addStandpoint"):(this.pointMarkerState=!1,this.pointMarkerHint="please add at least 2 panorama first")}},methods:{handleAddAppMarker:function(e){if(this.pointMarkerState||"point"!==e.type){var t=.01,n={x:0,y:this.cameraContainerElRotation.y+t,z:0};this.setCameraElRotation(this.cameraContainerEl,n),this.setSceneEventCount(),this.addAppMarker(e.type);var a=this.selectedPanorama.markers.length-1;this.setSelectedMarker(this.selectedPanorama.markers[a]),this.setEditorState(2),this.setHasAddedMarker(!0)}},changeCurrentPanorama:function(){this.setEditorState(0)}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=a(r);n(313);var o=n(7),s=a(o),u=n(5),l=a(u),c=n(431),d=a(c),f=n(429),h=a(f),p=n(195),m=a(p),g=n(430),v=a(g),b=n(2),A=n(3);t["default"]={name:"MarkerEditor",vuex:{getters:{building:b.building,panoramas:b.panoramas,selectedPanorama:b.selectedPanorama,currentPanorama:b.currentPanorama,selectedMarker:b.selectedMarker,editorState:b.editorState,sceneEventCount:b.sceneEventCount,hasAddedMarker:b.hasAddedMarker,isEditorSceneReady:b.isEditorSceneReady,cameraContainerEl:b.cameraContainerEl,cameraElRotation:b.cameraElRotation,cameraContainerElRotation:b.cameraContainerElRotation,alertParams:b.alertParams,isLoading:b.isLoading,isImageLoading:b.isImageLoading,uploadURLs:b.uploadURLs},actions:{getCameraRotation:A.getCameraRotation,setSelectedPanorama:A.setSelectedPanorama,setCurrentPanorama:A.setCurrentPanorama,setSelectedMarker:A.setSelectedMarker,setSceneEventCount:A.setSceneEventCount,setEditorState:A.setEditorState,setHasAddedMarker:A.setHasAddedMarker,setIsEditorSceneReady:A.setIsEditorSceneReady,setIsLoading:A.setIsLoading,setAlertParams:A.setAlertParams,setCameraElRotation:A.setCameraElRotation,addAppMarker:A.addAppMarker,updateAppMarker:A.updateAppMarker,fetchBuildings:A.fetchBuildings,fetchBuildingById:A.fetchBuildingById,fetchPanoramasByBuildingId:A.fetchPanoramasByBuildingId,getCameraContainerEl:A.getCameraContainerEl,getCameraElRotation:A.getCameraElRotation,getCameraContainerElRotation:A.getCameraContainerElRotation,setIsImageLoading:A.setIsImageLoading}},components:{MarkerTools:d["default"],MarkerInfo:h["default"],MarkerButtons:m["default"],MarkerPanoramas:v["default"]},data:function(){return{payload:{markers:[]},isMarkerSelected:!1,clickMarkerCount:0,markerSize:30,markerColor:"#45b29d",markerInactive:"#969696",markerImage:n(364),tagColor:"#cbad45",tagImage:n(368),memoImage:n(365),markerUpdatePayload:Object}},computed:{instructionText:function(){switch(this.editorState){case-1:return"confirmDeleteAppMarker";case 0:return"selectCurrentPanorama";case 1:return"selectMarker";case 2:return"positionMarker";case 3:if("point"===this.selectedMarker.type)return"selectTargetPanorama";if("tag"===this.selectedMarker.type)return"enterTagDetails";break;case 4:return"rotatePanorama";default:return""}}},ready:function(){this.initAframeDraggable(),this.getCameraContainerEl(this.$els.cameraContainer),this.setIsEditorSceneReady(!0)},destroyed:function(){this.setEditorState(0),this.setSelectedPanorama({}),this.setCurrentPanorama({}),this.setIsImageLoading(!1),this.setIsEditorSceneReady(!1),this.setIsEditorSceneReady(!0)},watch:{panoramas:function(e){e.length>0&&this.setSelectedMarker({})}},methods:{markerImageSrc:function(e){return"point"===e.type?this.markerImage:"tag"===e.type?this.tagImage:"memo"===e.type?this.memoImage:void 0},onCameraChange:function(e){var t=e.detail.oldData,n=e.detail.newData;this.getCameraElRotation(this.$els.camera),this.cameraContainerEl&&this.getCameraContainerElRotation(this.cameraContainerEl),t.y!==n.y&&this.getCameraRotation(this.cameraElRotation,this.cameraContainerElRotation)},setImgSize:function(e){return s["default"].setLeancloudImgSize(e,"1024","512")},setLoadedImage:function(e){this.setIsImageLoading(!1)},joinAppMarkerPosition:function(e){if(e.isUnity){var t=s["default"].genUnityAppMarkerPostion(e);return t.x+" "+t.y+" "+t.z}return e.x+" "+e.y+" "+e.z},isSelectedMarker:function(e){return e.initId===this.selectedMarker.initId},handleUpdateMarkers:function(){var e=this;this.hasAddedMarker||(this.payload.markers=[],this.panoramas.forEach(function(t){var n={panoId:t.id,markers:t.markers};t.markers.length>0&&e.payload.markers.push(n)}),this.setIsLoading(!0),l["default"].updateMarkers((0,i["default"])(this.payload)).then(function(t){e.fetchBuildingById(e.building.id,function(){e.$nextTick(function(){var t=e.panoramas.filter(function(t){return t.id===e.selectedPanorama.id})[0];e.setSelectedPanorama(t),e.setEditorState(1)})}),e.setEditorState(1),e.setIsLoading(!1),e.setAlertParams({type:"success",text:"markersUpdated",show:!0})},function(t){console.log("An error occurred: ",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0})}))},initAframeDraggable:function(){var e=this;AFRAME.components.draggable&&delete AFRAME.components.draggable,AFRAME.registerComponent("draggable",{init:function(){var t=this;this.mouse=new THREE.Vector2,this.scene=this.el.sceneEl,this.camera=this.scene.camera,this.obj=this.el.object3D,this.scene.addEventListener("mousemove",function(n){if(t.mouse.x=n.offsetX/t.scene.canvas.offsetWidth*2-1,t.mouse.y=2*-(n.offsetY/t.scene.canvas.offsetHeight)+1,e.isMarkerSelected){var a=new THREE.Raycaster;a.setFromCamera(t.mouse,t.camera);var r=t.obj.position.distanceTo(t.camera.position),i=a.ray.direction.multiplyScalar(r);if(t.el.id===e.selectedMarker.initId){t.el.setAttribute("position",i.x+" "+i.y+" "+i.z);var o=e.selectedPanorama.markers.filter(function(e){return e.initId===t.el.id});e.updateAppMarker(o[0],i.x,i.y,i.z)}}}),this.scene.addEventListener("mousedown",function(n){var a=new THREE.Raycaster;a.setFromCamera(t.mouse,t.camera);var r=a.intersectObject(t.el.object3D,!0);if(1===r.length){if(e.isMarkerSelected=!0,!e.hasAddedMarker){var i=e.selectedPanorama.markers.filter(function(e){return e.initId===t.el.id});e.setSelectedMarker(i[0]),e.setEditorState(2),e.instructionText="positionMarker"}}else e.hasAddedMarker||(e.clickMarkerCount+=1,e.clickMarkerCount===e.sceneEventCount&&(e.setSelectedMarker({}),e.setEditorState(1),e.clickMarkerCount=0));e.isMarkerSelected&&(e.clickMarkerCount=0)}),this.scene.addEventListener("mouseup",function(t){e.isMarkerSelected=!1})}})}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=a(r),o=n(7),s=a(o),u=n(9),l=a(u),c=n(15),d=a(c),f=n(6),h=a(f),p=n(26),m=a(p),g=n(10),v=a(g),b=n(46),A=a(b),y=n(193),_=a(y),P=n(434),w=a(P),x=n(196),C=a(x),I=n(28),S=a(I),E=n(5),k=a(E),R=n(2),T=n(3);t["default"]={name:"Panorama",mixins:[S["default"]],components:{FormBuilder:l["default"],Modal:d["default"],Spinner:m["default"],Alert:h["default"],Loading:v["default"],PanoramaPrev:w["default"],PanoramaEditor:C["default"],ProgressBar:_["default"],ShareButtons:A["default"]},vuex:{getters:{buildings:R.buildings,building:R.building,panoramas:R.panoramas,panorama:R.panorama,activeModal:R.activeModal,activeLoading:R.activeLoading,alertParams:R.alertParams,isNewBuilding:R.isNewBuilding,isNewPanorama:R.isNewPanorama,isLoading:R.isLoading,isImageLoading:R.isImageLoading,cameraRotation:R.cameraRotation,uploadURLs:R.uploadURLs},actions:{fetchBuildings:T.fetchBuildings,fetchBuildingById:T.fetchBuildingById,fetchPanoramaById:T.fetchPanoramaById,fetchPanoramasByBuildingId:T.fetchPanoramasByBuildingId,removePanorama:T.removePanorama,setCurrentPanoramaId:T.setCurrentPanoramaId,setActiveModal:T.setActiveModal,clearActiveModal:T.clearActiveModal,setIsNewPanorama:T.setIsNewPanorama,setIsUpdatedPanorama:T.setIsUpdatedPanorama,setAlertParams:T.setAlertParams,setIsLoading:T.setIsLoading,doImageUpload:T.doImageUpload,updatePanoramaState:T.updatePanoramaState,setIsImageLoading:T.setIsImageLoading,setPanoramaPhotoState:T.setPanoramaPhotoState,clearPanorama:T.clearPanorama}},data:function(){return{alert:null,panoramaId:"",panoramaPreview:"",buildingId:"",formFields:[{name:"name",type:"text",required:!0,text:"panoName"},{name:"category"},{name:"web",type:"file",description:"panoramaHint"}],redirectUrl:"",sharePanoCode:"",filename:"",fileProgress:-1,panoUpdatePayload:Object,panoResizeInterval:null,panoResizeIntervalTime:5e3,panoramaFile:null}},watch:{uploadURLs:function(e,t){var n={app:e[0],thumbnail:e[1],panoId:this.panorama.id};this.fileProgress=100,this.updatePanoFileMetadata(n,this.panoUpdatePayload)},building:function(){this.fetchPanoramasByBuildingId(this.buildingId)},panoramas:function(){this.isNewPanorama||this.fetchPanoramaById(this.panoramaId)},panorama:function(){this.isImageLoading&&this.setAlertParams({type:"success",text:"panoramaUpdated",show:!0})}},route:{data:function(e){var t=this,n=e.to.params.buildingId,a=e.to.params.panoramaId;return this.isNewBuilding||this.fetchBuildingById(n,function(e){e&&(console.log("An error ocurred: ",e),t.setAlertParams({type:"danger",text:"errorOccurred",show:!0}))}),this.setIsNewPanorama(!1),{panoramaId:a,buildingId:n}},deactivate:function(){this.clearPanorama(),this.clearCheckPanoInterval()}},computed:{buildingURL:function(){var e=window.location.protocol+"//"+window.location.host;return this.building?e+"/#!/buildings/"+this.building.id:""},categories:function(){if(this.panorama)return this.panorama.category&&k["default"].categories.indexOf(this.panorama.category)===-1&&k["default"].categories.unshift(this.panorama.category),k["default"].categories},panoViewerURL:function(){return k["default"].panoViewerURL+"?code="+this.sharePanoCode}},ready:function(){var e=this.$route.params.shareCodeId,t=this.$route.params.buildingId;this.$route.params.shareCodeId?this.redirectUrl="/share-codes/"+e+"/buildings/"+t:this.redirectUrl="/buildings/"+t},methods:{isEmptyObj:function(e){return i["default"].isEmpty(e)},clearCheckPanoInterval:function(){clearInterval(this.panoResizeInterval),this.panoResizeInterval=null},updatePanorama:function(e){var t=this,n=this.panorama,a=void 0;"updateLoading"!==e&&(a="resetLoading"!==e?this.cameraRotation.y:0,n.panoRotation=a),n.customCategory&&(n.category=n.customCategory,delete n.customCategory),this.panoUpdatePayload=n,this.setIsLoading(!0);var r=s["default"].getFileFromInput("web");if(r){var i=[{h:2048,w:4096},{h:90,w:180}];this.filename=r.name,this.fileProgress=0,this.doImageUpload(r,i)}else k["default"].updatePanorama(this.panorama.id,n).then(function(e){t.fetchBuildingById(t.buildingId,function(e){e&&(console.log("An error ocurred: ",e),t.setIsLoading(!1),t.setAlertParams({type:"danger",text:"errorOccurred",show:!0}))}),t.setIsUpdatedPanorama(!0),t.setIsLoading(!1),t.setAlertParams({type:"success",text:"panoramaUpdated",show:!0})},function(e){console.log("update panorama failed E: ",e),t.setIsLoading(!1),t.setAlertParams({type:"danger",text:"errorOccurred",show:!0})});this.setIsLoading(!0)},updatePanoFileMetadata:function(e,t){var n=this;k["default"].updatePanoFileMetadata(e,t).then(function(e){console.log("result: ",e),n.fileProgress=-1,n.fetchBuildingById(n.buildingId,function(t){return t?(console.log("An error ocurred: ",t),n.setIsLoading(!1),void n.setAlertParams({type:"danger",text:"errorOccurred",show:!0})):void n.$nextTick(function(){var t=s["default"].setLeancloudImgSize(e.data.web,"1024","512");n.setPanoramaPhotoState(t,e.data.thumbnail),n.setIsLoading(!1),n.setIsImageLoading(!0),s["default"].clearFileFromInput("web")})})},function(e){n.fileProgress=-1,console.log("update panorama failed E: ",e),n.setIsLoading(!1),n.setAlertParams({type:"danger",text:"errorOccurred",show:!0})})},sharePanorama:function(e){this.setCurrentPanoramaId(e),this.setActiveModal("shareConfirm")},sharePanoramaConfirm:function(){var e=this,t={panoId:this.panorama.id};return this.setIsLoading(!0),k["default"].sharePanorama(t).then(function(t){e.setIsLoading(!1),e.sharePanoCode=t.data.code,e.setActiveModal("sharePanoramaSuccess")})},deletePanorama:function(){1===this.panoramas.length?this.setAlertParams({type:"warning",text:"lastPanoramaError",show:!0}):this.setActiveModal("deletePanoramaConfirm")},deletePanoramaConfirm:function(){var e=this,t=i["default"].find(this.panoramas,{id:this.panoramaId}),n={panoId:t.id};return this.setIsLoading(!0),k["default"].deletePanorama(n).then(function(t){var n=t.data.objectId;e.removePanorama(n),e.setAlertParams({type:"default",text:"panoramaDeleted",show:!0}),e.clearActiveModal(),e.setIsLoading(!1),setTimeout(function(){e.$route.router.go(e.redirectUrl)},2e3)})},validatePanorama:function(){var e=s["default"].getFileFromInput("web"),t=20971520,n=/\.(jpg|jpeg)$/i;return e.size>t?(this.setAlertParams({type:"danger",text:"panoramaError",show:!0}),void s["default"].clearFileFromInput("web")):n.test(e.name)?void s["default"].setFileLinkName("web-link",e.name):(this.setAlertParams({type:"danger",text:"panoramaInvalid",show:!0}),void s["default"].clearFileFromInput("web"))},renamePanoramaProps:function(e){var t=e.x,n=e.y,a=e.thumbnail,r=e.categoryType,i=e.objectId,o=e.name;delete e.categoryType,delete e.objectId,delete e.x,delete e.y,delete e.thumbnail,delete e.name,e.id=i,e.thumbnail=a,e.name=o,e.category=r,e.x=t,e.y=n}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(45),i=a(r);n(67);var o=n(6),s=a(o),u=n(62),l=a(u),c=n(5),d=a(c),f=n(2),h=n(3);t["default"]={components:{EditorLoading:l["default"],AlertParams:s["default"]},props:{currentPanorama:Object,btnText:String},vuex:{getters:{building:f.building,panoramas:f.panoramas,alertParams:f.alertParams,isLoading:f.isLoading},actions:{setMarkers:h.setMarkers,setRotation:h.setRotation,fetchBuildings:h.fetchBuildings,fetchBuildingById:h.fetchBuildingById,setIsLoading:h.setIsLoading,setAlertParams:h.setAlertParams}},data:function(){return{buildingId:"",buildingFloorplan:"",isMarkerFormLoading:!1,panoramaRange:n(367)}},created:function(){this.buildingId=this.$route.params.buildingId,this.building&&this.setFloorplan()},watch:{building:function(e){e&&this.setFloorplan()}},events:{"drag-event":function(e){var t=this,n=e.target,a=(0,i["default"])(e.target),r=a.offset(),o=a.parent().offset(),s=r.left-o.left,u=r.top-o.top;this.panoramas.forEach(function(e){e.id===n.id&&t.setMarkers(e,s,u)})},"rotate-event":function(e){var t=this,n=e.target,a=(0,i["default"])(e.target),r=a.closest(".marker"),o=/[+-]?\d+(\.\d+)?/g,s=n.style.transform,u=s.match(o).map(function(e){return parseFloat(e)});this.panoramas.forEach(function(e){e.id===r.attr("id")&&t.setRotation(e,u[0])})}},methods:{setPanoramaStyle:function(e){var t=2.8,n=535,a=e.panoRotation*t-n;return{backgroundImage:"url("+e.web+")",backgroundPosition:a+"px -153px"}},setFloorplan:function(){this.buildingFloorplan=this.building.floorplan},updatePanoramas:function(){var e=this;this.panoramas.forEach(function(e){e.x=parseInt(e.x),e.y=parseInt(e.y)});var t={panos:this.panoramas.filter(function(e){return e.isDirty===!0})};t.panos.length>0?(this.setIsLoading(!0),d["default"].bulkUpdatePanorama(t).then(function(t){e.fetchBuildingById(e.building.id,function(t){t&&(console.log("An error ocurred: ",t),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0}))}),e.setIsLoading(!1),e.setAlertParams({type:"success",text:"panoramaUpdated",show:!0})},function(t){console.log("An error occurred: ",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0})})):(this.setIsLoading(!1),this.setAlertParams({type:"warning",text:"noChanges",show:!0}))},shouldHidePanorama:function(e){return this.currentPanorama&&e!==this.currentPanorama}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),n(67);var r=n(7),i=a(r);n(207);var o=n(2),s=n(3);t["default"]={vuex:{getters:{activeLoading:o.activeLoading,cameraRotation:o.cameraRotation,panoramas:o.panoramas,isUpdatedPanorama:o.isUpdatedPanorama,isImageLoading:o.isImageLoading},actions:{getCameraRotation:s.getCameraRotation,setIsLoading:s.setIsLoading,setAlertParams:s.setAlertParams,setIsImageLoading:s.setIsImageLoading}},props:{item:Object},data:function(){return{cameraElRotation:null,cameraContainerElRotation:null,isLineGridToggled:!1,isSceneReady:!0,panoramaLoading:n(366),panoramaImage:null}},computed:{noResizing:function(){return 0===this.item.resizeProgress},isResizing:function u(){var u=1===this.item.resizeProgress,e=""===this.item.web||""===this.item.thumbnail;return u&&e},resizingFailed:function(){return this.item.resizeProgress===-1}},ready:function(){var e=this;this.item.web&&this.setIsImageLoading(!0),this.$nextTick(function(){e.$els.camera&&(e.cameraElRotation=e.getCameraElRotation(e.$els.camera),e.cameraContainerElRotation=e.getCameraElRotation(e.$els.cameraContainer),e.setCameraElStartRotation())})},watch:{panoramas:function(){var e=this;this.isUpdatedPanorama&&(this.setIsLoading(!1),this.setAlertParams({type:"success",text:"panoramaUpdated",show:!0})),this.$els.camera&&0===this.item.panoRotation&&(this.isSceneReady=!1,this.$nextTick(function(){e.isSceneReady=!0}))},isSceneReady:function(){this.cameraElRotation=this.getCameraElRotation(this.$els.camera);var e={x:0,y:this.cameraElRotation.y,z:0};this.setCameraElRotation(this.$els.cameraContainer,e)}},methods:{update:function(){this.$emit("update")},reset:function(){this.$emit("reset")},setImgSize:function(e){return i["default"].setLeancloudImgSize(e,"1024","512")},setLoadedImage:function(e){this.setIsImageLoading(!1)},toggleIsLineGrid:function(){this.isLineGridToggled=!this.isLineGridToggled},setCameraElStartRotation:function(){var e={x:0,y:this.item.panoRotation,z:0};this.setCameraElRotation(this.$els.cameraContainer,e)},onCameraChange:function(e){var t=e.detail.oldData,n=e.detail.newData;this.cameraElRotation=this.getCameraElRotation(this.$els.camera),this.cameraContainerElRotation=this.getCameraElRotation(this.$els.cameraContainer),t.y!==n.y&&this.getCameraRotation(this.cameraElRotation,this.cameraContainerElRotation)},getCameraElRotation:function(e){return e.getAttribute("rotation")},setCameraElRotation:function(e,t){var n=t.x+" "+t.y+" "+t.z;e.setAttribute("rotation",n)}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=a(r),o=n(34),s=a(o),u=n(15),l=a(u),c=n(6),d=a(c),f=n(62),h=a(f),p=n(46),m=a(p),g=n(5),v=a(g),b=n(2),A=n(3);t["default"]={name:"Panoramas",props:{props:Array},components:{List:s["default"],Modal:l["default"],AlertParams:d["default"],EditorLoading:h["default"],ShareButtons:m["default"]},vuex:{getters:{authInfo:b.authInfo,building:b.building,panoramas:b.panoramas,sortedPanoramas:b.sortedPanoramas,currentPanoramaId:b.currentPanoramaId,activeModal:b.activeModal,isLoading:b.isLoading,hasSortTriggered:b.hasSortTriggered,alertParams:b.alertParams},actions:{fetchBuildings:A.fetchBuildings,fetchBuildingById:A.fetchBuildingById,setCurrentPanoramaId:A.setCurrentPanoramaId,removePanorama:A.removePanorama,setActiveModal:A.setActiveModal,clearActiveModal:A.clearActiveModal,setIsLoading:A.setIsLoading,setAlertParams:A.setAlertParams,addPanoramaToState:A.addPanoramaToState,setIsNewPanorama:A.setIsNewPanorama,setIsEditorSceneReady:A.setIsEditorSceneReady,setHasSortTriggered:A.setHasSortTriggered,setSelectedPanorama:A.setSelectedPanorama,setEditorState:A.setEditorState}},data:function(){return{buildingId:"",panoramaActions:{"delete":{submit:this.deletePanorama},add:{name:"addNew",submit:this.newPanorama}},panoramaFields:[{name:"thumbnail",column:1,isThumbnail:!0},{name:"name",column:3,hasLink:!0},{name:"category",column:3,isDetail:!0,hasTrans:!0},{name:"x",column:2,isDetail:!0},{name:"y",column:2,isDetail:!0}],sharePanoCode:""}},computed:{panoViewerURL:function(){return v["default"].panoViewerURL+"?code="+this.sharePanoCode}},watch:{hasSortTriggered:{handler:function(e){this.hasSortTriggered&&(this.updatePanoramas(),this.setHasSortTriggered(!1))},deep:!0}},methods:{newPanorama:function(){var e=this;this.setActiveModal("creatingPanorama"),this.setIsLoading(!0),v["default"].createBlankPanorama(this.building.id).then(function(t){var n=t.data.objectId,a=t.data;e.renamePanoramaProps(a),e.addPanoramaToState(a),e.clearActiveModal(),e.setIsLoading(!1),e.setIsNewPanorama(!0),e.$route.router.go("/buildings/"+e.building.id+"/panoramas/"+n)},function(t){console.log("Error:",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0}),e.clearActiveModal()})},updatePanoramas:function(){var e=this,t={panos:this.sortedPanoramas};this.setIsLoading(!0),v["default"].bulkUpdatePanorama(t).then(function(t){e.setIsLoading(!1),e.setAlertParams({type:"success",text:"panoramaUpdated",show:!0})},function(t){console.log("An error occurred: ",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0})})},deletePanorama:function(e){this.setCurrentPanoramaId(e),this.setActiveModal("deletePanoramaConfirm")},deletePanoramaConfirm:function(){var e=this,t=i["default"].find(this.panoramas,{id:this.currentPanoramaId}),n={panoId:t.id};return this.setIsLoading(!0),v["default"].deletePanorama(n).then(function(t){var n=t.data.objectId;e.removePanorama(n),e.setIsLoading(!1),e.setAlertParams({type:"default",text:"panoramaDeleted",show:!0}),e.clearActiveModal(),e.fetchBuildingById(e.building.id,function(t){t&&(console.log("An error ocurred: ",t),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0}))}),e.setIsEditorSceneReady(!1),e.$nextTick(function(){e.setIsEditorSceneReady(!0),e.setEditorState(0)})})},sharePanorama:function(e){this.setCurrentPanoramaId(e),this.setActiveModal("shareConfirm")},sharePanoramaConfirm:function(){var e=this,t={panoId:this.currentPanoramaId};return this.setIsLoading(!0),v["default"].sharePanorama(t).then(function(t){e.setIsLoading(!1),e.sharePanoCode=t.data.code,e.setActiveModal("sharePanoramaSuccess")})},renamePanoramaProps:function(e){var t=!1;e.category=e.categoryType,e.id=e.objectId,delete e.categoryType,delete e.objectId,delete e.isDefault,e.isDefault=t}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=a(r),o=n(7),s=a(o),u=n(9),l=a(u),c=n(6),d=a(c),f=n(26),h=a(f),p=n(10),m=a(p),g=n(14),v=a(g),b=n(5),A=a(b),y=n(2),_=n(3);t["default"]={name:"Profile",components:{FormBuilder:l["default"],Alert:d["default"],Spinner:h["default"],Loading:m["default"]},vuex:{getters:{user:y.user,hasFieldChanged:y.hasFieldChanged,isLoading:y.isLoading,activeLoading:y.activeLoading,profilePhoto:y.profilePhoto,changePasswordInfo:y.changePasswordInfo,alertParams:y.alertParams,uploadURLs:y.uploadURLs},actions:{setUserInfo:_.setUserInfo,setUserPhoto:_.setUserPhoto,clearChangePassword:_.clearChangePassword,setProfilePhoto:_.setProfilePhoto,setAlertParams:_.setAlertParams,setIsLoading:_.setIsLoading,doImageUpload:_.doImageUpload}},data:function(){return{formFields:[{name:"name",type:"text",required:!0,minLength:3,text:"yourName"},{name:"company",type:"text"},{name:"country"},{name:"phone",type:"text"},{name:"photo",type:"file",text:"profilePhoto"}],changePasswordFormFields:[{name:"oldPassword",type:"password",required:!0,minLength:3},{name:"newPassword",type:"password",required:!0,minLength:3},{name:"confirmNewPassword",type:"password",required:!0,minLength:3}],alert:null,processingForm:null,userUpdatePayload:Object}},watch:{uploadURLs:function(e,t){this.userUpdatePayload.photo=e[0],this.updateUserFileMetadata(this.userUpdatePayload)}},methods:{isEmptyObj:function(e){return i["default"].isEmpty(e)},validatePhoto:function(){var e=s["default"].getFileFromInput("photo"),t=1048576;return e.size>t?void this.setAlertParams({type:"danger",text:"photoError",show:!0}):void s["default"].setFileLinkName("photo-link",e.name)},updateUser:function(){var e=this;this.processingForm="update-user",this.setIsLoading(!0);var t=s["default"].getFileFromInput("photo");return this.userUpdatePayload={name:this.user.name,company:this.user.company,country:this.user.country,phone:this.user.phone,newPassword:this.user.newPassword,confirmNewPassword:this.user.confirmNewPassword},t?void this.doImageUpload(t,[]):A["default"].updateUserProfile(this.userUpdatePayload).then(function(t){e.setIsLoading(!1),e.setAlertParams({type:"success",text:"userUpdated",show:!0})},function(t){console.log(t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"errorOccurred",show:!0})})},updateUserFileMetadata:function(e){var t=this;return A["default"].updateUserProfile(this.userUpdatePayload).then(function(e){t.setUserLocalStorage(e,t.userUpdatePayload),t.setIsLoading(!1),t.setAlertParams({type:"success",text:"userUpdated",show:!0})},function(e){console.log(e),t.setIsLoading(!1),t.setAlertParams({type:"danger",text:"errorOccurred",show:!0})})},changePassword:function(){var e=this;this.processingForm="change-password";var t=this.changePasswordInfo.oldPassword,n=this.changePasswordInfo.newPassword,a=this.changePasswordInfo.confirmNewPassword;if(t&&n&&n!==a)return void this.setAlertParams({type:"danger",text:"newPassMatchFailed",show:!0});var r={username:this.user.username,oldPassword:t,newPassword:n};this.setIsLoading(!0),v["default"].changePassword(this,r).then(function(t){console.log("result: ",t),e.setIsLoading(!1),e.setAlertParams({type:"success",text:"passwordUpdated",show:!0})},function(t){console.log(t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"passwordError",show:!0})})},setUserLocalStorage:function(e,t){var n=null;t.photo&&(n=t.photo);var a={name:e.data.name,company:e.data.company||"",country:e.data.country||"",phone:e.data.phone||"",photo:n||""};v["default"].setUserLocalStorage(a),t.photo&&(this.setUserPhoto(n),this.setProfilePhoto())}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=a(r),o=n(6),s=a(o),u=n(10),l=a(u),c=n(5),d=a(c),f=n(2),h=n(3),p=n(14),m=a(p);t["default"]={name:"ResetPass",components:{FormBuilder:i["default"],Alert:s["default"],Loading:l["default"]},vuex:{getters:{authInfo:f.authInfo,activeLoading:f.activeLoading,alertParams:f.alertParams},actions:{setActiveLoading:h.setActiveLoading,clearActiveLoading:h.clearActiveLoading,
setAlertParams:h.setAlertParams}},data:function(){return{nonce:"",alert:null,formFields:[{name:"password",type:"password",required:!0},{name:"confirmPassword",type:"password",required:!0}],sharedState:d["default"]}},route:{data:function(e){var t=e.to,n=t.params.nonce;return{nonce:n}},canActivate:function(){return!m["default"].user.authenticated},activate:function(){var e=document.getElementsByTagName("body")[0];e.className+=" bg-brand"}},methods:{resetPassSubmit:function(){var e=this,t={newPassword:this.authInfo.password};return this.authInfo.password!==this.authInfo.confirmPassword?void this.setAlertParams({type:"danger",text:"passMatchFailed",show:!0}):(this.setActiveLoading("authLoading"),void m["default"].resetPass(this,this.nonce,t).then(function(t){e.clearActiveLoading(),e.setAlertParams({type:"success",text:"resetPassSucceded",show:!0})})["catch"](function(t){console.log("Error:",t),e.clearActiveLoading(),e.setAlertParams({type:"danger",text:"resetPassFailed",show:!0})}))}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=a(r),o=n(194),s=a(o),u=n(9),l=a(u),c=n(26),d=a(c),f=n(28),h=a(f),p=n(2),m=n(3);t["default"]={name:"ShareCode",mixins:[h["default"]],components:{FormBuilder:l["default"],Buildings:s["default"],Spinner:d["default"]},vuex:{getters:{shareCodes:p.shareCodes,shareCode:p.shareCode,codeBuildings:p.codeBuildings},actions:{fetchBuildings:m.fetchBuildings,fetchShareCodeById:m.fetchShareCodeById,fetchBuildingsByCodeId:m.fetchBuildingsByCodeId}},data:function(){return{shareCodeId:"",props:["name","categoryCount","panoramaCount"]}},watch:{shareCodes:function(e,t){this.fetchShareCodeById(this.shareCodeId),this.fetchBuildingsByCodeId(this.shareCodeId)}},route:{data:function(e){var t=this,n=e.to;return this.fetchBuildings(function(){var e=n.params.shareCodeId;return t.fetchShareCodeById(e),t.fetchBuildingsByCodeId(e),{shareCodeId:e}})}},methods:{isEmptyObj:function(e){return i["default"].isEmpty(e)}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),i=a(r),o=n(15),s=a(o),u=n(6),l=a(u),c=n(26),d=a(c),f=n(9),h=a(f),p=n(28),m=a(p),g=n(5),v=a(g),b=n(2);t["default"]={name:"ShareCodes",mixins:[m["default"]],components:{List:i["default"],Modal:s["default"],Alert:l["default"],Spinner:d["default"],FormBuilder:h["default"]},vuex:{getters:{shareCodes:b.shareCodes,areShareCodesFetched:b.areShareCodesFetched}},data:function(){return{props:["number","date","email"],shareCodeFields:[{name:"number",column:2,hasLink:!0},{name:"buildings",column:3,isArray:!0},{name:"emails",column:4,isArray:!0},{name:"date",column:3,isDetail:!0}],alertAction:{target:"Share code",type:"success",text:"created"}}},methods:{deleteShareCode:function(){v["default"].deleteShareCode()}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=a(r),o=n(9),s=a(o),u=n(6),l=a(u),c=n(10),d=a(c),f=n(5),h=a(f),p=n(14),m=a(p),g=n(2),v=n(3);t["default"]={name:"Signup",components:{FormBuilder:s["default"],Alert:l["default"],Loading:d["default"]},vuex:{getters:{signupInfo:g.signupInfo,user:g.user,isLoading:g.isLoading,alertParams:g.alertParams},actions:{fetchShareCodes:v.fetchShareCodes,fetchBuildings:v.fetchBuildings,checkBuildings:v.checkBuildings,setActiveLoading:v.setActiveLoading,clearActiveLoading:v.clearActiveLoading,setIsLoading:v.setIsLoading,setAlertParams:v.setAlertParams}},data:function(){return{alert:null,formFields:[{name:"name",type:"text",required:!0,text:"yourName"},{name:"email",type:"email",required:!0,matches:"^[-a-z0-9~!$%^&*_=+}{'?]+(.[-a-z0-9~!$%^&*_=+}{'?]+)*@([a-z0-9_][-a-z0-9_]*(.[-a-z0-9_]+)*.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}))(:[0-9]{1,5})?$"},{name:"phone",type:"text",text:"yourPhone",required:!0},{name:"company",type:"text",text:"yourCompany",required:!0},{name:"country",required:!0},{name:"password",type:"password",required:!0},{name:"confirmPassword",type:"password",required:!0}],formActions:[{name:"signUp",submit:this.signupSubmit}],logoImage:n(61)}},route:{canActivate:function(){return!m["default"].user.authenticated},activate:function(){var e=document.getElementsByTagName("body")[0];e.className+=" bg-brand"}},ready:function(){window.fbAsyncInit=function(){FB.init({appId:h["default"].facebookAppId,oauth:!0,status:!0,cookie:!0,xfbml:!0})},function(){var e=document.createElement("script");e.src=document.location.protocol+"//connect.facebook.net/en_US/all.js",e.async=!0,document.getElementById("fb-root").appendChild(e)}()},methods:{fbLoginSubmit:function(){var e=this;FB.login(function(t){if(console.log("statusChangeCallback"),"connected"===t.status){e.setIsLoading(!0);var n={access_token:t.authResponse.accessToken};m["default"].loginWithFacebook(n).then(function(){e.setIsLoading(!1),e.handleAfterLogin()})}else"not_authorized"===t.status?console.log("Please log into this app."):console.log("Please log into this Facebook.")},{scope:"email"})},signupSubmit:function(){var e=this,t={name:this.signupInfo.name,role:this.$route.query.role||"",email:this.signupInfo.email,phone:this.signupInfo.phone,company:this.signupInfo.company,country:this.signupInfo.country,password:this.signupInfo.password};if(this.signupInfo.password!==this.signupInfo.confirmPassword)return void(this.alert={type:"danger",text:"passMatchFailed"});var n=null;n=new FormData,console.log(t),n.append("field",(0,i["default"])(t)),this.setIsLoading(!0),h["default"].signUp(n).then(function(t){e.setIsLoading(!1),e.setAlertParams({type:"success",text:"signUpSucceded",show:!0}),setTimeout(function(){e.$route.router.go("/")},2e3)},function(t){console.log("err: ",t),e.setIsLoading(!1),e.setAlertParams({type:"danger",text:"signUpFailed",show:!0})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2),n(3),t["default"]={name:"Login",components:{},vuex:{getters:{},actions:{}},data:function(){return{logoImage:n(61),maintenanceImage:n(363)}},route:{activate:function(){var e=document.getElementsByTagName("body")[0];e.className+=" bg-brand"}},ready:function(){},methods:{}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,function(e,t,n){function a(e){return n(r(e))}function r(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./af":91,"./af.js":91,"./ar":95,"./ar-ma":92,"./ar-ma.js":92,"./ar-sa":93,"./ar-sa.js":93,"./ar-tn":94,"./ar-tn.js":94,"./ar.js":95,"./az":96,"./az.js":96,"./be":97,"./be.js":97,"./bg":98,"./bg.js":98,"./bn":99,"./bn.js":99,"./bo":100,"./bo.js":100,"./br":101,"./br.js":101,"./bs":102,"./bs.js":102,"./ca":103,"./ca.js":103,"./cs":104,"./cs.js":104,"./cv":105,"./cv.js":105,"./cy":106,"./cy.js":106,"./da":107,"./da.js":107,"./de":109,"./de-at":108,"./de-at.js":108,"./de.js":109,"./dv":110,"./dv.js":110,"./el":111,"./el.js":111,"./en-au":112,"./en-au.js":112,"./en-ca":113,"./en-ca.js":113,"./en-gb":114,"./en-gb.js":114,"./en-ie":115,"./en-ie.js":115,"./en-nz":116,"./en-nz.js":116,"./eo":117,"./eo.js":117,"./es":119,"./es-do":118,"./es-do.js":118,"./es.js":119,"./et":120,"./et.js":120,"./eu":121,"./eu.js":121,"./fa":122,"./fa.js":122,"./fi":123,"./fi.js":123,"./fo":124,"./fo.js":124,"./fr":127,"./fr-ca":125,"./fr-ca.js":125,"./fr-ch":126,"./fr-ch.js":126,"./fr.js":127,"./fy":128,"./fy.js":128,"./gd":129,"./gd.js":129,"./gl":130,"./gl.js":130,"./he":131,"./he.js":131,"./hi":132,"./hi.js":132,"./hr":133,"./hr.js":133,"./hu":134,"./hu.js":134,"./hy-am":135,"./hy-am.js":135,"./id":136,"./id.js":136,"./is":137,"./is.js":137,"./it":138,"./it.js":138,"./ja":139,"./ja.js":139,"./jv":140,"./jv.js":140,"./ka":141,"./ka.js":141,"./kk":142,"./kk.js":142,"./km":143,"./km.js":143,"./ko":144,"./ko.js":144,"./ky":145,"./ky.js":145,"./lb":146,"./lb.js":146,"./lo":147,"./lo.js":147,"./lt":148,"./lt.js":148,"./lv":149,"./lv.js":149,"./me":150,"./me.js":150,"./mk":151,"./mk.js":151,"./ml":152,"./ml.js":152,"./mr":153,"./mr.js":153,"./ms":155,"./ms-my":154,"./ms-my.js":154,"./ms.js":155,"./my":156,"./my.js":156,"./nb":157,"./nb.js":157,"./ne":158,"./ne.js":158,"./nl":159,"./nl.js":159,"./nn":160,"./nn.js":160,"./pa-in":161,"./pa-in.js":161,"./pl":162,"./pl.js":162,"./pt":164,"./pt-br":163,"./pt-br.js":163,"./pt.js":164,"./ro":165,"./ro.js":165,"./ru":166,"./ru.js":166,"./se":167,"./se.js":167,"./si":168,"./si.js":168,"./sk":169,"./sk.js":169,"./sl":170,"./sl.js":170,"./sq":171,"./sq.js":171,"./sr":173,"./sr-cyrl":172,"./sr-cyrl.js":172,"./sr.js":173,"./ss":174,"./ss.js":174,"./sv":175,"./sv.js":175,"./sw":176,"./sw.js":176,"./ta":177,"./ta.js":177,"./te":178,"./te.js":178,"./th":179,"./th.js":179,"./tl-ph":180,"./tl-ph.js":180,"./tlh":181,"./tlh.js":181,"./tr":182,"./tr.js":182,"./tzl":183,"./tzl.js":183,"./tzm":185,"./tzm-latn":184,"./tzm-latn.js":184,"./tzm.js":185,"./uk":186,"./uk.js":186,"./uz":187,"./uz.js":187,"./vi":188,"./vi.js":188,"./x-pseudo":189,"./x-pseudo.js":189,"./zh-cn":190,"./zh-cn.js":190,"./zh-tw":191,"./zh-tw.js":191};a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=348},,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,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"},function(e,t){e.exports="data:image/png;base64,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"},function(e,t){e.exports="data:image/png;base64,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"},function(e,t){e.exports="data:image/png;base64,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"},function(e,t,n){e.exports=n.p+"static/img/maintenance.6d0e926.png"},function(e,t,n){e.exports=n.p+"static/img/marker.b01ed52.png"},function(e,t,n){e.exports=n.p+"static/img/note.fc6e5db.png"},function(e,t,n){e.exports=n.p+"static/img/panorama-loading.620d4e0.png"},function(e,t){e.exports="data:image/png;base64,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";
},function(e,t,n){e.exports=n.p+"static/img/tag.feb7d79.png"},function(e,t){e.exports=" <div id=app> <navbar></navbar> <div class=container> <div class=row> <router-view class=view transition transition-mode=out-in> </router-view> </div> </div> <i-footer></i-footer> <alert v-show=alertParams.show></alert> </div> "},function(e,t){e.exports=" <div id=editor-alert class=alert :class=\"alertParams.show ? 'active alert-' + alertParams.type : ''\"> <p>{{ $t(alertParams.text) }}</p> </div> "},function(e,t){e.exports=" <div id=editor-loading> <loading color=brand> </loading></div> "},function(e,t){e.exports=' <form class=form-horizontal autocomplete=off> <div class=form-group :class="[showValidationClasses($key, value), { \'form-hidden\': !isInFields($key) }]" :style="\'order:\' + findOrder($key)" v-for="value in object"> <label :class="[\'control-label\', setLabelColumns()]" v-if="$key !== \'url\'"> {{ $t(findCustomText($key)) || $t($key) }} </label> <div :class=setFieldColumns()> <input class=form-control v-if=isTextField($key) v-model=value :type=getPropType($key) :placeholder="$t(findCustomText($key)) || $t($key)" @input="validateOnChange($key, value)"> <input class=form-control v-if=isNumberField($key) v-model=value :type=getPropType($key) :placeholder="$t(findCustomText($key)) || $t($key)" @input="validateOnChange($key, value)" number> <textarea class=form-control v-if=isTextareaField($key) v-model=value :placeholder="$t(findCustomText($key)) || $t($key)" @input="validateOnChange($key, value)">\n      </textarea> <select v-if="$key === \'category\'" v-model=value :class="{ \'form-other-select\': value === \'other\' }"> <option :value=value>{{ $t(value) }}</option> <option v-if="category !== value" v-for="category in categories" :value=category> {{ $t(category) }} </option> </select> <label class=radio-inline v-if=isBooleanField($key)> <input type=radio :value=false v-model=value> {{ $t(\'no\') }} </label> <label class=radio-inline v-if=isBooleanField($key)> <input type=radio :value=true v-model=value> {{ $t(\'yes\') }} </label> <label class=radio-inline v-if=isMarkerBooleanField($key)> <input type=radio :value=0 v-model=value> {{ $t(\'none\') }} </label> <label class=radio-inline v-if=isMarkerBooleanField($key)> <input type=radio :value=1 v-model=value> {{ $t(\'buyNow\') }} </label> <label class=radio-inline v-if=isMarkerBooleanField($key)> <input type=radio :value=2 v-model=value> {{ $t(\'viewAtHome\') }} </label> <label class=radio-inline v-if=isMarkerBooleanField($key)> <input type=radio :value=3 v-model=value> {{ $t(\'learnMore\') }} </label> <input class="form-control form-other" v-if="value === \'other\'" v-model=object.customCategory> <select v-if="$key === \'country\'" v-model=value :class="{ \'option-default\': !value }"> <option v-if=!value value=""> {{ $t(\'country\') }} </option> <option v-if=country :value=value.name>{{ value.native }}</option> <option v-if="country.name !== value.name" v-for="country in countries | orderBy \'name\'" :value=country.name> {{ country.native }} </option> </select> <div v-if="getPropType($key) === \'file\'" class=input-group> <span class=input-group-btn> <label :class="{ \'disabled\': isLoading }" :for=findFieldName($key) class="btn btn-default"> {{ $t(\'browse\') }} </label> <input v-if="getPropType($key) === \'file\'" type=file :name=findFieldName($key) :id=findFieldName($key) class=hidden @change=onChange> </span> <input type=text :name="findFieldName($key) + \'-link\'" class=form-control :placeholder="getFilenameFromUrl(value) || $t($key)" disabled=disabled> <img class=upload-prev v-if="value && hasPreviewPhoto" :src=value> </div> <p v-if="$key === \'viewerLink\' && value" class=form-control-static> <a :href=value>{{ value }}</a> </p> <p v-if="$key === \'viewerLink\' && !value" class=form-control-static> {{ $t(\'noLink\') }} </p> <div v-if="field.name === $parent.$key" v-for="field in fields"> <p class=help-block>{{ $t(field.description) }}</p> <p class=has-error v-if="isKeyRequired($parent.$key) &&\n            isEmpty(value) &&\n            formSubmitted"> {{ $t(\'requiredError\') }}{{ $t($parent.$key) | lowercase }} </p> <p class=has-error v-if="isKeyRequired($parent.$key) &&\n            isTooShort(value, field.minLength) &&\n            formSubmitted"> {{ $t(\'minLengthError\', { n: field.minLength }) }} </p> <p class=has-error v-if="isKeyRequired($parent.$key) &&\n            isTooLong(value, field.maxLength) &&\n            formSubmitted"> {{ $t(\'maxLengthError\', { n: field.maxLength }) }} </p> <p class=has-error v-if="isKeyRequired($parent.$key) &&\n          isUnmatched(value, field.matches) &&\n          formSubmitted"> {{ $t(\'invalidError\') }}{{ $t($parent.$key) | lowercase }} </p> </div> </div> </div> <div class="form-group form-actions" v-if=!isInModal> <div class="col-sm-offset-2 col-sm-10"> <input type=submit :class="{ \'disabled\': isLoading }" class="btn btn-primary" :value="btnText ? $t(btnText) : $t(\'update\')" @click.prevent=onSubmit> <input v-if=hasDelete type=submit :class="{ \'disabled\': isLoading }" class="btn btn-default" :value="delText ? $t(delText) : $t(\'delete\')" @click.prevent=onDelete> </div> </div> </form> '},function(e,t){e.exports=" <div id=footer :class=\"['col-md-12', footerClasses]\"> <div class=container> <hr> <p>{{ $t('copyright', { y: currentYear }) }}</p> </div> </div> "},function(e,t){e.exports=" <span>{{ value }}</span> "},function(e,t){e.exports=" <span v-if=!keyHasTrans(key)> {{ isNonFalsy(value) ? value : '' }} </span> <span v-if=keyHasTrans(key)> {{ isNonFalsy(value) ? $t(value) : '' }} </span> "},function(e,t){e.exports=' <div class="list-labels list-item col-md-12 clearfix"> <div v-if=hasThumbnails class=col-md-1> </div> <div v-if=!field.isThumbnail v-for="field in fields" :class="\'col-md-\' + field.column"> <a @click="setSort(field.name, sortOrder)"> {{ $t(field.name) }} <i v-if="!sortable && field.name === sortKey" :class="[\'fa\', caretClass]"> </i> </a> </div> </div> '},function(e,t){e.exports=" <h4> <a v-if=!isNestedRoute($route) :href=\"'#' + $route.path + '/' + object.id\"> {{ value }} </a> <a v-if=isNestedRoute($route) :href=\"'#' + $route.path + '/' + parentComponent + '/' + object.id\"> {{ value }} </a> </h4> "},function(e,t){e.exports=" <ul> <li v-for=\"obj in value\"> <a v-if=isObject(obj) :href=\"'#/' + $parent.key + '/' + obj.id\"> {{ obj.name }} </a> <span v-if=isString(obj)>{{ obj ? value : '' }}</span> </li> </ul> "},function(e,t){e.exports=" <div> <a v-if=!isNestedRoute($route) :href=\"'#' + $route.path + '/' + object.id\"> <img :src=getThumbnail(value) class=img-circle> </a> <a v-if=isNestedRoute($route) :href=\"'#' + $route.path + '/' + parentComponent + '/' + object.id\"> <img :src=getThumbnail(value) class=img-circle> </a> </div> "},function(e,t){e.exports=' <div class="col-md-1 col-error"> <a data-toggle=tooltip data-placement=top title="Tooltip on left"> <img class=img-circle :src=defaultThumb> <div> <p> {{ $t(\'invalidPanorama\') }} </p> <i class="fa fa-caret-left"></i> </div> </a> </div> '},function(e,t){e.exports=' <div class=row v-sortable=options> <labels :fields=fields :sortable=sortable :has-thumbnails=hasThumbnails :default-sort-key=defaultSortKey :default-sort-order=defaultSortOrder> </labels> <div class="list-item col-md-12 clearfix" v-if="className.length === 0"> <br> <div class="alert alert-warning"> {{ $t(\'noItems\') }} </div> </div> <div v-for="object in className | orderBy sortKey sortOrder" class="list-item list-draggable col-md-12 clearfix"> <i class="fa fa-th list-grip" v-if=sortable></i> <thumbnail-error :object-name=objectName v-if=hasNoCategories(object)> </thumbnail-error> <div v-if="isKeyInFields($key) && isValidValue($key, value, object)" v-for="value in object" :class=setColumnsByKey($key)> <thumbnail v-if=keyIsThumbnail($key) :value=value :fields=fields :object=object> </thumbnail> <name v-if=keyHasLink($key) :value=value :fields=fields :object=object> </name> <detail v-if=keyIsDetail($key) :key=$key :value=value :fields=fields> </detail> <tags v-if=keyIsArray($key) :key=$key :value=value :fields=fields> </tags> <checkbox v-if=keyIsCheckbox($key) :key=$key :value.sync=value :fields=fields> </checkbox> </div> <div v-if=object.shareCode class="col-md-1 col-del text-right"> <a :href=object.shareCode target=_blank @click="showBrandModal(object.shareCode, $event)"> <i class="fa fa-eye"></i> </a> </div> <div v-if="actions && actions.share" class="col-md-1 col-del text-right"> <a @click=actions.share.submit(object.id)> <i class="fa fa-share-alt"></i> </a> </div> <div v-if="actions && actions.delete" class="col-md-1 col-del text-right"> <a @click=actions.delete.submit(object.id)> <i class="fa fa-times-circle"></i> </a> </div> <modal v-show="activeModal === object.shareCode" class=choose-brand modal-title=selectLink :no-confirm=true> <h5>{{ $t(\'branded\') }}</h5> <a :href=object.shareCode target=_blank> {{ object.shareCode }} </a> <h5>{{ $t(\'noBranded\') }}</h5> <a :href=buildingShareCodeNoBrand(object) target=_blank> {{ buildingShareCodeNoBrand(object) }} </a> </modal> </div> <div v-if="actions && actions.add" class="col-md-12 col-add"> <input type=submit :value=$t(actions.add.name) class="btn btn-primary" @click=actions.add.submit()> </div> </div> '},function(e,t){e.exports=" <div id=loading :class=\"{ 'no-overlay': noOverlay }\"> <div class=sk-fading-circle> <div :class=\"['sk-circle1', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle2', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle3', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle4', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle5', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle6', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle7', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle8', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle9', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle10', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle11', 'sk-circle', colorClass]\"></div> <div :class=\"['sk-circle12', 'sk-circle', colorClass]\"></div> </div> </div> "},function(e,t){e.exports=" <div class=modal id=myModal tabindex=-1 role=dialog aria-labelledby=myModalLabel> <div class=modal-dialog role=document> <div class=modal-content> <div class=modal-header> <button v-if=!noClose class=close data-dismiss=modal aria-label=Close @click=close> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title id=myModalLabel>{{ $t(modalTitle) }}</h4> </div> <div class=modal-body> <slot></slot> </div> <div class=modal-footer> <button v-if=!noClose class=\"btn btn-default\" data-dismiss=modal @click=close()> {{ $t('close') }} </button> <button v-if=!noConfirm class=\"btn btn-primary\" @click=save()> {{ $t('confirm') }} </button> </div> </div> </div> </div> "},function(e,t){e.exports=' <nav class="navbar navbar-default navbar-static-top"> <div class=container> <div class=navbar-header> <a class=navbar-brand :href="\'#/buildings\'"> <img :src=logoImage> </a> </div> <div id=navbar> <ul class="nav navbar-nav"> <li v-for="link in links" v-if=shouldNotHide(link)> <a :href="link.path ? link.path : \'/#\'" @click="link.method ? link.method() : null" v-active-link=$route> {{ $t(link.name) }} </a> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href=#/profile v-active-link=$route> <img v-if=!isEmptyObj(user) class=img-circle :src=profilePhoto> {{ user.name ? user.name : $t(\'anonymous\') }} </a> </li> <li><a @click=logout>{{ $t(\'logOut\') }}</a></li> </ul> </div> <modal v-show="activeModal === \'creatingBuilding\'" :no-confirm=true :no-close=true> <p>{{ $t(\'creatingBuilding\') }}</p> </modal> </div> <loading v-show=isLoading color=brand></loading> </nav> '},function(e,t){e.exports=' <div class=row> <label class="control-label col-sm-2"></label> <div class=col-sm-10> <div class=progress v-if=hasProgressStarted> <div class="progress-bar progress-bar-striped active" :style="\'width:\' + fileProgress + \'%\'"> {{ fileProgress }}% </div> </div> </div> </div> '},function(e,t){e.exports=' <ul class=share-buttons> <li> <a :href="\'https://www.facebook.com/sharer/sharer.php?u=\' + encodeURIComponent(url) + \'&t=\'" target=_blank title="Share on Facebook" onclick="window.open(\'https://www.facebook.com/sharer/sharer.php?u=\' + encodeURIComponent(url) + \'&t=\' + encodeURIComponent(url)); return false;"> <i class="fa fa-facebook-square fa-2x"></i> </a> </li> <li> <a :href="\'https://twitter.com/intent/tweet?source=\' + encodeURIComponent(url) + \'&text=\' + encodeURIComponent(url)" target=_blank title=Tweet onclick="window.open(\'https://twitter.com/intent/tweet?text=\' + encodeURIComponent(url) + \':%20\' + encodeURIComponent(url)); return false;"> <i class="fa fa-twitter-square fa-2x"></i> </a> </li> <li> <a :href="\'https://plus.google.com/share?url=\' + encodeURIComponent(url)" target=_blank title="Share on Google+" onclick="window.open(\'https://plus.google.com/share?url=\' + encodeURIComponent(url)); return false;"> <i class="fa fa-google-plus-square fa-2x"></i> </a> </li> <li> <a :href="\'http://www.linkedin.com/shareArticle?mini=true&url=\' + encodeURIComponent(url) + \'&title=&summary=&source=\' + encodeURIComponent(url)" target=_blank title="Share on LinkedIn" onclick="window.open(\'http://www.linkedin.com/shareArticle?mini=true&url=\' + encodeURIComponent(url) + \'&title=\' +  encodeURIComponent(url)); return false;"> <i class="fa fa-linkedin-square fa-2x"></i> </a> </li> <li> <a :href="\'mailto:?subject=&body=\' + encodeURIComponent(url)" target=_blank title=Email onclick="window.open(\'mailto:?subject=\' + encodeURIComponent(url) + \'&body=\' +  encodeURIComponent(url)); return false;"> <i class="fa fa-envelope-square fa-2x"></i> </a> </li> </ul> '},function(e,t){e.exports=" <div id=overlay> <div id=spinner> <div class=spinner></div> </div> </div> "},function(e,t){e.exports=' <div id=building class=col-md-12> <div class="subheader clearfix"> <img v-if="!isEmptyObj(building) && isArrayWithValue($key, value)" v-for="value in building" class=img-circle :src="getObjsWithThumbnails($key, building)\n        ? getObjsWithThumbnails($key, building)[0].thumbnail\n        : \'\'"> <h1 v-if=!isEmptyObj(building) class=header-center> {{ building ? building.name : \'\' }} </h1> <building-buttons v-if=building> </building-buttons> </div> <progress-bar :file-progress=fileProgress></progress-bar> <form-builder :object=building :fields=formFields :has-delete=true btn-text=updateDetails del-text=deleteBuilding @on-change=validateFloorplan @on-submit=updateBuilding @on-delete=deleteBuilding> </form-builder> <modal v-show="activeModal === \'deleteBuildingConfirm\'" modal-title=confirmDelete :post-save=deleteBuildingConfirm> <p>{{ $t(\'confirmDeleteBuilding\') }}</p> </modal> <div class=row> <hr> <panoramas></panoramas> </div> <br> <div class=row> <hr> <panorama-editor></panorama-editor> </div> <div class=row> <hr> <marker-editor></marker-editor> </div> <div class=row> <hr> <comments-editor></comments-editor> </div> <spinner v-if=isEmptyObj(building)></spinner> <loading v-show=isLoading color=brand></loading> <alert v-show=alertParams.show></alert> </div> '},function(e,t){e.exports=" <div id=building-buttons> <a :href=\"building ? building.shareCode : ''\" @click=showBrandModal target=_blank> <i class=\"fa fa-eye\"></i> </a> <a @click=shareBuilding><i class=\"fa fa-share-alt\"></i></a> <a @click=syncBuilding><i class=\"fa fa-refresh\"></i></a> <modal v-show=\"activeModal === 'authWithVRTour'\" modal-title=authWithVRTour :post-save=authConfirm> <form-builder :object=leanAuthInfo :fields=leanAuthFormFields :is-in-modal=true> </form-builder> <loading v-show=\"activeLoading === 'authLoading'\" color=brand> </loading> </modal> <modal v-show=\"activeModal === 'syncBuilding'\" modal-title=syncToVRTour :post-save=syncBuildingConfirm> <form-builder :object=leanBuildingInfo :fields=leanBuildingFormFields :is-in-modal=true> </form-builder> <loading v-show=\"activeLoading === 'syncLoading'\" color=brand> </loading> </modal> <modal v-show=\"activeModal === 'buildingSynced'\" modal-title=syncToVRTour :no-confirm=true> <p v-if=isBuildingSynced>{{ $t('buildingSynced') }}</p> <alert v-if=alert :alert=alert @on-click=\"alert = null\"> </alert> </modal> <modal v-show=\"activeModal === 'shareBuilding'\" modal-title=shareBuilding> <a :href=\"building ? building.shareCode : ''\"> {{ building ? building.shareCode : '' }} </a> <share-buttons :url=\"building ? building.shareCode : ''\"></share-buttons> </modal> <modal v-show=\"activeModal === 'chooseBrand'\" class=choose-brand modal-title=selectLink :no-confirm=true> <h5>{{ $t('branded') }}</h5> <a :href=building.shareCode target=_blank> {{ building.shareCode }} </a> <h5>{{ $t('noBranded') }}</h5> <a :href=buildingShareCodeNoBrand target=_blank> {{ buildingShareCodeNoBrand }} </a> </modal> </div> "},function(e,t){e.exports=" <div id=buildings class=col-md-12> <list :class-name=selectedBuildings object-name=panorama :fields=buildingFields :actions=buildingActions :has-thumbnails=true :has-sorting=true default-sort-key=date> </list> <spinner v-if=!areBuildingsFetched></spinner> <modal v-show=\"activeModal === 'deleteConfirm'\" modal-title=confirmDelete :post-save=deleteBuildingConfirm> <p>{{ $t('confirmDeleteBuilding') }}</p> </modal> <modal v-show=\"activeModal === 'shareConfirm'\" modal-title=\"Viewer link\"> <a class=share-link :href=\"currentBuilding ? currentBuilding.shareCode : ''\" target=_blank> {{ currentBuilding ? currentBuilding.shareCode : '' }} </a> <share-buttons :url=\"currentBuilding ? currentBuilding.shareCode : ''\"> </share-buttons> </modal> <alert v-show=alertParams.show></alert> <loading v-show=isLoading color=brand></loading> </div> "},function(e,t){e.exports=" <div id=comments-editor class=col-md-12> <div class=\"subheader clearfix\"> <h1 class=header-left>{{ $t('commentsManager') }}</h1> </div> <list :class-name=firebaseComments object-name=firebaseComment :fields=firebaseCommentsFields :actions=firebaseCommentsActions default-sort-key=date> </list> <modal v-show=\"activeModal === 'deleteCommentConfirm'\" modal-title=confirmDelete :post-save=deleteCommentConfirm> <p>{{ $t('confirmDeleteComment') }}</p> </modal> </div> "},function(e,t){e.exports=' <div id=email-verified class=col-md-12> <h2 v-if="isVerified !== null && isVerified === true" class=text-center> {{ $t(\'emailVerified\') }} </h2> <h2 v-if="isVerified !== null && isVerified === false" class=text-center> {{ $t(\'emailNotVerified\') }} </h2> <loading v-if="isVerified === null" color=white></loading> <hr> <a class="btn btn-primary" href=http://vreditor.istaging.co> {{ $t(\'emailVerifiedButton\') }} </a> </div> '},function(e,t){e.exports=" <div id=forgot-pass class=col-md-12> <p>{{ $t('forgotPass') }}</p> <form-builder :object=authInfo :fields=formFields btn-text=recoveryEmail @on-submit=forgotPassSubmit> </form-builder> <alert v-show=alertParams.show></alert> <loading v-show=isLoading color=white :no-overlay=true></loading> </div> "},function(e,t){e.exports=" <div id=login class=col-md-12> <img class=logo :src=logoImage> <hr> <form-builder :object=authInfo :fields=formFields btn-text=logIn @on-submit=loginSubmit> </form-builder> <loading v-show=isLoading color=white :no-overlay=true></loading>  <alert v-show=alertParams.show></alert> </div> "},function(e,t){e.exports=' <div id=manage-agents class=col-md-12> <alert v-if=alert :alert=alert @on-click="alert = null"> </alert> <div class="subheader clearfix"> <h1 class=header-center>{{ $t(\'manageAgents\') }}</h1> </div> <form-builder :object=signupInfo :fields=formFields btn-text=signUp @on-submit=signupSubmit> </form-builder> <loading v-show="activeLoading === \'formLoading\'" color=brand> </loading> <div class=row> <div id=panoramas class=col-md-12> <alert v-if=alert :alert=alert @on-click="alert = null"> </alert> <div class="subheader clearfix"> <h1 class=header-left>Agents</h1> </div> <list :class-name=agents object-name=agent :fields=agentFields :has-thumbnails=true default-sort-key=date> </list> </div> </div> </div> '},function(e,t){e.exports=' <div class=action-buttons> <a class=delete-button v-show="editorState === 2" @click=handleDeleteButton> <span class="fa-stack fa-lg delete-marker-button delete-button-group"> <i class="fa fa-circle fa-stack-1x"></i> <i class="fa fa-times fa-stack-1x"></i> </span> </a> <a class=undo-button v-show="(editorState === 2 && !hasAddedMarker) || editorState === 4" @click=undo> <span class="fa-stack fa-lg undo-button-group"> <i class="fa fa-circle fa-stack-1x"></i> <i class="fa fa-2x fa-undo fa-stack-1x"></i> </span> </a> <a class=save-rotation-button v-show="editorState === 2 || editorState === 4" @click=onConfirm(selectedMarker)> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-1x"></i> <i class="fa fa-check-circle fa-stack-1x"></i> </span> </a> </div> '},function(e,t){e.exports=' <div id=marker-info> <div class="marker-window panorama-menu" v-if="editorState === 0 ||\n      (selectedMarker.type === \'point\' && editorState === 3)"> <div class=marker-window-inner> <a class=close-button v-if="selectedPanorama && selectedPanorama.id" @click=menuClose></a> <a v-for="panorama in panoramas" track-by=id class=panorama-thumbnail :class="{\n          \'current\': isCurrentPanorama(panorama),\n          \'target\': isTargetPanorama(panorama),\n          \'disabled\': isDisabledPanorama(panorama)\n        }" @click=selectPanorama(panorama)> <img class=thumbnail-img :src=panorama.thumbnail v-if=panorama.thumbnail> <img class="thumbnail-img thumbnail-default" :src=defaultThumbnail v-if=!panorama.thumbnail> <span class=thumbnail-label v-if=isCurrentPanorama(panorama)> {{ $t(\'current\') }} </span> <span class=thumbnail-label v-if=isTargetPanorama(panorama)> {{ $t(\'target\') }} </span> <span class=thumbnail-text> {{ panorama.name }} </span> </a> </div> </div> <div class="marker-window tag-menu" v-if="selectedMarker.type === \'tag\' && editorState === 3"> <div class=marker-window-inner> <a class=close-button @click=menuClose> </a> <form-builder :object=selectedMarker :fields=selectedTagFields :has-preview-photo=true btn-text=updateMarker @on-change=validatePhoto @on-submit=formDone> </form-builder> </div> </div> <div class="marker-window memo-menu" v-if="selectedMarker.type === \'memo\' && editorState === 3"> <div class=marker-window-inner> <a class=close-button @click=menuClose> </a> <form-builder :object=selectedMarker :fields=selectedMemoFields @on-submit=formDone> </form-builder> </div> </div> <div class="marker-window delete-menu" v-if="editorState === -1"> <div class=marker-window-inner> <div class="delete-inner clearfix"> <button class="col-sm-5 col-sm-offset-1 btn btn-default" @click=handleCancelDelete> {{ $t(\'cancel\') }} </button> <button class="col-sm-5 btn btn-danger" @click=handleDeleteMarker> {{ $t(\'delete\') }} </button> </div> </div> </div> </div> '},function(e,t){e.exports=" <div id=marker-panoramas> <div class=target-panorama> <img :src=\"targetPanorama ? targetPanorama.thumbnail : ''\"> <span>{{ $t('target') }}</span> </div> </div> "},function(e,t){e.exports=" <div> <div class=\"marker-menu marker-window window-left\"> <a @click=changeCurrentPanorama :data-tooltip=$t(changeCurrentPanoramaTool.hintText)> <i :class=\"'fa ' + changeCurrentPanoramaTool.class\"></i> </a> </div> <div class=\"marker-menu marker-window window-right\"> <a :class=\"{ 'not-allowed': !pointMarkerState && editorTool.type === 'point' }\" v-for=\"editorTool in editorTools\" @click=handleAddAppMarker(editorTool) :data-tooltip=$t(editorTool.hintText)> <i :class=\"['fa ' + editorTool.class, { 'not-allowed': !pointMarkerState && editorTool.type === 'point' }] \"></i> </a> </div> </div> "},function(e,t){e.exports=' <div id=marker-editor class=col-md-12> <div class="subheader clearfix"> <h1 class=header-left>{{ $t(\'markerEditor\') }}</h1> </div> <div class=row v-show=!panoramas.length> <div class="alert alert-warning"> {{ $t(\'noItems\') }} </div> </div> <div class=marker-container v-show=panoramas.length> <p class=instruction-text :class="{ \'delete\' : editorState === -1 }"> {{ $t(instructionText) }} </p> <marker-info></marker-info> <marker-panoramas v-show="editorState === 2 &&\n      !hasAddedMarker &&\n      selectedMarker.nextPanoId &&\n      selectedMarker.type === \'point\'"> </marker-panoramas> <a-scene vr-mode-ui="enabled: false" v-if=isEditorSceneReady> <a-assets v-if=selectedPanorama.web timeout=100000 @loaded=setLoadedImage> <img id=panorama-image :src=setImgSize(selectedPanorama.web) crossorigin=anonymous> </a-assets> <a-entity v-el:camera-container rotation="0 0 0" @componentchanged=onCameraChange($event)> <a-camera v-el:camera position="0 0 0" rotation="0 0 0"> </a-camera> </a-entity> <a-sky v-if=selectedPanorama.web src=#panorama-image></a-sky> <a-image v-for="marker in selectedPanorama.markers" track-by=initId v-if="editorState !== 4 && !marker.isDeleted" :id=marker.initId :src=markerImageSrc(marker) :color="isSelectedMarker(marker) ? markerColor: markerInactive" opacity=1 rotation="0 0 0" :width=markerSize :height=markerSize :position=joinAppMarkerPosition(marker) look-at=[camera] transparent=true draggable> <a-animation attribute=scale from=".8 .8 1" to="1 1 1" dur=1500 fill=both repeat=indefinite> </a-animation> </a-image> </a-scene> <marker-tools v-show="editorState === 1 && !isImageLoading"></marker-tools> <marker-buttons v-show=!isMarkerSelected></marker-buttons> <div class="marker-overlay marker-overlay-left" v-if="editorState === 4"> </div> <div class="marker-overlay marker-overlay-right" v-if="editorState === 4"> </div> <div class=in-progress v-if=isImageLoading :class="[\'in-progress\', resizingFailed ? \'in-progress-error\' : \'\']"> <div class=in-progress-els> <i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i> <p>{{ $t(\'loadingMessage\') }}</p><p> </p></div> </div> </div> <form v-show=panoramas.length> <div class=form-group> <input type=submit class="btn btn-primary" :class="{ \'disabled\': hasAddedMarker }" :value="$t(\'updateAllMarkers\')" @click.prevent=handleUpdateMarkers> </div> </form> </div> '},function(e,t){e.exports=" <div id=panorama class=col-md-12> <alert v-if=alert :alert=alert @on-click=\"alert = null\"> </alert> <div class=\"subheader clearfix\"> <h1 v-if=!isEmptyObj(panorama) class=header-center> {{ panorama ? panorama.name : '' }} </h1> </div> <progress-bar :file-progress=fileProgress></progress-bar> <form-builder :object=panorama :fields=formFields :has-delete=true :categories=categories btn-text=updateDetails del-text=deletePanorama @on-change=validatePanorama @on-submit=\"updatePanorama('updateLoading')\" @on-delete=deletePanorama> </form-builder> <loading v-show=\"activeLoading === 'updateLoading'\" color=brand> </loading> <div class=row> <hr> <panorama-prev v-if=!isEmptyObj(panorama) :item=panorama @update=\"updatePanorama('editLoading')\" @reset=\"updatePanorama('resetLoading')\"> </panorama-prev> </div> <div class=row> <div class=\"col-md-12 panorama-bottom\"> <a :href=buildingURL class=\"btn btn-default btn-back\"> {{ $t('backToBuilding') }} </a> </div> </div> <modal v-show=\"activeModal === 'shareConfirm'\" modal-title=confirmShare :post-save=sharePanoramaConfirm> <p>{{ $t('confirmSharePanorama') }}</p> </modal> <modal v-show=\"activeModal === 'sharePanoramaSuccess'\" modal-title=viewerLink> <a class=share-link :href=panoViewerURL target=_blank> {{ panoViewerURL }} </a> <share-buttons :url=panoViewerURL></share-buttons> </modal> <modal v-show=\"activeModal === 'deletePanoramaConfirm'\" modal-title=confirmDelete :post-save=deletePanoramaConfirm> <p>{{ $t('confirmDeletePanorama') }}</p> </modal> <spinner v-if=isEmptyObj(panorama)></spinner> <alert v-show=alertParams.show></alert> <loading v-show=isLoading color=brand></loading> </div> "},function(e,t){e.exports=" <div id=editor class=col-md-12> <div class=\"subheader clearfix\"> <h1 class=header-left>{{ $t('panoramaEditor') }}</h1> </div> <div class=plane-container> <div class=plane :style=\"{ backgroundImage: 'url(' + buildingFloorplan + ')' }\"> <p v-if=!buildingFloorplan>{{ $t('uploadFloorplan') }}</p> <div v-el:marker v-for=\"panorama in panoramas\" :id=panorama.id :style=\"{ left: panorama.x + 'px', top: panorama.y + 'px' }\" :class=\"{'hidden': shouldHidePanorama(panorama) }\" class=marker v-drag> <div class=marker-elements> <div class=rotation-instruction v-if=panorama.web> <div class=photo-container :style=setPanoramaStyle(panorama)> </div> <p>{{{ $t('panoramaEditorTooltip') }}}</p> <i class=\"fa fa-caret-down\"></i> </div> <i class=\"fa fa-circle rotation-circle\" :style=\"{ transform: 'rotate(' + panorama.rotation + 'rad)' }\"> <img :src=panoramaRange> </i> <h4>{{ panorama.name }}</h4> </div> </div> </div> </div> <form> <div class=form-group> <input type=submit class=\"btn btn-primary\" :value=\"$t('updateFloorplan')\" @click.prevent=updatePanoramas> </div> </form> </div> "},function(e,t){e.exports=' <div id=panorama-prev> <div class="subheader clearfix col-md-12"> <h1 class=header-left>{{ $t(\'panoramaPreview\') }}</h1> </div> <div class="panorama-container col-md-12"> <div class=plane-container> <a-scene id=panos v-el:panos v-if="item.web && isSceneReady" vr-mode-ui="enabled: false"> <a-assets @loaded=setLoadedImage timeout=100000> <img id=panorama-image :src=setImgSize(item.web) crossorigin=anonymous> </a-assets> <a-sky radius=5000 class=pano src=#panorama-image> </a-sky> <a-entity v-el:camera-container rotation="0 0 0" @componentchanged=onCameraChange($event)> <a-camera v-el:camera drag-look-controls rotation="0 0 0"> </a-camera> </a-entity> </a-scene> <form class=panorama-prev-submit v-if="item && item.web"> <div class=form-group> <input type=submit class="btn btn-primary" :class="{ \'disabled\': isImageLoading }" :value="$t(\'updateDirection\')" @click.prevent=update()> <input type=submit :class="{ \'disabled\': isImageLoading }" class="btn btn-default" :value="$t(\'resetDirection\')" @click.prevent=reset()> </div> </form> <div class="alert alert-warning" v-if="noResizing && !isImageLoading"> {{ $t(\'invalidPanorama\') }} </div> <div class=in-progress v-if=isImageLoading :class="[\'in-progress\', resizingFailed ? \'in-progress-error\' : \'\']"> <div class=in-progress-els> <i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i> <p>{{ $t(\'loadingMessage\') }}</p><p> </p></div> </div> </div> </div> </div> '},function(e,t){e.exports=" <div id=panoramas class=col-md-12> <div class=\"subheader clearfix\"> <h1 class=header-left>{{ $t('panoramaList') }}</h1> </div> <list :class-name=panoramas :sortable=true :sorted-class-name=sortedPanoramas object-name=panorama :fields=panoramaFields :actions=panoramaActions :has-thumbnails=true default-sort-key=index :default-sort-order=1> </list> <modal v-show=\"activeModal === 'deletePanoramaConfirm'\" modal-title=confirmDelete :post-save=deletePanoramaConfirm> <p>{{ $t('confirmDeletePanorama') }}</p> </modal> <modal v-show=\"activeModal === 'shareConfirm'\" modal-title=confirmShare :post-save=sharePanoramaConfirm> <p>{{ $t('confirmSharePanorama') }}</p> </modal> <modal v-show=\"activeModal === 'sharePanoramaSuccess'\" modal-title=\"Viewer link\"> <a class=share-link :href=panoViewerURL target=_blank>{{ panoViewerURL }}</a> <share-buttons :url=panoViewerURL></share-buttons> </modal> <modal v-show=\"activeModal === 'creatingPanorama'\" :no-confirm=true :no-close=true> <p>{{ $t('creatingPanorama') }}</p> </modal> </div> "},function(e,t){e.exports=' <div id=profile class=col-md-12> <alert v-if="alert && processingForm === \'update-user\'" :alert=alert @on-click="alert = null"> </alert> <div class="subheader clearfix"> <img v-if=!isEmptyObj(user) class=img-circle :src=profilePhoto> <h1 v-if=!isEmptyObj(user) class=header-center> {{ user ? user.name : \'\' }} </h1> </div> <form-builder :object=user :fields=formFields :has-delete=true @on-change=validatePhoto @on-submit=updateUser> </form-builder> <hr> <alert v-if="alert && processingForm === \'change-password\'" :alert=alert @on-click="alert = null"> </alert> <div class="subheader clearfix"> <h1 class=header-left>{{ $t(\'changePassword\') }}</h1> </div> <form-builder :object=changePasswordInfo :fields=changePasswordFormFields @on-submit=changePassword> </form-builder> <loading v-show=isLoading color=brand></loading> <spinner v-if=!user></spinner> <alert v-show=alertParams.show></alert> </div> ';
},function(e,t){e.exports=" <div id=reset-pass class=col-md-12> <alert v-if=alert :alert=alert @on-click=\"alert = null\"> </alert> <h2 class=text-center>{{ $t('resetPass') }}</h2> <form-builder :object=authInfo :fields=formFields @on-submit=resetPassSubmit> </form-builder> <loading v-show=\"activeLoading === 'authLoading'\" color=white> </loading> </div> "},function(e,t){e.exports=' <div id=share-code class=col-md-12> <div class="subheader clearfix"> <h1 v-if=!isEmptyObj(shareCode) class=header-center> {{ shareCode.number }} </h1> </div> <div class=row> <hr> <buildings :props=props :code-buildings=codeBuildings></buildings> </div> </div> '},function(e,t){e.exports=" <div id=share-codes class=col-md-12> <list :class-name=shareCodes :fields=shareCodeFields default-sort-key=date> </list> <spinner v-if=!areShareCodesFetched></spinner> </div> "},function(e,t){e.exports=' <div id=signup class=col-md-12> <alert v-if=alert :alert=alert @on-click="alert = null"> </alert> <img class=logo :src=logoImage> <hr> <form-builder :object=signupInfo :fields=formFields btn-text=signUp @on-submit=signupSubmit> </form-builder> <hr> <a class="btn btn-default btn-facebook" @click=fbLoginSubmit> <i class="fa fa-facebook"></i> {{ $t(\'signUpWithFacebook\') }} <div id=fb-root></div> </a> <loading v-show=isLoading color=brand></loading> <alert v-show=alertParams.show></alert> </div> '},function(e,t){e.exports=' <div id=maintenance class=col-md-12> <img class=maintenanceImage :src=maintenanceImage> <div class=maintenance> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1> <path id=path> <animate attributeName=d from="m0,50 h0" to="m0,50 h1100" dur=4s begin=0s repeatCount=indefinite /> </path> <text font-size=22 fill=white> <textPath xlink:href=#path>SYSTEM MAINTENANCE ... </textPath> </text> </svg> </div> </div> '},,function(e,t,n){var a,r;n(315),a=n(234),r=n(369),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(319),a=n(238),r=n(373),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(239),r=n(374),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(240),r=n(375),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(241),r=n(376),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(242),r=n(377),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(243),r=n(378),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(244),r=n(379),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(245),r=n(380),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(323),a=n(249),r=n(384),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(327),a=n(252),r=n(388),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(328),a=n(253),r=n(389),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(255),r=n(391),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(329),a=n(256),r=n(392),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(330),a=n(257),r=n(393),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(331),a=n(258),r=n(394),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(259),r=n(395),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(333),a=n(261),r=n(397),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(334),a=n(262),r=n(398),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(335),a=n(263),r=n(399),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(336),a=n(264),r=n(400),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(337),a=n(265),r=n(401),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(339),a=n(267),r=n(403),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(340),a=n(268),r=n(404),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(269),r=n(405),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(341),a=n(270),r=n(406),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(342),a=n(271),r=n(407),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;a=n(272),r=n(408),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(343),a=n(273),r=n(409),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},function(e,t,n){var a,r;n(344),a=n(274),r=n(410),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},,,,,,,function(e,t){},function(e,t){}]);
//# sourceMappingURL=app.f9d4a3afbaf673a1d6a1.js.map